"use strict";(self.webpackChunkpeon_calculator=self.webpackChunkpeon_calculator||[]).push([[433],{346:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(43),a=s(579);const n=function(){const e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{const t=document.createElement("ins");t.className="kakao_ad_area",t.style.display="none",t.setAttribute("data-ad-unit","DAN-V4UQDzJ7BdEKoWll"),t.setAttribute("data-ad-width","320"),t.setAttribute("data-ad-height","50");const s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="//t1.daumcdn.net/kas/static/ba.min.js",e.current&&(e.current.innerHTML="",e.current.appendChild(t),e.current.appendChild(s))},[]),(0,a.jsx)("div",{ref:e,className:"kakao-adfit-container"})}},433:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ie});var l=s(43),a=s(981),n=s(950),r=s(711),i=s(382),o=s(360),c=s(855),d=s(805),x=s(546),m=s(446),u=s(289),h=s(346);const p={HERO:7,LEGEND:11,RELIC:15,ANCIENT:17},f={HERO:[10],LEGEND:[10,14],RELIC:[10,14,17,18,19,20],ANCIENT:[10,14,17,18,19,20]},g={HERO:"\uc601\uc6c5",LEGEND:"\uc804\uc124",RELIC:"\uc720\ubb3c",ANCIENT:"\uace0\ub300"},b=["HERO","LEGEND","RELIC","ANCIENT"],v={atk:"\uacf5\uaca9\ub825",add:"\ucd94\uac00 \ud53c\ud574",boss:"\ubcf4\uc2a4 \ud53c\ud574",brand:"\ub099\uc778\ub825",allyDmg:"\uc544\uad70 \ud53c\ud574 \uac15\ud654",allyAtk:"\uc544\uad70 \uacf5\uaca9 \uac15\ud654"},N=["atk","add","boss","brand","allyDmg","allyAtk"],j={dealer:new Set(["atk","add","boss"]),support:new Set(["brand","allyDmg","allyAtk"])},w={atk:1,add:1,boss:1,brand:1,allyDmg:1,allyAtk:1},y={boss:.07870909,add:.06018182,atk:.03407273,brand:0,allyDmg:0,allyAtk:0};function k(e){const t={...w};return e?(Object.keys(t).forEach(s=>{const l=e[s],a="number"===typeof l?l:Number(l);t[s]=Number.isFinite(a)&&a>=0?a:w[s]}),t):t}function L(e,t,s){var l,a,n,r;if(null==t)return 0;const i="dealer"===t?j.dealer:j.support;return(i.has(e.o1k)?(null!==(l=e.o1v)&&void 0!==l?l:0)*(null!==(a=s[e.o1k])&&void 0!==a?a:1):0)+(i.has(e.o2k)?(null!==(n=e.o2v)&&void 0!==n?n:0)*(null!==(r=s[e.o2k])&&void 0!==r?r:1):0)}function E(e,t){return f[e].filter(e=>t>=e)}function A(e,t,s,l){const a=e.reduce((e,t)=>{var s;return e+(null!==(s=t.will)&&void 0!==s?s:0)},0),n=e.reduce((e,t)=>{var s;return e+(null!==(s=t.point)&&void 0!==s?s:0)},0),r=E(t,n),i=e.reduce((e,t)=>e+L(t,s,l),0);return{totalWill:a,totalPoint:n,thr:r,roleSum:i,score:1e7*r.length+1e4*n+10*(5e3-a)+i-e.length}}var C=s(579);const S=[{value:"\ud574 \ucf54\uc5b4",label:"\ud574 \ucf54\uc5b4"},{value:"\ub2ec \ucf54\uc5b4",label:"\ub2ec \ucf54\uc5b4"},{value:"\ubcc4 \ucf54\uc5b4",label:"\ubcc4 \ucf54\uc5b4"}],R={order:"\uc9c8\uc11c",chaos:"\ud63c\ub3c8"},P="LoA-CoreOptimizer-v2",M=["\ud574 \ucf54\uc5b4","\ub2ec \ucf54\uc5b4","\ubcc4 \ucf54\uc5b4"];const $=()=>Math.random().toString(36).slice(2,9);function _(){try{const e=localStorage.getItem(P);return e?JSON.parse(e):null}catch(e){return console.warn("loadFromStorage fail",e),null}}const T="undefined"!==typeof document?document.body:null;function F(e){let{draggableId:t,index:s,children:l}=e;return(0,C.jsx)(u.sx,{draggableId:t,index:s,children:(e,t)=>{const s="function"===typeof l?l(e,t):l;return t.isDragging&&T?(0,n.createPortal)(s,T):s}})}function O(e){let{value:t,items:s,onChange:a,placeholder:o,className:c}=e;const[d,u]=(0,l.useState)(!1),h=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useRef)({top:0,left:0,width:0}),[,g]=(0,l.useState)(0);(0,l.useEffect)(()=>{const e=()=>u(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const s=l.useMemo(()=>Array.isArray(e)?e:[e],[e]),a=l.useRef(t);l.useEffect(()=>{a.current=t},[t]),l.useEffect(()=>{const e=e=>{var t;s.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[s])}([h,p],()=>u(!1)),(0,l.useLayoutEffect)(()=>{if(!d||!h.current)return;const e=h.current.getBoundingClientRect();f.current={top:e.bottom+4,left:e.left,width:e.width},g(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(f.current={top:t.bottom+4,left:t.left,width:t.width},g(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[d]);const b=s.find(e=>e.value===t),v=d?(0,C.jsx)(x.N,{children:(0,C.jsx)(m.P.ul,{ref:p,initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},style:{position:"fixed",top:f.current.top,left:f.current.left,width:f.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:s.map(e=>(0,C.jsx)("li",{children:(0,C.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),u(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"opacity-40 cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,C.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,C.jsxs)("div",{ref:h,className:`relative min-w-0 ${c||""}`,children:[(0,C.jsxs)("button",{type:"button",onClick:()=>u(e=>!e),className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50",children:[(0,C.jsx)("span",{className:"truncate text-sm",children:b?b.label:o||"\uc120\ud0dd"}),(0,C.jsx)("span",{className:"text-gray-500 text-sm select-none",children:d?(0,C.jsx)(r.A,{size:16}):(0,C.jsx)(i.A,{size:16})})]}),d&&(0,n.createPortal)(v,document.body)]})}function I(e){let{toasts:t,onClose:s}=e;return(0,C.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none px-4",children:(0,C.jsx)(x.N,{children:t.map(e=>(0,C.jsxs)(m.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:"pointer-events-auto overflow-hidden rounded-2xl border shadow-lg bg-amber-50/95 border-amber-200 text-amber-900 backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw]",children:[(0,C.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,C.jsx)("button",{className:"text-sm font-medium text-amber-900/80 hover:text-amber-900 self-center",onClick:()=>s(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id))})})}function B(e){let{value:t,onChange:s,min:a,max:n,step:r=1,allowFloat:i=!1,zeroOnBlur:o=!0,className:c="",inputProps:d={}}=e;const x=e=>null===e||void 0===e?"":String(e),[m,u]=l.useState(x(t));l.useEffect(()=>{u(x(t))},[t]);const h=e=>{if(""===e)return o?null!==a&&void 0!==a?a:0:null;let t=Number(e);return Number.isFinite(t)?(t=i?t:Math.trunc(t),(e=>{let t=e;return null!=a&&t<a&&(t=a),null!=n&&t>n&&(t=n),t})(t)):o?null!==a&&void 0!==a?a:0:null};return(0,C.jsx)("input",{type:"number",inputMode:i?"decimal":"numeric",step:r,min:a,max:n,value:m,onChange:e=>{const t=e.target.value;if(""===t)return u(""),void(null===s||void 0===s||s(null));u(t);const l=Number(t);Number.isFinite(l)?null===s||void 0===s||s(i?l:Math.trunc(l)):null===s||void 0===s||s(null)},onBlur:()=>{const e=h(m);u(null==e?"":String(e)),null===s||void 0===s||s(e)},onWheel:e=>e.currentTarget.blur(),className:c,...d})}function z(){(0,l.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ud5ec\ud37c"},[]);const[e,t]=(0,l.useState)(()=>{var e,t;return null!==(e=null===(t=_())||void 0===t?void 0:t.category)&&void 0!==e?e:"order"}),[a,x]=(0,l.useState)(()=>{var e;const t=_();return null!==(e=null===t||void 0===t?void 0:t.coresByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[m,T]=(0,l.useState)(()=>{var e;const t=_();return null!==(e=null===t||void 0===t?void 0:t.gemsByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[z,G]=(0,l.useState)(null),[D,H]=(0,l.useState)({...w}),[W,V]=(0,l.useState)(null),[U,Y]=(0,l.useState)(null),{toasts:q,push:J,remove:K}=function(){const[e,t]=(0,l.useState)([]);return{toasts:e,push:e=>{const s=$();t(t=>[...t,{id:s,msg:e}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==s)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),[X,Z]=(0,l.useState)(0),[Q,ee]=(0,l.useState)(!1),[te,se]=(0,l.useState)(!1),le=(0,l.useRef)(!1),[ae,ne]=(0,l.useState)([]),re=a[e],ie=m[e],oe=(0,l.useRef)(null);(0,l.useEffect)(()=>(oe.current=new Worker(new URL(s.p+s.u(290),s.b),{type:void 0}),()=>{var e;null===(e=oe.current)||void 0===e||e.terminate(),oe.current=null}),[]);const ce=t=>{x(s=>{const l="function"===typeof t?t(s[e]):t;return se(!0),{...s,[e]:l}})},de=t=>{T(s=>{const l="function"===typeof t?t(s[e]):t;return se(!0),{...s,[e]:l}})};(0,l.useEffect)(()=>{le.current?se(!0):le.current=!0},[z,D,e]);(0,l.useEffect)(()=>{if(0===X)return;let e=!1;(0,n.flushSync)(()=>ee(!0));const t=()=>new Promise(requestAnimationFrame);return(async()=>{try{await t(),await t();const s=oe.current;if(!s)throw new Error("Worker not initialized");const l=t=>{var a;if(e)return;if(null!==(a=t.data)&&void 0!==a&&a.error)return console.error(t.data.error),ee(!1),void s.removeEventListener("message",l);const{picks:n}=t.data||{};ne(n||[]),se(!1),ee(!1),s.removeEventListener("message",l)};s.addEventListener("message",l);const a=ie.length>24?120:ie.length>16?200:ie.length>10?260:300;s.postMessage({cores:re,gems:ie,role:z,weights:D,perCoreLimit:a})}catch(s){e||(console.error(s),ee(!1))}})(),()=>{e=!0}},[X]);const xe=(e,t)=>de(s=>s.map(s=>s.id===e?{...s,...t}:s)),me=(e,t)=>ce(s=>{if("name"in t){if(s.some(s=>s.id!==e&&s.name===t.name))return J(`${t.name}\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucf54\uc5b4\uc785\ub2c8\ub2e4`),s}return s.map(s=>s.id===e?{...s,...t}:s)}),[ue,he]=(0,l.useState)(!1),pe="h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white",fe="text-base font-semibold whitespace-nowrap",ge="bg-white rounded-2xl shadow-sm",be="px-2.5 py-1.5 rounded-xl bg-gray-100 text-xs lg:text-[13px]",ve="block text-xs text-gray-500 mb-1",Ne=e=>e+1,je=(e,t)=>t-e;return(0,l.useEffect)(()=>{!function(){try{var e;const t=k({atk:2,add:"3",boss:-1});console.assert(2===t.atk&&3===t.add&&1===t.boss,"sanitizeWeights failed");const s={id:"t1",will:1,point:1,o1k:"atk",o1v:2,o2k:"brand",o2v:3};console.assert(L(s,"dealer",t)===2*t.atk,"scoreGemForRole dealer failed"),console.assert(L(s,"support",t)===3*(null!==(e=t.brand)&&void 0!==e?e:1),"scoreGemForRole support failed"),console.assert(E("RELIC",20).includes(20)&&0===E("RELIC",9).length,"thresholdsHit failed");const l=A([s],"RELIC","dealer",t),a=A([s,{...s,id:"t2",will:0,point:10}],"RELIC","dealer",t);console.assert(a.score>=l.score,"scoreCombo monotonicity failed"),console.log("\u2705 Self-tests passed")}catch(t){console.warn("\u274c Self-tests encountered an error",t)}}()},[]),(0,l.useEffect)(()=>{!function(e){try{localStorage.setItem(P,JSON.stringify(e))}catch(t){console.warn("saveToStorage fail",t)}}({category:e,coresByCat:a,gemsByCat:m,role:z,weights:D})},[e,a,m,z,D]),(0,C.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,C.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .btn-primary{ background: #000000; color:#fff; border:none; }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n        .ring-primary:focus{ outline:none; box-shadow:0 0 0 2px rgba(163,153,242,.35); }\n      "}),(0,C.jsx)("style",{children:"button{cursor:pointer}"}),(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,C.jsx)("section",{className:"py-2 lg:py-3",children:(0,C.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,C.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ub3c4\uc6b0\ubbf8"}),(0,C.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:[(0,C.jsx)("button",{onClick:()=>t("order"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("order"===e?"bg-white":"bg-white/70"),title:"\uc9c8\uc11c \uce74\ud14c\uace0\ub9ac",children:R.order}),(0,C.jsx)("button",{onClick:()=>t("chaos"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("chaos"===e?"bg-white":"bg-white/70"),title:"\ud63c\ub3c8 \uce74\ud14c\uace0\ub9ac",children:R.chaos})]})]})}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 !mt-2 ${ue?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,C.jsxs)("h2",{className:fe,children:[R[e]," \ucf54\uc5b4 \uc785\ub825"]}),(0,C.jsx)("div",{className:"flex items-center gap-2 ml-auto whitespace-nowrap",children:(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90 ring-primary",onClick:()=>ce(e=>{if(e.length>=3)return J("\ucf54\uc5b4\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc5b4\uc694."),e;const t=function(e){for(const t of M)if(!e.has(t))return t;return null}(new Set(e.map(e=>e.name)));if(!t)return J("\ud574/\ub2ec/\ubcc4 \ucf54\uc5b4\uac00 \ubaa8\ub450 \ucd94\uac00\ub418\uc5b4 \uc788\uc5b4\uc694."),e;const s=$();return V(s),[{id:s,name:t,grade:"RELIC",minThreshold:void 0,enforceMin:!1},...e]}),"aria-label":"\ucf54\uc5b4 \ucd94\uac00",children:[(0,C.jsx)(o.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \ucf54\uc5b4 \ucd94\uac00"})]})})]}),(0,C.jsxs)("p",{className:"hidden lg:block text-xs text-gray-600",children:["\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,C.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,C.jsxs)("p",{className:"block lg:hidden text-xs text-gray-600",children:["\ud654\uc0b4\ud45c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,C.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,C.jsxs)("div",{className:"mt-3",children:[(0,C.jsx)(u.JY,{onDragStart:()=>{requestAnimationFrame(()=>he(!0));const e=new Event("close-all-dropdowns");window.dispatchEvent(e)},onDragEnd:e=>{requestAnimationFrame(()=>he(!1)),e.destination&&ce(t=>{const s=Array.from(t),[l]=s.splice(e.source.index,1);return s.splice(e.destination.index,0,l),s})},children:(0,C.jsx)(u.gL,{droppableId:"cores-droppable",ignoreContainerClipping:!0,children:e=>(0,C.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"flex flex-col gap-3",children:[re.map((e,t)=>{const s=p[e.grade],l=[{value:"",label:"(\uc120\ud0dd \uc548 \ud568)"}].concat(f[e.grade].map(e=>({value:String(e),label:`${e}P \uc774\uc0c1`}))),a=new Set(re.filter(t=>t.id!==e.id).map(e=>e.name)),n=S.map(e=>({...e,disabled:a.has(e.value)})),o=Math.min(...f[e.grade]);return(0,C.jsx)(F,{draggableId:e.id,index:t,children:a=>{var d;return(0,C.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-end border rounded-xl p-3 bg-white overflow-visible "+(e.id===W?"LoA-highlight":""),style:a.draggableProps.style,children:[(0,C.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl self-start lg:self-center",children:["#",Ne(t)]}),(0,C.jsxs)("div",{className:"flex flex-col min-w-[120px] w-full lg:w-40",children:[(0,C.jsx)("label",{className:ve,children:"\ucf54\uc5b4 \uc885\ub958"}),(0,C.jsx)(O,{className:"w-full lg:w-40",value:e.name,onChange:t=>me(e.id,{name:t}),items:n,placeholder:"\ucf54\uc5b4\uba85"})]}),(0,C.jsxs)("div",{className:"flex flex-col min-w-[160px] w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\ucf54\uc5b4 \ub4f1\uae09"}),(0,C.jsx)(O,{className:"w-full lg:w-40",value:e.grade,onChange:t=>me(e.id,{grade:t}),items:b.map(e=>({value:e,label:g[e]})),placeholder:"\ucf54\uc5b4 \ub4f1\uae09"})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\uacf5\uae09 \uc758\uc9c0\ub825"}),(0,C.jsx)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center",children:(0,C.jsx)("span",{className:"text-primary font-semibold",children:s})})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\ubaa9\ud45c \uad6c\uac04"}),(0,C.jsx)(O,{className:"w-full lg:w-40",value:String(null!==(d=e.minThreshold)&&void 0!==d?d:""),onChange:t=>{me(e.id,t?{minThreshold:Number(t),enforceMin:!0}:{minThreshold:void 0,enforceMin:!1})},items:l,placeholder:"\uad6c\uac04"})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{id:`enf-${e.id}`,type:"checkbox",className:"accent-primary",checked:e.enforceMin,onChange:t=>me(e.id,{enforceMin:t.target.checked})}),(0,C.jsx)("label",{htmlFor:`enf-${e.id}`,className:"text-sm",children:"\ubaa9\ud45c \uad6c\uac04 \uac15\uc81c"})]}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uc120\ud0dd \uc548 \ud568\uc774\uba74 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,C.jsx)("br",{className:"hidden lg:block"}),"\ucd5c\uc18c \uad6c\uac04 ",(0,C.jsxs)("b",{className:"text-primary",children:[o,"P"]}),"\uc744 \uae30\ubcf8 \ubaa9\ud45c\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4."]})]}),(0,C.jsxs)("div",{className:"lg:ml-auto lg:static absolute top-2 right-2 flex items-center gap-1",children:[(0,C.jsx)("div",{className:"hidden lg:hidden"}),(0,C.jsxs)("div",{className:"flex lg:hidden flex-row gap-1 mr-1",children:[(0,C.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,ce(t=>{if(e<=0)return t;const s=[...t];return[s[e-1],s[e]]=[s[e],s[e-1]],s});var e},"aria-label":"\uc704\ub85c",children:(0,C.jsx)(r.A,{size:16})}),(0,C.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,ce(t=>{if(e>=t.length-1)return t;const s=[...t];return[s[e+1],s[e]]=[s[e],s[e+1]],s});var e},"aria-label":"\uc544\ub798\ub85c",children:(0,C.jsx)(i.A,{size:16})})]}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,ce(e=>e.length<=0?e:e.filter(e=>e.id!==t)),void(W===t&&V(null));var t},disabled:re.length<=0,"aria-label":"\ucf54\uc5b4 \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})]})]})}},e.id)}),e.placeholder]})})}),0===re.length&&(0,C.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\ucf54\uc5b4\ub97c \ucd94\uac00\ud558\uc138\uc694. (\ucd5c\ub300 3\uac1c\uc758 \ucf54\uc5b4\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)"})]})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${ue?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 mb-3",children:[(0,C.jsxs)("h2",{className:fe,children:[R[e]," \uc82c \uc785\ub825"]}),(0,C.jsxs)("div",{className:"flex gap-2 ml-auto whitespace-nowrap",children:[(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>{const e=$();de(t=>[{id:e,will:null,point:null,o1k:"atk",o1v:0,o2k:"add",o2v:0},...t]),Y(e)},"aria-label":"\uc82c \ucd94\uac00",children:[(0,C.jsx)(o.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc82c \ucd94\uac00"})]}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>de([]),"aria-label":"\uc804\uccb4 \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc804\uccb4 \uc0ad\uc81c"})]})]})]}),(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[ie.map((e,t)=>(0,C.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white "+(e.id===U?"LoA-highlight":""),children:[(0,C.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",children:["#",je(t,ie.length)]}),(0,C.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,C.jsx)(B,{value:e.will,onChange:t=>xe(e.id,{will:t}),min:0,max:9,step:1,allowFloat:!1,className:`${pe} w-full lg:w-24`,inputProps:{title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825"}})]}),(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,C.jsx)(B,{value:e.point,onChange:t=>xe(e.id,{point:t}),min:0,max:9,step:1,allowFloat:!1,className:`${pe} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8"}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 1"}),(0,C.jsx)(O,{className:"w-full lg:w-44",value:e.o1k,onChange:t=>xe(e.id,{o1k:t}),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(B,{value:e.o1v,onChange:t=>xe(e.id,{o1v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 2"}),(0,C.jsx)(O,{className:"w-full lg:w-44",value:e.o2k,onChange:t=>xe(e.id,{o2k:t}),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(B,{value:e.o2v,onChange:t=>xe(e.id,{o2v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,C.jsx)("div",{className:"lg:static absolute top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,de(e=>e.filter(e=>e.id!==t)),void(U===t&&Y(null));var t},"aria-label":"\uc82c \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})})]},e.id)),0===ie.length&&(0,C.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\uc82c\uc744 \ucd94\uac00\ud558\uc138\uc694."})]})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${ue?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,C.jsx)("h2",{className:fe,children:"\uc720\ud6a8\uc635\uc158 \uac00\uc911\uce58"}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>H({...w}),"aria-label":"\uac00\uc911\uce58 \ucd08\uae30\ud654",children:[(0,C.jsx)(d.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uac00\uc911\uce58 \ucd08\uae30\ud654"})]})]}),(0,C.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm",children:[(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"\ud3ec\uc9c0\uc158 \uc120\ud0dd"}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",name:"role",checked:"dealer"===z,onChange:()=>{G("dealer"),H({...y})},className:"accent-primary"}),"\ub51c\ub7ec"]}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",name:"role",checked:"support"===z,onChange:()=>{G("support"),H(e=>function(e,t){const s={...e};return("dealer"===t?j.support:j.dealer).forEach(e=>{s[e]=0}),j[t].forEach(e=>{s[e]=1}),s}(e,"support"))},className:"accent-primary"}),"\uc11c\ud3ec\ud130"]})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsx)("div",{className:"grid grid-cols-2 gap-2 lg:flex lg:flex-nowrap text-sm min-w-0",children:N.map(e=>(0,C.jsxs)("div",{className:"bg-gray-50 border rounded-xl px-2 py-2 w-full lg:w-1/6 min-w-[120px]",children:[(0,C.jsx)("label",{className:ve,children:v[e]}),(0,C.jsx)(B,{value:D[e],onChange:t=>H(s=>({...s,[e]:t})),min:0,max:5,step:1e-7,allowFloat:!0,className:"h-10 w-full px-2 rounded-md border bg-white focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50"})]},e))})})]}),(0,C.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[te&&!Q&&X>0&&(0,C.jsxs)("span",{className:"inline-block text-[11px] px-3 py-1.5 rounded-lg bg-red-100 text-red-800 border border-red-200 text-center lg:text-left",children:["\uc785\ub825\uac12\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. ",(0,C.jsx)("b",{children:"\uacc4\uc0b0\ud558\uae30"})," \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub2e4\uc2dc \uacc4\uc0b0\ud574 \uc8fc\uc138\uc694."]}),(0,C.jsx)("div",{className:"flex items-center gap-2 lg:ml-auto w-full lg:w-auto",children:(0,C.jsx)("button",{type:"button",onClick:()=>Z(e=>e+1),disabled:Q,className:"h-10 w-full lg:w-[120px] px-0 lg:px-3 rounded-xl ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",children:Q?"\uacc4\uc0b0 \uc911\u2026":"\uacc4\uc0b0\ud558\uae30"})})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${ue?"":"backdrop-blur"}`,children:[(0,C.jsx)("h2",{className:fe,children:"\uacb0\uacfc"}),(0,C.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["\ucf54\uc5b4 1\uac1c\ub2f9 \ucd5c\ub300 ",(0,C.jsx)("b",{children:"\uc82c 4\uac1c"}),"\uae4c\uc9c0 \uc7a5\ucc29\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),!Q&&te&&X>0&&(0,C.jsxs)("p",{className:"text-xs text-red-700 mt-1",children:["\uc785\ub825\uac12\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc6b0\uce21 \uc0c1\ub2e8\uc758 ",(0,C.jsx)("b",{children:"\uacc4\uc0b0\ud558\uae30"})," \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub2e4\uc2dc \uacc4\uc0b0\ud574 \uc8fc\uc138\uc694."]}),(0,C.jsx)("div",{className:"space-y-4 mt-2",children:re.map((e,t)=>{const s=p[e.grade],l=null===ae||void 0===ae?void 0:ae[t],a=!!(l&&l.list&&l.list.length>0),n=Math.min(...f[e.grade]);return(0,C.jsxs)("div",{className:"border rounded-xl p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,C.jsxs)("div",{className:"text-base font-semibold",children:[e.name," ",(0,C.jsxs)("span",{className:"text-sm text-gray-500",children:["(",g[e.grade],")"]})]}),a&&(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-[12px] lg:text-[13px]",children:[(0,C.jsxs)("div",{className:be,children:["\ucd1d \uc758\uc9c0\ub825 ",(0,C.jsx)("span",{className:"font-semibold",children:String(l.totalWill)})," / \uacf5\uae09 ",(0,C.jsx)("span",{children:String(s)})," (",(0,C.jsxs)("span",{children:["\ub098\uba38\uc9c0 ",String(s-l.totalWill)]}),")"]}),(0,C.jsxs)("div",{className:be,children:["\ucd1d \ud3ec\uc778\ud2b8 ",(0,C.jsx)("span",{className:"font-semibold",children:String(l.totalPoint)})]}),(()=>{const e=l.thr.length?Math.max(...l.thr):null;return(0,C.jsxs)("div",{className:be,children:["\ub2ec\uc131 \uad6c\uac04 ",(0,C.jsx)("span",{className:"font-semibold",children:null!=e?String(e):"\uc5c6\uc74c"})]})})(),(0,C.jsxs)("div",{className:be,children:["dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 ",(0,C.jsxs)("span",{className:"font-semibold text-primary",children:[String(l.roleSum.toFixed(4)),"%"]})]})]})]}),a?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"hidden lg:block overflow-x-auto mt-2",children:(0,C.jsxs)("table",{className:"min-w-full text-sm",children:[(0,C.jsxs)("colgroup",{children:[(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"24%"}),(0,C.jsx)("col",{width:"24%"}),(0,C.jsx)("col",{width:"13%"})]}),(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc120\ud0dd"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc758\uc9c0\ub825"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1581"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1582"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 "})]})}),(0,C.jsx)("tbody",{children:l.list.map(e=>{var t,s,l;const a=ie.findIndex(t=>t.id===e.id),n=je(a,ie.length);return(0,C.jsxs)("tr",{className:"border-t",children:[(0,C.jsxs)("td",{className:"px-2 py-2",children:["#",String(n)]}),(0,C.jsx)("td",{className:"px-2 py-2",children:String(null!==(t=null!==(s=e.wwill)&&void 0!==s?s:e.will)&&void 0!==t?t:0)}),(0,C.jsx)("td",{className:"px-2 py-2",children:String(null!==(l=e.point)&&void 0!==l?l:0)}),(0,C.jsxs)("td",{className:"px-2 py-2",children:[v[e.o1k]," ",String(e.o1v)]}),(0,C.jsxs)("td",{className:"px-2 py-2",children:[v[e.o2k]," ",String(e.o2v)]}),(0,C.jsxs)("td",{className:"px-2 py-2 text-primary",children:[String(L(e,z,k(D)).toFixed(4)),"%"]})]},e.id)})})]})}),(0,C.jsx)("div",{className:"lg:hidden mt-2 space-y-2",children:l.list.map(e=>{const t=ie.findIndex(t=>t.id===e.id),s=je(t,ie.length);return(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,C.jsxs)("div",{className:"font-medium",children:["#",String(s)]}),(0,C.jsxs)("div",{className:"text-xs text-primary",children:["dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 "," ",String(L(e,z,k(D)).toFixed(4)),"%"]})]}),(0,C.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-sm",children:[(0,C.jsx)("div",{className:"text-gray-500",children:"\uc758\uc9c0\ub825"}),(0,C.jsx)("div",{children:String(e.will)}),(0,C.jsx)("div",{className:"text-gray-500",children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)("div",{className:"text-primary",children:String(e.point)}),(0,C.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1581"}),(0,C.jsxs)("div",{children:[v[e.o1k]," ",String(e.o1v)]}),(0,C.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1582"}),(0,C.jsxs)("div",{children:[v[e.o2k]," ",String(e.o2v)]})]})]},e.id)})})]}):(0,C.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:["\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. (\uc774 \ucf54\uc5b4\uc5d0 \ubc30\uc815 \uac00\ub2a5\ud55c \uc870\ud569\uc774 \uc5c6\uac70\ub098, \ubaa9\ud45c \uad6c\uac04\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.",null==e.minThreshold?` / \ucd5c\uc18c ${n}P \uc790\ub3d9 \uc801\uc6a9\uc911`:"",")"]})]},e.id)})})]})]}),(0,C.jsx)(I,{toasts:q,onClose:K}),(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)(h.A,{})}),Q&&(0,C.jsxs)("div",{className:"fixed inset-0 z-[99999] bg-black/35 backdrop-blur-[1px] flex items-center justify-center",children:[(0,C.jsx)("div",{className:"w-12 h-12 border-4 border-white/80 border-t-transparent rounded-full animate-spin","aria-label":"\uacc4\uc0b0 \uc911"}),(0,C.jsx)("span",{className:"ml-3 text-white font-semibold select-none",children:"\ucd5c\uc801 \uc870\ud569 \uacc4\uc0b0 \uc911\u2026"})]})]})}var G=s(596),D=s(693),H=s(899),W=s(829),V=s(655);const U=!0,Y=!0;function q(e){let t=2166136261;for(let s=0;s<e.length;s++)t^=e.charCodeAt(s),t=Math.imul(t,16777619);return t>>>0}function J(e){return q(JSON.stringify(e))||1}function K(e){let t=e>>>0;return function(){return t^=t<<13,t>>>=0,t^=t>>>17,t>>>=0,t^=t<<5,t>>>=0,(t>>>0)/4294967296}}const X=e=>!(Number(e)>0),Z=e=>Number(e)>=1,Q={LEGEND_MIN:4,LEGEND_MAX:15,RELIC_MIN:16,RELIC_MAX:18,ANCIENT_MIN:19},ee={"\uc9c8\uc11c-\uc548\uc815":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\uc9c8\uc11c-\uacac\uace0":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\uc9c8\uc11c-\ubd88\ubcc0":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\uce68\uc2dd":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\ud63c\ub3c8-\uc65c\uace1":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\ubd95\uad34":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]}},te={"\uace0\uae09":5,"\ud76c\uadc0":7,"\uc601\uc6c5":9},se={"\uace0\uae09":0,"\ud76c\uadc0":1,"\uc601\uc6c5":2},le=1,ae=5,ne=900,re=(e,t,s)=>Math.max(t,Math.min(s,e));function ie(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"0%":t>=1?"100.00000%":(100*t).toFixed(5)+"%"}const oe=e=>ie(e),ce=e=>e.toLocaleString();function de(e,t){return!Number.isFinite(e)||e<=0?0:!Number.isFinite(t)||t<=0?1/0:e/t}const xe=e=>`${Math.max(0,Math.min(100,Math.round(100*(Number(e)||0))))}%`;function me(e){return e>=.2?{label:"\ub0ae\uc74c",tone:"bg-emerald-50 border-emerald-200 text-emerald-800"}:e>=.05?{label:"\ubcf4\ud1b5",tone:"bg-amber-50 border-amber-200 text-amber-800"}:e>=.01?{label:"\ub192\uc74c",tone:"bg-orange-50 border-orange-200 text-orange-800"}:{label:"\ub9e4\uc6b0 \ub192\uc74c",tone:"bg-rose-50 border-rose-200 text-rose-800"}}function ue(e,t){if(t<=0)return 0;if(0===e)return 0;if(e===t)return 1;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mle"){case"laplace":return(e+1)/(t+2);case"jeffreys":return(e+.5)/(t+1);default:return e/t}}const he=!0,pe=[{value:1e3,label:"1,000\ud68c (\ube60\ub984)"},{value:5e3,label:"5,000\ud68c (\ubcf4\ud1b5)"},{value:1e4,label:"10,000\ud68c (\ucd94\ucc9c)"},{value:5e4,label:"50,000\ud68c (\uc815\ubc00)"}];function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return 1-Math.pow(t,1/e)}const ge=e=>e>=2e5?1e-4:e>=1e5?2e-4:e>=5e4?3e-4:e>=1e4?5e-4:e>=5e3?7e-4:.001,be=e=>e>=5e4?1e3:e>=1e4?800:e>=5e3?600:400;function ve(e,t){const s=ee[e];return s?"\uacf5\uaca9\ud615"===t?s.attack:"\uc9c0\uc6d0\ud615"===t?s.support:[...s.attack,...s.support]:[]}const Ne=e=>e.eff+e.pts+e.aLvl+e.bLvl;function je(e){return e>=Q.ANCIENT_MIN?"\uace0\ub300":e>=Q.RELIC_MIN&&e<=Q.RELIC_MAX?"\uc720\ubb3c":e>=Q.LEGEND_MIN&&e<=Q.LEGEND_MAX?"\uc804\uc124":"\ub4f1\uae09 \ubbf8\ub9cc"}function we(e,t,s,l,a,n){const r=s.eff>=l.eff&&s.pts>=l.pts;if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=ve(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,x=(e,t,s,l)=>o(s)?i.includes(e)&&t>=l:e===s&&t>=l;if("ANY_ONE"===t){const e=c&&(x(s.aName,s.aLvl,c,l.aLvl)||x(s.bName,s.bLvl,c,l.aLvl));return r&&!!e}return!(!c||!d)&&(r&&(x(s.aName,s.aLvl,c,l.aLvl)&&x(s.bName,s.bLvl,d,l.bLvl)||x(s.aName,s.aLvl,d,l.bLvl)&&x(s.bName,s.bLvl,c,l.aLvl)))}function ye(e){return 1!==e}function ke(e,t,s,l,a){const n=e,r=[];n.eff<5&&r.push({slot:{kind:"EFF",delta:1},w:11.65}),n.eff<=3&&r.push({slot:{kind:"EFF",delta:2},w:4.4}),n.eff<=2&&r.push({slot:{kind:"EFF",delta:3},w:1.75}),n.eff<=1&&r.push({slot:{kind:"EFF",delta:4},w:.45}),ye(n.eff)&&r.push({slot:{kind:"EFF",delta:-1},w:3}),n.pts<5&&r.push({slot:{kind:"PTS",delta:1},w:11.65}),n.pts<=3&&r.push({slot:{kind:"PTS",delta:2},w:4.4}),n.pts<=2&&r.push({slot:{kind:"PTS",delta:3},w:1.75}),n.pts<=1&&r.push({slot:{kind:"PTS",delta:4},w:.45}),ye(n.pts)&&r.push({slot:{kind:"PTS",delta:-1},w:3}),n.aLvl<5&&r.push({slot:{kind:"A_LVL",delta:1},w:11.65}),n.aLvl<=3&&r.push({slot:{kind:"A_LVL",delta:2},w:4.4}),n.aLvl<=2&&r.push({slot:{kind:"A_LVL",delta:3},w:1.75}),n.aLvl<=1&&r.push({slot:{kind:"A_LVL",delta:4},w:.45}),ye(n.aLvl)&&r.push({slot:{kind:"A_LVL",delta:-1},w:3}),n.bLvl<5&&r.push({slot:{kind:"B_LVL",delta:1},w:11.65}),n.bLvl<=3&&r.push({slot:{kind:"B_LVL",delta:2},w:4.4}),n.bLvl<=2&&r.push({slot:{kind:"B_LVL",delta:3},w:1.75}),n.bLvl<=1&&r.push({slot:{kind:"B_LVL",delta:4},w:.45}),ye(n.bLvl)&&r.push({slot:{kind:"B_LVL",delta:-1},w:3});const i=ve(l,"\uc0c1\uad00 \uc5c6\uc74c"),o=i.filter(e=>e!==n.bName&&e!==n.aName).length>0,c=i.filter(e=>e!==n.aName&&e!==n.bName).length>0;return o&&r.push({slot:{kind:"A_CHANGE"},w:3.25}),c&&r.push({slot:{kind:"B_CHANGE"},w:3.25}),t>1&&(1!==a&&r.push({slot:{kind:"COST",mod:1},w:1.75}),-1!==a&&r.push({slot:{kind:"COST",mod:-1},w:1.75}),r.push({slot:{kind:"REROLL_PLUS",amount:1},w:2.5}),r.push({slot:{kind:"REROLL_PLUS",amount:2},w:.75})),r.push({slot:{kind:"HOLD"},w:1.75}),r}function Le(e,t){switch(e.kind){case"EFF":return"\uc758\uc9c0\ub825 \ud6a8\uc728 "+(e.delta>0?"+"+e.delta:"-1");case"PTS":return"\ud3ec\uc778\ud2b8 "+(e.delta>0?"+"+e.delta:"-1");case"A_LVL":return`${t.aName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"B_LVL":return`${t.bName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"A_CHANGE":return`${t.aName} \ud6a8\uacfc \ubcc0\uacbd`;case"B_CHANGE":return`${t.bName} \ud6a8\uacfc \ubcc0\uacbd`;case"COST":return 1===e.mod?"\uac00\uacf5 \ube44\uc6a9 +100% \uc99d\uac00":"\uac00\uacf5 \ube44\uc6a9 -100% \uac10\uc18c";case"HOLD":return"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0";case"REROLL_PLUS":return"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 "+(2===e.amount?"+2\ud68c":"+1\ud68c");default:return""}}function Ee(e,t){const s=e=>e.includes("-1")?-1:parseInt(e.replace(/[^0-9]/g,""),10)||1;return(e=e.trim()).startsWith("\uc758\uc9c0\ub825 \ud6a8\uc728")?{kind:"EFF",delta:s(e)}:e.startsWith("\ud3ec\uc778\ud2b8")?{kind:"PTS",delta:s(e)}:e.startsWith(t.aName+" ")?e.includes("\ubcc0\uacbd")?{kind:"A_CHANGE"}:{kind:"A_LVL",delta:s(e)}:e.startsWith(t.bName+" ")?e.includes("\ubcc0\uacbd")?{kind:"B_CHANGE"}:{kind:"B_LVL",delta:s(e)}:e.startsWith("\uac00\uacf5 \ube44\uc6a9")?{kind:"COST",mod:e.includes("+100%")?1:-1}:e.startsWith("\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")?{kind:"HOLD"}:e.startsWith("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30")?{kind:"REROLL_PLUS",amount:e.includes("+2")?2:1}:null}function Ae(e,t,s,l,a,n){const r="function"===typeof n?n:Math.random;let i={...s};const o=ne*(-1===a?0:1===a?2:1);let c=0,d=0;const x=ve(e,"\uc0c1\uad00 \uc5c6\uc74c");switch(l.kind){case"EFF":i.eff=re(i.eff+l.delta,0,ae);break;case"PTS":i.pts=re(i.pts+l.delta,0,ae);break;case"A_LVL":i.aLvl=re(i.aLvl+l.delta,0,ae);break;case"B_LVL":i.bLvl=re(i.bLvl+l.delta,0,ae);break;case"A_CHANGE":{const e=x.filter(e=>e!==i.bName&&e!==i.aName);if(e.length){const t=e[Math.floor(r()*e.length)];i.aName=t}break}case"B_CHANGE":{const e=x.filter(e=>e!==i.aName&&e!==i.bName);if(e.length){const t=e[Math.floor(r()*e.length)];i.bName=t}break}case"COST":c=l.mod;break;case"HOLD":default:break;case"REROLL_PLUS":d+=l.amount}return{next:i,goldThisAttempt:o,nextRate:c,rerollDelta:d}}const Ce={successProb:0,legendProb:0,relicProb:0,ancientProb:0,expectedGold:0};function Se(e,t,s,l,a,n,r,i,o,c,d,x,m){let u=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{};const{maxTrials:h=5e4,epsilon:p=.002,batch:f=1e3,minTrials:g=Math.min(1e4,h),estimator:b="jeffreys",useAntithetic:v=!0,autoScaleRare:N=!0,rareTargetSuccesses:j=100,rareMaxTrials:w=2e5,rareTiers:y=[2e5]}=u,k=l=>function(e,t,s,l,a,n){let r=Math.max(0,l.eff-s.eff)+Math.max(0,l.pts-s.pts);if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=ve(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,x=(e,t,s,l)=>o(s)?(i.includes(e)?0:1)+Math.max(0,l-t):(e===s?0:1)+Math.max(0,l-t);if("ANY_ONE"===t){if(!c)return Number.POSITIVE_INFINITY;const e=x(s.aName,s.aLvl,c,l.aLvl),t=x(s.bName,s.bLvl,c,l.aLvl);r+=Math.min(e,t)}else{if(!c||!d)return Number.POSITIVE_INFINITY;const e=x(s.aName,s.aLvl,c,l.aLvl)+x(s.bName,s.bLvl,d,l.bLvl),t=x(s.aName,s.aLvl,d,l.bLvl)+x(s.bName,s.bLvl,c,l.aLvl);r+=Math.min(e,t)}return r}(t,s,l,a,e,m),L=x=>{const u=e=>{const t=e.reduce((e,t)=>e+t.w,0);let s=x()*t;for(let l=0;l<e.length;l++)if(s-=e[l].w,s<=0)return l;return e.length-1};let h={...l},p=0,f=r,g=i,b=c,v=o,N=!0;if("STOP_ON_SUCCESS"===n&&we(t,s,h,a,e,m)){const e=je(Ne(h));return{successProb:1,legendProb:"\uc804\uc124"===e?1:0,relicProb:"\uc720\ubb3c"===e?1:0,ancientProb:"\uace0\ub300"===e?1:0,expectedGold:0}}for(;f>0;){let l=[];if(N&&d.length>0)l=d.slice(0,4);else{const t=ke(h,f,0,e,v);if(!t.length)break;const s=[...t],a=Math.min(4,s.length);for(let e=0;e<a;e++){const e=u(s);l.push(s[e].slot),s.splice(e,1)}}if(he){const t=l[Math.floor(x()*l.length)],s=Ae(e,0,h,t,v,x);h=s.next,p+=s.goldThisAttempt,v=s.nextRate,g+=s.rerollDelta,b=!0}else{const s=ve(e,t),a=h.aName,n=h.bName,r=s.some(e=>e!==n&&e!==a),i=s.some(e=>e!==a&&e!==n),o=k(h);let c=null;for(const t of l){if("A_CHANGE"===t.kind&&!r)continue;if("B_CHANGE"===t.kind&&!i)continue;const s=Ae(e,0,h,t,v,x),l=o-k(s.next);(!c||l>c.gain)&&(c={next:s.next,gold:s.goldThisAttempt,nextRate:s.nextRate,rrd:s.rerollDelta,gain:l})}if(c&&c.gain<=0&&b&&g>0){g-=1,N=!1;continue}c&&(h=c.next,p+=c.gold,v=c.nextRate,g+=c.rrd,b=!0)}if(f-=1,N=!1,"STOP_ON_SUCCESS"===n&&we(t,s,h,a,e,m))break}const j=je(Ne(h));return{successProb:we(t,s,h,a,e,m)?1:0,legendProb:"\uc804\uc124"===j?1:0,relicProb:"\uc720\ubb3c"===j?1:0,ancientProb:"\uace0\ub300"===j?1:0,expectedGold:p}};let E=0,A=0,C=0,S=0,R=0,P=0,M={...Ce,trialsUsed:0,ci:{low:0,high:0,halfWidth:0}},$=h,_=!1;const T=Array.isArray(y)&&y.length?[...y].sort((e,t)=>e-t):[w],F=T[T.length-1],O=e=>T.find(t=>t>e)||e,I=T[0],B=(e,t)=>(e>>>0^Math.imul(t+1>>>0,2654435761)>>>0)>>>0,z=()=>{const e=A/Math.max(1,E);let t;if(0===e){const e=fe(E);t={low:0,high:e,halfWidth:e/2}}else if(1===e){const e=1-fe(E);t={low:e,high:1,halfWidth:(1-e)/2}}else{const s=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96;const l=1+s*s/t,a=(e+s*s/(2*t))/l,n=s/l*Math.sqrt(e*(1-e)/t+s*s/(4*t*t));return{low:Math.max(0,a-n),high:Math.min(1,a+n)}}(e,E);t={low:s.low,high:s.high,halfWidth:(s.high-s.low)/2}}return M.ci=t,t};for(;E<$;){const e=f;for(let s=0;s<e&&!(E>=$);s++){const e=B(x>>>0,E+s),t=L(K(e));if(A+=t.successProb,C+=t.legendProb,S+=t.relicProb,R+=t.ancientProb,P+=t.expectedGold,E+=1,v&&E<$){const t=K(e),s=L(()=>1-t());A+=s.successProb,C+=s.legendProb,S+=s.relicProb,R+=s.ancientProb,P+=s.expectedGold,E+=1}}const t=z().halfWidth||0;if(N&&E>=g&&0===A&&$<F){$=$<I?I:O($),_=!0;continue}if(N&&E>=g&&A<j&&$<F){const e=$<I?I:O($);$=Math.min(F,e);continue}if(!_&&t<=p&&E>=g)break}return M.trialsUsed=E,M.successProb=ue(A,E,b),M.legendProb=ue(C,E,b),M.relicProb=ue(S,E,b),M.ancientProb=ue(R,E,b),M.expectedGold=P/Math.max(1,E),M.successes=0|A,M}const Re={legend:"linear-gradient(90deg, #7A3E00, #B16800)",relic:"linear-gradient(90deg, #8C2F06, #AB4102)",ancient:"linear-gradient(90deg, #A67C37, #F5DFAB)"};function Pe(e){let{value:t,items:s,onChange:a,placeholder:n,className:o,disabled:c,bordered:d=!0}=e;const[u,h]=(0,l.useState)(!1),p=(0,l.useRef)(null),f=(0,l.useRef)(null),g=(0,l.useRef)({top:0,left:0,width:0}),[,b]=(0,l.useState)(0);(0,l.useEffect)(()=>{const e=()=>h(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const s=(0,l.useMemo)(()=>Array.isArray(e)?e:[e],[e]),a=(0,l.useRef)(t);(0,l.useEffect)(()=>{a.current=t},[t]),(0,l.useEffect)(()=>{const e=e=>{var t;s.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[s])}([p,f],()=>h(!1)),(0,l.useLayoutEffect)(()=>{if(!u||!p.current)return;const e=p.current.getBoundingClientRect();g.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(g.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[u]);const v=s.find(e=>e.value===t),N=u&&!c?(0,C.jsx)(x.N,{children:(0,C.jsx)(m.P.ul,{ref:f,initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.12},style:{position:"fixed",top:g.current.top,left:g.current.left,width:g.current.width,zIndex:9999},className:"rounded-xl bg-white shadow-lg overflow-auto max-h-60 "+(d?"border":""),children:s.map(e=>(0,C.jsx)("li",{children:(0,C.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),h(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,C.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,C.jsxs)("div",{ref:p,className:`relative min-w-0 ${o||""}`,children:[(0,C.jsxs)("button",{type:"button",onClick:()=>!c&&h(e=>!e),disabled:c,className:`min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 ${d?"border":""} ${c?"cursor-not-allowed":""}`,children:[(0,C.jsx)("span",{className:"truncate text-sm",children:v?v.label:n||"\uc120\ud0dd"}),(0,C.jsx)("span",{className:"text-gray-500 text-sm select-none",children:u?(0,C.jsx)(r.A,{size:16}):(0,C.jsx)(i.A,{size:16})})]}),u&&N]})}function Me(e){let{toasts:t,onClose:s}=e;const l=e=>({success:"text-emerald-900/80 hover:text-emerald-900",info:"text-sky-900/80 hover:text-sky-900",warning:"text-amber-900/80 hover:text-amber-900",error:"text-rose-900/80 hover:text-rose-900"}[e]||"text-amber-900/80 hover:text-amber-900");return(0,C.jsx)("div",{className:"fixed inset-0 z-[9999] flex space-y-2 flex-col items-center justify-center pointer-events-none px-4",children:(0,C.jsx)(x.N,{children:t.map(e=>{return(0,C.jsxs)(m.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:`pointer-events-auto overflow-hidden rounded-2xl border shadow-lg backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw] ${t=e.tone,{success:"bg-emerald-50/95 border-emerald-200 text-emerald-900",info:"bg-sky-50/95 border-sky-200 text-sky-900",warning:"bg-amber-50/95 border-amber-200 text-amber-900",error:"bg-rose-50/95 border-rose-200 text-rose-900"}[t]||"bg-amber-50/95 border-amber-200 text-amber-900"}`,children:[(0,C.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,C.jsx)("button",{className:`text-sm font-medium self-center ${l(e.tone)}`,onClick:()=>s(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id);var t})})})}function $e(e){let{value:t,set:s,onChange:a,min:n=le,max:r=99,step:i=1,allowFloat:o=!1,zeroOnBlur:c=!0,className:d="",inputProps:x={},disabled:m}=e;const u=e=>null===e||void 0===e?"":String(e),[h,p]=l.useState(u(t));l.useEffect(()=>{p(u(t))},[t]);const f=e=>{let t=e;return null!=n&&t<n&&(t=n),null!=r&&t>r&&(t=r),t},g="function"===typeof a,b="function"===typeof s;return(0,C.jsx)("input",{type:"number",inputMode:o?"decimal":"numeric",step:i,min:n,max:r,disabled:m,value:h,onChange:e=>{const t=e.target.value;if(""===t)return p(""),void(g&&a(null));p(t);const l=Number(t);if(!Number.isFinite(l))return void(g&&a(null));const n=o?l:Math.trunc(l);g?a(n):b&&s(f(n))},onBlur:()=>{const e=(e=>{if(""===e)return c?null!==n&&void 0!==n?n:0:null;let t=Number(e);return Number.isFinite(t)?(t=o?t:Math.trunc(t),f(t)):c?null!==n&&void 0!==n?n:0:null})(h);p(null==e?"":String(e)),g?a(e):b&&s(null==e?null!==n&&void 0!==n?n:0:e)},onWheel:e=>e.currentTarget.blur(),className:`h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white ${d}`,...x})}const _e=e=>{let{value:t,set:s,options:l,disabled:a,placeholder:n}=e;const r=(l||[]).map(e=>{var t,s;return"string"===typeof e?{value:e,label:e}:{value:null!==(t=e.value)&&void 0!==t?t:e,label:null!==(s=e.label)&&void 0!==s?s:String(e)}});return(0,C.jsx)(Pe,{value:t,onChange:s,items:r,disabled:!!a,className:"w-full lg:w-full",placeholder:n||"\uc120\ud0dd"})};function Te(e){const t=e.filter(Boolean);return new Set(t).size!==t.length}function Fe(){var e;const{toasts:t,push:s,remove:a}=function(){const[e,t]=(0,l.useState)([]);return{toasts:e,push:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const l=Math.random().toString(36).slice(2,9);t(t=>[...t,{id:l,msg:e,tone:s}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==l)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),[n,r]=(0,l.useState)("\uc9c8\uc11c-\uc548\uc815"),[i,o]=(0,l.useState)("\uc0c1\uad00 \uc5c6\uc74c"),[c,x]=(0,l.useState)("\uace0\uae09"),[u,p]=(0,l.useState)("ANY_ONE"),f=(0,l.useMemo)(()=>ve(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),g=(0,l.useMemo)(()=>ve(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),[b,v]=(0,l.useState)({eff:le,pts:le,aName:f[0],aLvl:le,bName:f[1]||f[0],bLvl:le}),[N,j]=(0,l.useState)({eff:le,pts:le,aLvl:le,bLvl:le}),[w,y]=(0,l.useState)({aName:ve(n,i)[0],bName:ve(n,i)[1]||ve(n,i)[0]}),[k,L]=(0,l.useState)(!1),[E,A]=(0,l.useState)(!1),[S,R]=(0,l.useState)(!1),P=b.aName!==b.bName,[M,$]=(0,l.useState)(1e4),_=(0,l.useRef)(!1);(0,l.useEffect)(()=>{_.current||(_.current=!0,v(e=>({...e,eff:Math.max(e.eff,le),pts:Math.max(e.pts,le),aLvl:Math.max(e.aLvl,le),bLvl:Math.max(e.bLvl,le)})),j(e=>({...e,eff:Math.max(e.eff,le),pts:Math.max(e.pts,le),aLvl:Math.max(e.aLvl,le),bLvl:Math.max(e.bLvl,le)})))},[]);const[T,F]=(0,l.useState)(()=>({attemptsLeft:te[c],rerolls:se[c],unlocked:!1,costAddRate:0,gold:0,state:{...b}}));(0,l.useEffect)(()=>{F(e=>({...e,attemptsLeft:te[c],rerolls:se[c],state:{...b},unlocked:!1,costAddRate:0,gold:0}))},[c,b]);const[O,I]=(0,l.useState)(null),[B,z]=(0,l.useState)(""),[Q,ue]=(0,l.useState)({past:[],future:[]}),he=(0,l.useCallback)(()=>({manual:JSON.parse(JSON.stringify(T)),changeMode:O?{...O,options:[...O.options]}:null,changePick:B}),[T,O,B]),fe=(0,l.useCallback)(e=>{F(e.manual),I(e.changeMode),z(e.changePick)},[]),Ne=(0,l.useCallback)(()=>{ue(e=>{const t=[...e.past,he()];for(;t.length>50;)t.shift();return{past:t,future:[]}})},[he]),je=Q.past.length>0,we=Q.future.length>0,[ye,Ce]=(0,l.useState)([]),Fe=()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`},Oe=(0,l.useCallback)(e=>{Ce(t=>[{id:Math.random().toString(36).slice(2),time:Fe(),...e},...t].slice(0,200))},[]),Ie=(0,l.useCallback)(()=>{ue(e=>{if(0===e.past.length)return e;const t=e.past[e.past.length-1],s=e.past.slice(0,-1),l=he();return fe(t),Oe({type:"undo",title:"\ub418\ub3cc\ub9ac\uae30",detail:"\uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uad6c"}),{past:s,future:[l,...e.future]}})},[fe,he,Oe]),Be=(0,l.useCallback)(()=>{ue(e=>{if(0===e.future.length)return e;const t=e.future[0],s=e.future.slice(1),l=he();return fe(t),Oe({type:"redo",title:"\ub2e4\uc2dc\ud558\uae30",detail:"\ub418\ub3cc\ub9ac\uae30 \ucde8\uc18c"}),{past:[...e.past,l],future:s}})},[fe,he,Oe]);(0,l.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key.toLowerCase()&&(e.preventDefault(),e.shiftKey?we&&Be():je&&Ie())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[je,we,Ie,Be]);const ze=(e,t)=>{const s=[],l=function(l){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;e[l]!==t[l]&&s.push(`${a} ${e[l]}\u2192${t[l]}`)};if(l("eff","\ud6a8\uc728"),l("pts","\ud3ec\uc778\ud2b8"),e.aName!==t.aName||e.aLvl!==t.aLvl){const l=e.aName===t.aName?t.aName:`${e.aName}\u2192${t.aName}`;s.push(`A ${l} Lv.${e.aLvl}\u2192${t.aLvl}`)}if(e.bName!==t.bName||e.bLvl!==t.bLvl){const l=e.bName===t.bName?t.bName:`${e.bName}\u2192${t.bName}`;s.push(`B ${l} Lv.${e.bLvl}\u2192${t.bLvl}`)}return s.join(" \xb7 ")};(0,l.useEffect)(()=>{const e=ve(n,i);y(t=>{const s=e.includes(t.aName)?t.aName:e[0],l=e[1]||e[0],a=e.includes(t.bName)?t.bName:s===l?e.find(e=>e!==s)||s:l;return{aName:s,bName:a}})},[n,i]);const Ge=(0,l.useMemo)(()=>{const e=ke(T.state,T.attemptsLeft,0,n,T.costAddRate).map(e=>Le(e.slot,T.state));return Array.from(new Set(e))},[T.state,T.attemptsLeft,T.costAddRate,i,n]),De=(0,l.useMemo)(()=>{const e=["\uc758\uc9c0\ub825 \ud6a8\uc728 +1","\ud3ec\uc778\ud2b8 +1",`${T.state.aName} Lv. +1`,`${T.state.bName} Lv. +1`],t=[];let s=0;for(const r of e)if(Ge.includes(r)&&!t.includes(r))t.push(r);else{for(var l;s<Ge.length&&t.includes(Ge[s]);)s++;t.push(null!==(l=Ge[s])&&void 0!==l?l:r),s++}for(;t.length<4;){for(var a,n;s<Ge.length&&t.includes(Ge[s]);)s++;t.push(null!==(a=null!==(n=Ge[s++])&&void 0!==n?n:Ge[0])&&void 0!==a?a:"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")}return t.slice(0,4)},[Ge,T.state.aName,T.state.bName]),[He,We]=(0,l.useState)(De);(0,l.useEffect)(()=>{We(e=>{const t=e.map((e,t)=>{var s,l;return Ge.includes(e)?e:null!==(s=null!==(l=Ge[t])&&void 0!==l?l:Ge[0])&&void 0!==s?s:e}),s=new Set;for(let l=0;l<t.length;l++){if(!s.has(t[l])){s.add(t[l]);continue}const e=Ge.find(e=>!s.has(e));e&&(t[l]=e,s.add(e))}return t})},[Ge]);const[Ve,Ue]=(0,l.useState)(null),[Ye,qe]=(0,l.useState)(null),[Je,Ke]=(0,l.useState)(!1),Xe=(0,l.useRef)(0),Ze=(0,l.useRef)(null),Qe=(0,l.useRef)(null),[et,tt]=(0,l.useState)(null);(0,l.useLayoutEffect)(()=>{const e=()=>{Qe.current&&tt(Qe.current.offsetHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[T,He,Ye,Ve,O,S,k,E]);const st=.0025,lt=(0,l.useCallback)((e,t,s,l,a,n,r)=>{let i=0,o=0;for(const c of e){const e=Ee(c,a.state);if(!e)continue;if("A_CHANGE"===e.kind){if(!(ve(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.bName&&e!==a.state.aName).length>0))continue}if("B_CHANGE"===e.kind){if(!(ve(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.aName&&e!==a.state.bName).length>0))continue}const d=Ae(t,0,a.state,e,a.costAddRate,()=>K(r+q(c))()),x={attemptsLeft:a.attemptsLeft-1,rerolls:a.rerolls+d.rerollDelta,unlocked:!0,costAddRate:d.nextRate,gold:a.gold+d.goldThisAttempt,state:d.next};i+=Se(t,s,l,x.state,n,"RUN_TO_END",x.attemptsLeft,x.rerolls,x.costAddRate,x.unlocked,[],r+q(c),w,{maxTrials:Math.min(8e3,M),minTrials:Math.min(8e3,M),epsilon:.006,batch:500,estimator:"jeffreys",useAntithetic:U,autoScaleRare:!1}).successProb,o+=1}return o?i/o:0},[w,M]);function at(e,t,s,l){const a=K(e),n=[...ke(l.state,l.attemptsLeft,0,t,l.costAddRate)],r=[],i=e=>{const t=e.reduce((e,t)=>e+t.w,0);let s=a()*t;for(let l=0;l<e.length;l++)if(s-=e[l].w,s<=0)return l;return e.length-1},o=Math.min(4,n.length);for(let c=0;c<o;c++){const e=i(n);r.push(n[e].slot),n.splice(e,1)}return r}function nt(e,t){return e.map(e=>Le(e,t))}const rt=(0,l.useMemo)(()=>{if(!T.unlocked)return{shouldReroll:!1,reason:"\uccab \uac00\uacf5 \uc774\uc804\uc5d0\ub294 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \ucd94\ucc9c\uc744 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."};if(T.rerolls<=0)return{shouldReroll:!1,reason:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."};if(T.attemptsLeft<=0)return{shouldReroll:!1,reason:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud310\ub2e8\uc774 \ubb34\uc758\ubbf8\ud569\ub2c8\ub2e4."};const e="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":u,t=J({gemKey:n,pos:i,rarity:c,manual:T,tgt:N,manLabels:He,abForEval:e,salt:"REROLL_EV"}),s=lt(He,n,i,e,T,N,t+7);let l=0;for(let c=0;c<16;c++){const s=t+1e3+31*c,a={...T,rerolls:T.rerolls-1},r=nt(at(s,n,0,a),a.state);l+=lt(r,n,i,e,a,N,s+17)}const a=l/16,r=a-s,o=e=>(100*e).toFixed(2)+"%";return r>st?{shouldReroll:!0,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(s)} \u2192 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)} (\u25b2${o(r)}).`}:r<-st?{shouldReroll:!1,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(s)}\uac00 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)}\ubcf4\ub2e4 \uc720\ub9ac (\u25bc${o(-r)}).`}:{shouldReroll:!1,reason:`\ub450 \uacbd\ub85c \ucc28\uc774 \ubbf8\ubbf8: \ud604\uc7ac ${o(s)} vs \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${o(a)} (|\u0394| < ${.25.toFixed(2)}%).`}},[n,i,c,T,N,He,u,lt]);function it(){if(!O)return;if(!ht)return void s("\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815\uc740 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning");Ne();const e=ne*(-1===T.costAddRate?0:1===T.costAddRate?2:1),t={...T.state};F(t=>{const s={...t.state};return"A"===O.who?s.aName=B:s.bName=B,{attemptsLeft:t.attemptsLeft-1,rerolls:t.rerolls,unlocked:!0,costAddRate:t.costAddRate,gold:t.gold+e,state:s}});const l={...T.state,..."A"===O.who?{aName:B}:{bName:B}};Oe({type:"change",title:`\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815 (${O.who}) \u2192 ${B}`,detail:ze(t,l),meta:{cost:e}}),I(null),s("\uc120\ud0dd\ud55c \ud6a8\uacfc\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success")}function ot(){I(null),s("\ud6a8\uacfc \ubcc0\uacbd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","warning")}(0,l.useEffect)(()=>{if("BOTH"!==u||"\uc0c1\uad00 \uc5c6\uc74c"===i)return;const e=ve(n,i);y(t=>{const s=e.includes(t.aName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.aName?t.aName:e[0],l=e.find(e=>e!==s)||e[0],a=e.includes(t.bName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.bName&&t.bName!==s?t.bName:l;return{aName:s,bName:a}})},[u,n,i]),(0,l.useEffect)(()=>{if(!S||!P)return Ue(null),void qe(null);if(Te(He))return Ue(null),void qe(null);const e=He.map(e=>Ee(e,T.state)).filter(e=>!!e),t="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":u,s=J({gemKey:n,pos:i,rarity:c,manual:T,tgt:N,selectedFirstFour:e,calcMode:"\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":u}),l=++Xe.current;return Ke(!0),Ze.current&&clearTimeout(Ze.current),Ze.current=setTimeout(()=>{const a={maxTrials:M,minTrials:M,epsilon:ge(M),batch:be(M),estimator:"jeffreys",useAntithetic:U,autoScaleRare:Y,rareTargetSuccesses:100,rareTiers:[2e5]},r=Se(n,i,t,T.state,N,"STOP_ON_SUCCESS",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,s+101,w,a),o=Se(n,i,t,T.state,N,"RUN_TO_END",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,s+103,w,a);l===Xe.current&&(Ue(r),qe(o),Ke(!1))},0),()=>{Ze.current&&(clearTimeout(Ze.current),Ze.current=null)}},[n,i,c,P,T,N,S,He,u,w,M]),(0,l.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud5ec\ud37c"},[]);const ct="bg-white rounded-2xl shadow-sm p-4 lg:p-6",dt="block text-xs text-gray-500 mb-1",xt="text-base font-semibold whitespace-nowrap",mt="\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":u,ut=1===T.costAddRate?"+100%":-1===T.costAddRate?"-100%":"0%",ht=k&&E&&S,pt=Te(He),ft=(0,l.useMemo)(()=>P&&(Je||!(Ye&&Ve)),[P,Je,Ye,Ve]),gt=!ht||pt||!!O||T.attemptsLeft<=0,bt=!ht||!!O||T.attemptsLeft<=0||T.rerolls<=0,vt=(0,l.useRef)(!1);(0,l.useEffect)(()=>{ht||(Ce([]),ue({past:[],future:[]}))},[ht]),(0,l.useEffect)(()=>{pt?vt.current||(s("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694."),vt.current=!0):vt.current=!1},[pt,s]);const Nt=(0,l.useMemo)(()=>{const e=ve(n,i);return"\uc0c1\uad00 \uc5c6\uc74c"===i?e:"ANY_ONE"===u?["\uc0c1\uad00\uc5c6\uc74c",...e]:e},[n,i,u]);return(0,C.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,C.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n      "}),(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,C.jsx)("section",{className:"py-2 lg:py-3",children:(0,C.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,C.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud655\ub960 \uacc4\uc0b0\uae30"}),(0,C.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0 items-center",children:[(0,C.jsx)("span",{className:"hidden sm:inline text-white/90 text-sm",children:"\uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218"}),(0,C.jsx)("div",{className:"min-w-[170px]",children:(0,C.jsx)(Pe,{value:M,onChange:$,items:pe,placeholder:"\ubc18\ubcf5 \uc218 \uc120\ud0dd",bordered:!1})})]})]})}),(0,C.jsxs)("section",{className:`${ct} !mt-2`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\uae30\ubcf8 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:k?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>L(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>L(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(D.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r ",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] w-full lg:w-56 "+(k?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\uc82c \ud0c0\uc785"}),(0,C.jsx)(Pe,{className:"w-full",value:n,onChange:e=>r(e),items:Object.keys(ee).map(e=>({value:e,label:e})),placeholder:"\uc82c \ud0c0\uc785",disabled:k})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] w-full lg:w-40 "+(k?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ub4f1\uae09"}),(0,C.jsx)(Pe,{className:"w-full",value:c,onChange:e=>x(e),items:["\uace0\uae09","\ud76c\uadc0","\uc601\uc6c5"].map(e=>({value:e,label:e})),placeholder:"\ub4f1\uae09",disabled:k})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-auto",children:[(0,C.jsx)("label",{className:dt,children:"\uae30\ubcf8 \uc2dc\ub3c4/\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"}),(0,C.jsxs)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center text-sm",children:["\uac00\uacf5 \ud69f\uc218 ",(0,C.jsx)("b",{className:"mx-1",children:te[c]})," \xb7 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"," ",(0,C.jsx)("b",{className:"ml-1",children:se[c]}),"\ud68c"]})]})]})})]}),(0,C.jsxs)("section",{className:ct,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\ud604\uc7ac \uc635\uc158 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:E?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>A(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(D.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,C.jsx)($e,{value:b.eff,set:e=>v({...b,eff:re(e,le,ae)}),min:le,max:ae,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)($e,{value:b.pts,set:e=>v({...b,pts:re(e,le,ae)}),min:le,max:ae,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud6a8\uacfc A"}),(0,C.jsx)(_e,{value:b.aName,set:e=>v({...b,aName:e}),options:g,disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud6a8\uacfc A \ub808\ubca8"}),(0,C.jsx)($e,{value:b.aLvl,set:e=>v({...b,aLvl:re(e,le,ae)}),min:le,max:ae,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud6a8\uacfc B"}),(0,C.jsx)(_e,{value:b.bName,set:e=>v({...b,bName:e}),options:g.filter(e=>e!==b.aName),disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud6a8\uacfc B \ub808\ubca8"}),(0,C.jsx)($e,{value:b.bLvl,set:e=>v({...b,bLvl:re(e,le,ae)}),min:le,max:ae,disabled:E})]})]})})]}),(0,C.jsxs)("section",{className:ct,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\ubaa9\ud45c \uc635\uc158 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-3 flex-wrap",children:S?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uacc4\uc0b0 \ud65c\uc131)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>R(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>R(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(D.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"\ubaa9\ud45c \ucda9\uc871 \ubc29\uc2dd"}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",checked:"ANY_ONE"===u,onChange:()=>p("ANY_ONE"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"1\uac1c \uc774\uc0c1"]}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",checked:"BOTH"===u,onChange:()=>p("BOTH"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"2\uac1c"]})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative\r grid grid-cols-2 gap-2\r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3\r items-stretch lg:items-end\r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728 \u2265"}),(0,C.jsx)($e,{value:N.eff,set:e=>j({...N,eff:re(e,le,ae)}),min:le,max:ae,disabled:S})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8 \u2265"}),(0,C.jsx)($e,{value:N.pts,set:e=>j({...N,pts:re(e,le,ae)}),min:le,max:ae,disabled:S})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-[100px] "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ucd94\uac00 \ud6a8\uacfc"}),(0,C.jsx)(Pe,{className:"w-full lg:w-[100px]",value:i,onChange:e=>o(e),items:["\uc0c1\uad00 \uc5c6\uc74c","\uacf5\uaca9\ud615","\uc9c0\uc6d0\ud615"].map(e=>({value:e,label:e})),placeholder:"\ucd94\uac00 \ud6a8\uacfc",disabled:S})]}),(()=>{const e=S||"\uc0c1\uad00 \uc5c6\uc74c"===i,t=e||"BOTH"!==u,s=e?"opacity-50":"",l=t?"opacity-50":"";return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A"}),(0,C.jsx)(_e,{value:w.aName,set:e=>y(t=>({...t,aName:e})),options:"BOTH"===u?Nt.filter(e=>e!==w.bName):Nt,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i})]}),(0,C.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${s}`,children:[(0,C.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A \ub808\ubca8 \u2265"}),(0,C.jsx)($e,{value:N.aLvl,set:e=>j({...N,aLvl:re(e,le,ae)}),min:le,max:ae,disabled:e})]}),(0,C.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==u?"opacity-50":""),children:[(0,C.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B"}),(0,C.jsx)(_e,{value:w.bName,set:e=>y(t=>({...t,bName:e})),options:"BOTH"===u?Nt.filter(e=>e!==w.aName):Nt,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==u})]}),(0,C.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${l}`,children:[(0,C.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B \ub808\ubca8 \u2265"}),(0,C.jsx)($e,{value:N.bLvl,set:e=>j({...N,bLvl:re(e,le,ae)}),min:le,max:ae,disabled:t})]})]})})()]})})]}),(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,C.jsxs)("section",{ref:Qe,className:"lg:col-span-2 "+ct,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\uac00\uacf5 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,C.jsxs)("button",{onClick:function(){Ce([]),ue({past:[],future:[]}),F({attemptsLeft:te[c],rerolls:se[c],unlocked:!1,costAddRate:0,gold:0,state:{...b}})},className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(d.A,{size:16}),"\uc2dc\ubbac\ub808\uc774\uc158 \ucd08\uae30\ud654"]})})]}),(0,C.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["\ud56d\ubaa9 \uc801\uc6a9 / \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 ",(0,C.jsx)("b",{children:"\ubaa8\ub4e0 \uc124\uc815\uc744 \uc800\uc7a5(\uc7a0\uae08)"}),"\ud55c \ub4a4 \uc774\uc6a9\ud558\uc138\uc694."]}),(0,C.jsxs)("div",{className:"mt-3 gap-4",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\ud604\uc7ac \uc82c \uc0c1\ud0dc"}),(0,C.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,C.jsx)("div",{className:"text-lg font-semibold",children:T.state.eff})]}),(0,C.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"\uc9c8\uc11c\xb7\ud63c\ub3c8 \ud3ec\uc778\ud2b8"}),(0,C.jsx)("div",{className:"text-lg font-semibold",children:T.state.pts})]}),(0,C.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"A"===(null===O||void 0===O?void 0:O.who)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)(_e,{value:B,set:z,options:O.options})}),(0,C.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,C.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,C.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:T.state.aName}),(0,C.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.aLvl]})]})}),(0,C.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"B"===(null===O||void 0===O?void 0:O.who)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)(_e,{value:B,set:z,options:O.options})}),(0,C.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,C.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,C.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:T.state.bName}),(0,C.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.bLvl]})]})})]}),(0,C.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[T.attemptsLeft<=0?(0,C.jsx)("div",{className:"inline-flex items-center px-2.5 py-1.5 rounded-xl bg-violet-50 border border-violet-200 text-violet-900 text-[12px] lg:text-[13px]",children:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub0a8\uc740 \uac00\uacf5 \ud69f\uc218 ",(0,C.jsx)("b",{className:"ml-1",children:T.attemptsLeft})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",(0,C.jsx)("b",{className:"ml-1",children:T.rerolls})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\uac00\uacf5 \ube44\uc6a9 \ucd94\uac00 \ube44\uc728 ",(0,C.jsx)("b",{className:"ml-1",children:ut})]})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub204\uc801 \uace8\ub4dc ",(0,C.jsx)("b",{className:"ml-1",children:ce(T.gold)})," G"]})]})]}),(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white mt-4",children:[(0,C.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\uc774\ubc88\uc5d0 \ub4f1\uc7a5\ud55c 4\uac1c \ud56d\ubaa9"}),(0,C.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:He.map((e,t)=>(0,C.jsxs)("div",{className:"slot-card rounded-xl border p-2 transition-all",children:[(0,C.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["\uc2ac\ub86f ",t+1]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(_e,{value:e,set:e=>{const s=[...He];s[t]=e,We(s)},options:Ge}),(0,C.jsx)("button",{onClick:()=>function(e){if(!ht)return void s("\ud56d\ubaa9\uc744 \uc801\uc6a9\ud558\ub824\uba74 '\uae30\ubcf8 \uc124\uc815/\ud604\uc7ac \uc635\uc158/\ubaa9\ud45c \uc635\uc158'\uc744 \ubaa8\ub450 \uc800\uc7a5(\uc7a0\uae08)\ud558\uc138\uc694.","warning");if(Ne(),!S)return void s("\ubaa9\ud45c \uc635\uc158\uc744 \uba3c\uc800 \uc800\uc7a5\ud574 \uc8fc\uc138\uc694.");if(T.attemptsLeft<=0)return;if(Te(He))return void s("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694.");const t=He[e];if(!Ge.includes(t))return void s("\ubbf8\ub4f1\uc7a5 \uc870\uac74\uc73c\ub85c \ud604\uc7ac \uc120\ud0dd\uc740 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.");const l=Ee(t,T.state);if(!l)return void s("\uc120\ud0dd\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc5b4\uc694.");if("A_CHANGE"===l.kind||"B_CHANGE"===l.kind){const e=ve(n,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==T.state.aName&&e!==T.state.bName);return e.length<=0?void s("\ucd94\uac00 \ud6a8\uacfc \uc870\uac74/\uc911\ubcf5\uc73c\ub85c \ud6a8\uacfc \ubcc0\uacbd\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4."):(I({who:"A_CHANGE"===l.kind?"A":"B",options:e}),z(e[0]),void s("\ubcc0\uacbd\ud560 \ud6a8\uacfc\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc67c\ucabd \ud328\ub110\uc5d0\uc11c \uc801\uc6a9\uc744 \ub204\ub974\uba74 \uc774\ubc88 \ucc28\uc218\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.","info"))}if(T.attemptsLeft<=0)return void s("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub354 \uc774\uc0c1 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.","warning");const a={...T.state},r=Ae(n,0,T.state,l,T.costAddRate),i=T.attemptsLeft-1;F(e=>({attemptsLeft:i,rerolls:e.rerolls+r.rerollDelta,unlocked:!0,costAddRate:r.nextRate,gold:e.gold+r.goldThisAttempt,state:r.next})),Oe({type:"apply",title:`\uc2ac\ub86f ${e+1} \uc801\uc6a9: ${t}`,detail:ze(a,r.next),meta:{cost:r.goldThisAttempt,attemptsLeft:i,rerollDelta:r.rerollDelta}}),i>0&&s("\uc120\ud0dd\ud55c \ud6a8\uacfc\uac00 \ubc18\uc601\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c 4\uac1c\uc758 \uc120\ud0dd\uc9c0\ub97c \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694.","success")}(t),"aria-disabled":gt,className:`apply-btn transition-all justify-center min-w-[60px] h-10 px-3 rounded-xl border bg-white \n                          hover:border-[#a399f2] hover:text-white hover:bg-[#a399f2] inline-flex items-center\n                          ${gt?"opacity-50 cursor-not-allowed":""} \n                          ${pt?"opacity-50 cursor-not-allowed":""}`,children:"\uc801\uc6a9"})]})]},t))}),(0,C.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("button",{onClick:function(){ht?T.attemptsLeft<=0?s("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694."):T.unlocked?T.rerolls<=0?s("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud69f\uc218\uac00 \ubd80\uc871\ud574\uc694."):(Ne(),F(e=>({...e,rerolls:e.rerolls-1})),Oe({type:"reroll",title:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc0ac\uc6a9",detail:`\ub0a8\uc740 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${T.rerolls-1}\ud68c`})):s("\uac00\uacf5 1\ud68c \uc774\ud6c4\ubd80\ud130 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."):s("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning")},disabled:bt,className:`h-10 px-3 rounded-xl border ${bt?"opacity-50 cursor-not-allowed":"bg-white hover:bg-gray-50"} inline-flex items-center gap-2`,children:[(0,C.jsx)(H.A,{size:16}),"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",T.rerolls,"\ud68c"]}),(0,C.jsx)("span",{className:"text-xs text-gray-600",children:T.attemptsLeft<=0?"\uac00\uacf5 \uc644\ub8cc":T.unlocked?T.rerolls<=0?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc5c6\uc74c":rt.shouldReroll?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c":"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c":"\uccab \uac00\uacf5 \uc774\ud6c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),T.unlocked&&T.rerolls>0&&(0,C.jsx)("div",{className:"mt-2 text-xs text-gray-700",children:rt.reason})]})]})]}),(0,C.jsxs)("section",{className:`${ct} h-full flex flex-col`,style:et?{maxHeight:et}:void 0,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,C.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,C.jsx)("button",{onClick:Ie,disabled:!je,className:`ml-auto h-10 px-3 rounded-xl border ${je?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub418\ub3cc\ub9ac\uae30 (Ctrl/Cmd+Z)",children:(0,C.jsx)(W.A,{size:16})}),(0,C.jsx)("button",{onClick:Be,disabled:!we,className:`h-10 px-3 rounded-xl border ${we?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub2e4\uc2dc\ud558\uae30 (Ctrl/Cmd+Shift+Z)",children:(0,C.jsx)(V.A,{size:16})})]})]}),0===ye.length?(0,C.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,C.jsx)("div",{className:"mt-3 flex-1 min-h-0 space-y-2 overflow-auto",children:ye.map(e=>(0,C.jsxs)("div",{className:"rounded-xl border p-2 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:e.time})]}),e.detail&&(0,C.jsx)("div",{className:"mt-1 text-xs text-gray-700",children:e.detail}),e.meta&&(0,C.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5 text-[11px] text-gray-600",children:["cost"in e.meta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ube44\uc6a9 ",ce(e.meta.cost)," G"]}),"attemptsLeft"in e.meta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub0a8\uc740 \uac00\uacf5 ",e.meta.attemptsLeft,"\ud68c"]}),"rerollDelta"in e.meta&&0!==e.meta.rerollDelta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",e.meta.rerollDelta>0?`+${e.meta.rerollDelta}`:e.meta.rerollDelta]})]})]},e.id))})]})]}),(0,C.jsxs)("section",{className:ct,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:xt,children:"\uacb0\uacfc \ucd9c\ub825"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,C.jsxs)("span",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 text-[10px] lg:text-xs text-gray-600",children:["Monte Carlo ",ce(Math.max((null===Ye||void 0===Ye?void 0:Ye.trialsUsed)||0,(null===Ve||void 0===Ve?void 0:Ve.trialsUsed)||0)),"\ud68c",null!==Ye&&void 0!==Ye&&null!==(e=Ye.ci)&&void 0!==e&&e.halfWidth?` (\xb1${(100*Ye.ci.halfWidth).toFixed(2)}%p @95%)`:""]})})]}),ft?(0,C.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1.5",children:[...Array(4)].map((e,t)=>(0,C.jsx)("div",{className:"h-6 w-28 rounded-lg bg-gray-100 animate-pulse"},t))}),(0,C.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-2",children:[0,1].map(e=>(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-3 h-8 w-2/3 bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-2 h-2 w-full bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-4 h-4 w-40 bg-gray-100 rounded animate-pulse"})]},e))})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"mt-2 text-sm text-gray-700",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1.5",children:He.map((e,t)=>(0,C.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white text-[12px]",children:e},t))})]}),Ye&&Ve&&(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,C.jsxs)(m.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},className:"rounded-xl border p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ubaa9\ud45c \ub2ec\uc131 \ud655\ub960"}),(0,C.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-50 text-[11px] text-gray-600",children:"IGNORE_AB"===mt?"\ucd94\uac00 \ud6a8\uacfc \uc0c1\uad00 \uc5c6\uc74c":"ANY_ONE"===mt?"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 1\uac1c \uc774\uc0c1":"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 2\uac1c \uc804\ubd80"})]}),(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"text-xs text-gray-500",children:["\ub2ec\uc131 \uc989\uc2dc \uac00\uacf5 \uc644\ub8cc ( ",ce(Ve.successes),"\ud68c / ",ce(Ve.trialsUsed),"\ud68c )"]}),"                        "]}),(0,C.jsx)("div",{className:"mt-1 text-2xl font-bold",children:ie(Ve.successProb,Ve.ci)}),(0,C.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(m.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ve.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=de(Ve.expectedGold,Ve.successProb),t=me(Ve.successProb);return(0,C.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,C.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,C.jsx)("b",{children:Number.isFinite(e)?ce(Math.round(e)):"\u221e"})," G"]}),(0,C.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]}),(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,C.jsx)("div",{className:"flex items-center justify-between",children:(0,C.jsxs)("div",{className:"text-xs text-gray-500",children:["\uac00\uacf5 \ud69f\uc218 \uc804\ubd80 \uc18c\ubaa8 ( ",ce(Ye.successes),"\ud68c / ",ce(Ye.trialsUsed),"\ud68c )"]})}),(0,C.jsx)("div",{className:"mt-1 text-2xl font-bold",children:oe(Ye.successProb)}),(0,C.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(m.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ye.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=de(Ye.expectedGold,Ye.successProb),t=me(Ye.successProb);return(0,C.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,C.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,C.jsx)("b",{children:Number.isFinite(e)?ce(Math.round(e)):"\u221e"})," G"]}),(0,C.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]})]})]}),(0,C.jsxs)(m.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,delay:.05},className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ub4f1\uae09 \ud655\ub960"}),(()=>{if(!Ye)return null;const e=[{key:"legendProb",name:"\uc804\uc124 (4~15)",p:Number(Ye.legendProb||0),grad:Re.legend},{key:"relicProb",name:"\uc720\ubb3c (16~18)",p:Number(Ye.relicProb||0),grad:Re.relic},{key:"ancientProb",name:"\uace0\ub300 (19+)",p:Number(Ye.ancientProb||0),grad:Re.ancient}];return(0,C.jsx)("div",{className:"mt-3 space-y-3 text-sm",children:e.map(e=>(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{className:"text-gray-700",children:e.name}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[Z(e.p)&&(0,C.jsx)("span",{className:"px-2 py-0.5 rounded-lg border bg-emerald-50 border-emerald-200 text-emerald-800 text-[11px]",children:"\ud655\uc815"}),(0,C.jsx)("b",{children:oe(e.p)})]})]}),(0,C.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(m.P.div,{initial:{width:0},animate:{width:Z(e.p)?"100%":xe(e.p)},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r",style:{backgroundImage:e.grad}})})]},e.key))})})(),(()=>{const{order:e,comps:t}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e-4;if(!e)return{order:[],comps:[]};let s=[{key:"legendProb",label:"\uc804\uc124",p:Number(e.legendProb||0),grad:Re.legend},{key:"relicProb",label:"\uc720\ubb3c",p:Number(e.relicProb||0),grad:Re.relic},{key:"ancientProb",label:"\uace0\ub300",p:Number(e.ancientProb||0),grad:Re.ancient}];if(s=s.filter(e=>!X(e.p)),!s.length)return{order:[],comps:[]};s.sort((e,t)=>t.p-e.p);const l=[];for(let a=0;a<s.length-1;a++){const e=s[a].p-s[a+1].p;l.push(Math.abs(e)<=t?"=":">")}return{order:s,comps:l}}(Ye);return e.length?(0,C.jsxs)("div",{className:"mt-2 rounded-xl bg-white/70",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\uac00\ub2a5\uc131 \ub192\uc740 \uc21c\uc11c"}),(0,C.jsx)("div",{className:"flex flex-wrap items-center gap-1.5",children:e.map((s,a)=>(0,C.jsxs)(l.Fragment,{children:[(0,C.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white shadow-sm",children:[(0,C.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-gradient-to-r",style:{backgroundImage:s.grad}}),(0,C.jsxs)("span",{className:"text-sm",children:[s.label,Z(s.p)?" (\ud655\uc815)":""]})]}),a<e.length-1&&(0,C.jsx)("span",{className:"mx-0.5 text-gray-400 select-none",children:"="===t[a]?"\uff1d":"\uff1e"})]},s.key))})]}):null})()]})]})]})]})]}),(0,C.jsx)(Me,{toasts:t,onClose:a}),(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)(h.A,{})})]})}function Oe(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;const[t,s]=l.useState(!1);return l.useEffect(()=>{const t=()=>{const t=document.documentElement,l=t.scrollHeight-(t.scrollTop+window.innerHeight);s(l<=e)};return t(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t}(520);return(0,C.jsx)("div",{className:"fixed z-50 right-4 bottom-4 sm:right-6 sm:bottom-6 pr-[env(safe-area-inset-right)] pb-[env(safe-area-inset-bottom)]",children:(0,C.jsxs)("button",{type:"button","aria-label":"\ub9e8 \uc704\ub85c",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:["inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-3 shadow-lg backdrop-blur","text-gray-700 hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/40","transition transform duration-200",e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"].join(" "),children:[(0,C.jsx)(r.A,{size:18}),(0,C.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"TOP"})]})})}function Ie(){return(0,C.jsxs)(a.I9,{basename:"/core",children:[(0,C.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,C.jsx)("header",{className:"sticky top-0 z-40 border-b border-gray-200/60 bg-white/70 backdrop-blur",children:(0,C.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3",children:(0,C.jsx)("nav",{"aria-label":"Core pages",children:(0,C.jsxs)("ul",{className:"mx-auto flex w-full flex-wrap justify-center gap-1 rounded-xl",children:[(0,C.jsx)("li",{children:(0,C.jsx)(a.k2,{to:"/gem",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uac00\uacf5 \ud5ec\ud37c"})}),(0,C.jsx)("li",{children:(0,C.jsx)(a.k2,{to:"/optimizer",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uc7a5\ucc29 \ud5ec\ud37c"})})]})})})}),(0,C.jsx)("main",{children:(0,C.jsxs)(a.BV,{children:[(0,C.jsx)(a.qh,{path:"/gem",element:(0,C.jsx)(Fe,{})}),(0,C.jsx)(a.qh,{path:"/optimizer",element:(0,C.jsx)(z,{})}),(0,C.jsx)(a.qh,{path:"*",element:(0,C.jsx)(a.C5,{to:"/gem",replace:!0})})]})})]}),(0,C.jsx)(Oe,{})]})}}}]);
//# sourceMappingURL=433.0808a3c0.chunk.js.map