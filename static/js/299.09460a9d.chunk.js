"use strict";(self.webpackChunkpeon_calculator=self.webpackChunkpeon_calculator||[]).push([[299],{299:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Se});var s=l(43),a=l(981),n=l(950),i=l(711),r=l(382),o=l(360),d=l(855),c=l(805),m=l(546),x=l(446),u=l(289),h=l(346),f=l(579);const g={HERO:7,LEGEND:11,RELIC:15,ANCIENT:17},p={HERO:[10],LEGEND:[10,14],RELIC:[10,14,17,18,19,20],ANCIENT:[10,14,17,18,19,20]},b={HERO:"\uc601\uc6c5",LEGEND:"\uc804\uc124",RELIC:"\uc720\ubb3c",ANCIENT:"\uace0\ub300"},v=["HERO","LEGEND","RELIC","ANCIENT"],N={atk:"\uacf5\uaca9\ub825",add:"\ucd94\uac00 \ud53c\ud574",boss:"\ubcf4\uc2a4 \ud53c\ud574",brand:"\ub099\uc778\ub825",allyDmg:"\uc544\uad70 \ud53c\ud574 \uac15\ud654",allyAtk:"\uc544\uad70 \uacf5\uaca9 \uac15\ud654"},j=["atk","add","boss","brand","allyDmg","allyAtk"],w={dealer:new Set(["atk","add","boss"]),support:new Set(["brand","allyDmg","allyAtk"])},y={atk:1,add:1,boss:1,brand:1,allyDmg:1,allyAtk:1},L=[{value:"\ud574 \ucf54\uc5b4",label:"\ud574 \ucf54\uc5b4"},{value:"\ub2ec \ucf54\uc5b4",label:"\ub2ec \ucf54\uc5b4"},{value:"\ubcc4 \ucf54\uc5b4",label:"\ubcc4 \ucf54\uc5b4"}],k=["\ud574 \ucf54\uc5b4","\ub2ec \ucf54\uc5b4","\ubcc4 \ucf54\uc5b4"];const E=()=>Math.random().toString(36).slice(2,9);function A(e){const t={...y};return e?(Object.keys(t).forEach(l=>{const s=e[l],a="number"===typeof s?s:Number(s);t[l]=Number.isFinite(a)&&a>=0?a:y[l]}),t):t}function C(e,t,l){var s,a;const n="dealer"===t?w.dealer:w.support;return(n.has(e.o1k)?e.o1v*(null!==(s=l[e.o1k])&&void 0!==s?s:1):0)+(n.has(e.o2k)?e.o2v*(null!==(a=l[e.o2k])&&void 0!==a?a:1):0)}function*S(e,t){const l=e.length;if(t>l)return;const s=Array.from({length:t},(e,t)=>t);for(;;){yield s.map(t=>e[t]);let a=t-1;for(;a>=0&&s[a]===l-t+a;)a--;if(a<0)break;s[a]++;for(let e=a+1;e<t;e++)s[e]=s[e-1]+1}}function M(e,t){return p[e].filter(e=>t>=e)}function P(e,t,l,s){const a=e.reduce((e,t)=>{var l;return e+(null!==(l=t.will)&&void 0!==l?l:0)},0),n=e.reduce((e,t)=>{var l;return e+(null!==(l=t.point)&&void 0!==l?l:0)},0),i=M(t,n),r=e.reduce((e,t)=>e+C(t,l,s),0);return{totalWill:a,totalPoint:n,thr:i,roleSum:r,score:1e7*i.length+1e4*n+10*(5e3-a)+r-e.length}}function R(e,t,l,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:80;const n=A(s),i=e=>p[e],r=e=>Math.min(...i(e)),o=(e,t)=>{const l=i(e);for(let s=0;s<l.length;s++)if(l[s]>(null!==t&&void 0!==t?t:-1/0))return l[s];return null},d=(e,t)=>{const l=e.filter(e=>(e.thr.length?Math.max(...e.thr):0)>=t);return 0===l.length?null:(l.sort((e,t)=>e.totalPoint!==t.totalPoint?e.totalPoint-t.totalPoint:e.totalWill!==t.totalWill?e.totalWill-t.totalWill:e.roleSum!==t.roleSum?t.roleSum-e.roleSum:t.score-e.score),l[0])},c=e=>e.sort((e,t)=>t.score-e.score)[0]||null,m={list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0},x=(e,t)=>function(e,t,l,s,a,n){const i=g[t],r=A(s),o=Math.min(...p[t]),d=null!==a&&void 0!==a?a:o,c=n||null==a,m=[],x=Math.min(4,e.length);for(let h=0;h<=x;h++)if(0!==h)for(const s of S(e,h)){const e=s.reduce((e,t)=>e+(t.will||0),0);if(e>i)continue;const{totalPoint:a,thr:n,roleSum:o,score:d}=P(s,t,l,r);m.push({list:s,totalWill:e,totalPoint:a,thr:n,roleSum:o,score:d})}else m.push({list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0});let u;return m.sort((e,t)=>t.score-e.score),u=c?m.filter(e=>{const t=Math.max(0,...e.thr);return e.list.length>0&&t>=(null!==d&&void 0!==d?d:0)}):m.filter(e=>e.list.length>0&&e.thr.length>0),0===u.length?[{list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0}]:u.slice(0,200)}(t,e.grade,l,n,e.minThreshold,e.enforceMin).filter(e=>e.list.length>0).sort((e,t)=>t.score-e.score).slice(0,a),u=(e,t)=>{if(!t||!t.list)return e;const l=new Set(t.list.map(e=>e.id));return e.filter(e=>!l.has(e.id))},h=e.map((e,t)=>e.enforceMin?t:-1).filter(e=>-1!==e),f=e.map((e,t)=>e.enforceMin?-1:t).filter(e=>-1!==e),b=Math.max(1,h.length);let v={picks:e.map(e=>m),remaining:t.slice(),satisfiedCount:-1,scoreSum:-1/0};for(let g=0;g<b;g++){const l=g%Math.max(1,h.length),s=h.length?h.slice(l).concat(h.slice(0,l)).concat(f):f.slice();let a=t.slice();const n=Array.from({length:e.length},()=>m);for(const t of s){const l=e[t],s=x(l,a);let i=null;if(l.enforceMin){var N;i=d(s,null!==(N=l.minThreshold)&&void 0!==N?N:r(l.grade))}else i=c(s);n[t]=i||m,a=u(a,n[t])}let i=0,o=0;h.forEach(t=>{var l;const s=e[t],a=null!==(l=s.minThreshold)&&void 0!==l?l:r(s.grade),d=n[t].thr.length?Math.max(...n[t].thr):0;d>=a&&i++,o+=1e6*(d>=a?d-a+1:0)+n[t].roleSum}),(i>v.satisfiedCount||i===v.satisfiedCount&&o>v.scoreSum)&&(v={picks:n,remaining:a,satisfiedCount:i,scoreSum:o})}let j=v.picks,w=v.remaining;if(!h.every(t=>{var l;const s=e[t],a=null!==(l=s.minThreshold)&&void 0!==l?l:r(s.grade);return(j[t].thr.length?Math.max(...j[t].thr):0)>=a}))return{picks:j};let y=!0;for(;y;){y=!1;for(let t=0;t<e.length;t++){const l=e[t],s=j[t].thr.length?Math.max(...j[t].thr):0,a=o(l.grade,s);if(null==a)continue;const n=w,i=new Set(n.map(e=>e.id)),r=j[t].list,c=n.concat(r.filter(e=>!i.has(e.id))),m=d(x(l,c),a);if(m){j[t]=m;const e=new Set(m.list.map(e=>e.id));w=c.filter(t=>!e.has(t.id)),y=!0}}}return{picks:j}}const $="undefined"!==typeof document?document.body:null;function _(e){let{draggableId:t,index:l,children:s}=e;return(0,f.jsx)(u.sx,{draggableId:t,index:l,children:(e,t)=>{const l="function"===typeof s?s(e,t):s;return t.isDragging&&$?(0,n.createPortal)(l,$):l}})}function T(e){let{value:t,items:l,onChange:a,placeholder:o,className:d}=e;const[c,u]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=(0,s.useRef)(null),p=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>u(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=s.useMemo(()=>Array.isArray(e)?e:[e],[e]),a=s.useRef(t);s.useEffect(()=>{a.current=t},[t]),s.useEffect(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([h,g],()=>u(!1)),(0,s.useLayoutEffect)(()=>{if(!c||!h.current)return;const e=h.current.getBoundingClientRect();p.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(p.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[c]);const v=l.find(e=>e.value===t),N=c?(0,f.jsx)(m.N,{children:(0,f.jsx)(x.P.ul,{ref:g,initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},style:{position:"fixed",top:p.current.top,left:p.current.left,width:p.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),u(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"opacity-40 cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:h,className:`relative min-w-0 ${d||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>u(e=>!e),className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50",children:[(0,f.jsx)("span",{className:"truncate text-sm",children:v?v.label:o||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:c?(0,f.jsx)(i.A,{size:16}):(0,f.jsx)(r.A,{size:16})})]}),c&&(0,n.createPortal)(N,document.body)]})}function O(e){let{toasts:t,onClose:l}=e;return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>(0,f.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:"pointer-events-auto overflow-hidden rounded-2xl border shadow-lg bg-amber-50/95 border-amber-200 text-amber-900 backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw]",children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:"text-sm font-medium text-amber-900/80 hover:text-amber-900 self-center",onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id))})})}function F(e){let{value:t,onChange:l,min:a,max:n,step:i=1,allowFloat:r=!1,zeroOnBlur:o=!0,className:d="",inputProps:c={}}=e;const m=e=>null===e||void 0===e?"":String(e),[x,u]=s.useState(m(t));s.useEffect(()=>{u(m(t))},[t]);const h=e=>{if(""===e)return o?null!==a&&void 0!==a?a:0:null;let t=Number(e);return Number.isFinite(t)?(t=r?t:Math.trunc(t),(e=>{let t=e;return null!=a&&t<a&&(t=a),null!=n&&t>n&&(t=n),t})(t)):o?null!==a&&void 0!==a?a:0:null};return(0,f.jsx)("input",{type:"number",inputMode:r?"decimal":"numeric",step:i,min:a,max:n,value:x,onChange:e=>{const t=e.target.value;if(""===t)return u(""),void(null===l||void 0===l||l(null));u(t);const s=Number(t);Number.isFinite(s)?null===l||void 0===l||l(r?s:Math.trunc(s)):null===l||void 0===l||l(null)},onBlur:()=>{const e=h(x);u(null==e?"":String(e)),null===l||void 0===l||l(e)},onWheel:e=>e.currentTarget.blur(),className:d,...c})}function I(){(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ud5ec\ud37c"},[]);const[e,t]=(0,s.useState)("dealer"),[l,a]=(0,s.useState)({...y}),[n,m]=(0,s.useState)(null),[x,w]=(0,s.useState)(null),[S,$]=(0,s.useState)([]),[I,z]=(0,s.useState)([]),{toasts:B,push:G,remove:H}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:e=>{const l=E();t(t=>[...t,{id:l,msg:e}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==l)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),{picks:D}=(0,s.useMemo)(()=>R(S,I,e,l,80),[S,I,e,l]),W=(e,t)=>z(l=>l.map(l=>l.id===e?{...l,...t}:l)),V=(e,t)=>$(l=>{if("name"in t){if(l.some(l=>l.id!==e&&l.name===t.name))return G(`${t.name}\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucf54\uc5b4\uc785\ub2c8\ub2e4`),l}return l.map(l=>l.id===e?{...l,...t}:l)}),[U,Y]=(0,s.useState)(!1),q="h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white",K="text-base font-semibold whitespace-nowrap",J="bg-white rounded-2xl shadow-sm",X="px-2.5 py-1.5 rounded-xl bg-gray-100 text-xs lg:text-[13px]",Z="block text-xs text-gray-500 mb-1",Q=e=>e+1,ee=(e,t)=>t-e;return(0,s.useEffect)(()=>{!function(){try{var e;const t=A({atk:2,add:"3",boss:-1});console.assert(2===t.atk&&3===t.add&&1===t.boss,"sanitizeWeights failed");const l={id:"t1",will:1,point:1,o1k:"atk",o1v:2,o2k:"brand",o2v:3};console.assert(C(l,"dealer",t)===2*t.atk,"scoreGemForRole dealer failed"),console.assert(C(l,"support",t)===3*(null!==(e=t.brand)&&void 0!==e?e:1),"scoreGemForRole support failed"),console.assert(M("RELIC",20).includes(20)&&0===M("RELIC",9).length,"thresholdsHit failed");const s=P([l],"RELIC","dealer",t),a=P([l,{...l,id:"t2",will:0,point:10}],"RELIC","dealer",t);console.assert(a.score>=s.score,"scoreCombo monotonicity failed"),console.log("\u2705 Self-tests passed")}catch(t){console.warn("\u274c Self-tests encountered an error",t)}}()},[]),(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .btn-primary{ background: #000000; color:#fff; border:none; }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n        .ring-primary:focus{ outline:none; box-shadow:0 0 0 2px rgba(163,153,242,.35); }\n      "}),(0,f.jsx)("style",{children:"button{cursor:pointer}"}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ub3c4\uc6b0\ubbf8"}),(0,f.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:[(0,f.jsx)("button",{onClick:()=>t("dealer"),className:"min-w-[80px] h-10 inline-flex items-center justify-center gap-1 px-3 rounded-xl w-full lg:w-auto "+("dealer"===e?"bg-white":"bg-white opacity-50"),children:"\ub51c\ub7ec"}),(0,f.jsx)("button",{onClick:()=>t("support"),className:"min-w-[80px] h-10 inline-flex items-center justify-center gap-1 px-3 rounded-xl w-full lg:w-auto "+("support"===e?"bg-white":"bg-white opacity-50"),children:"\uc11c\ud3ec\ud130"})]})]})}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 !mt-2 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsx)("h2",{className:K,children:"\ucf54\uc5b4 \uc785\ub825"}),(0,f.jsx)("div",{className:"flex items-center gap-2 ml-auto whitespace-nowrap",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90 ring-primary",onClick:()=>$(e=>{if(e.length>=3)return G("\ucf54\uc5b4\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc5b4\uc694."),e;const t=function(e){for(const t of k)if(!e.has(t))return t;return null}(new Set(e.map(e=>e.name)));if(!t)return G("\ud574/\ub2ec/\ubcc4 \ucf54\uc5b4\uac00 \ubaa8\ub450 \ucd94\uac00\ub418\uc5b4 \uc788\uc5b4\uc694."),e;const l=E();return m(l),[{id:l,name:t,grade:"RELIC",minThreshold:void 0,enforceMin:!1},...e]}),"aria-label":"\ucf54\uc5b4 \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \ucf54\uc5b4 \ucd94\uac00"})]})})]}),(0,f.jsxs)("p",{className:"hidden lg:block text-xs text-gray-600",children:["\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("p",{className:"block lg:hidden text-xs text-gray-600",children:["\ud654\uc0b4\ud45c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)(u.JY,{onDragStart:()=>{requestAnimationFrame(()=>Y(!0));const e=new Event("close-all-dropdowns");window.dispatchEvent(e)},onDragEnd:e=>{requestAnimationFrame(()=>Y(!1)),e.destination&&$(t=>{const l=Array.from(t),[s]=l.splice(e.source.index,1);return l.splice(e.destination.index,0,s),l})},children:(0,f.jsx)(u.gL,{droppableId:"cores-droppable",ignoreContainerClipping:!0,children:e=>(0,f.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"flex flex-col gap-3",children:[S.map((e,t)=>{const l=g[e.grade],s=[{value:"",label:"(\uc120\ud0dd \uc548 \ud568)"}].concat(p[e.grade].map(e=>({value:String(e),label:`${e}P \uc774\uc0c1`}))),a=new Set(S.filter(t=>t.id!==e.id).map(e=>e.name)),o=L.map(e=>({...e,disabled:a.has(e.value)})),c=Math.min(...p[e.grade]);return(0,f.jsx)(_,{draggableId:e.id,index:t,children:a=>{var x;return(0,f.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-end border rounded-xl p-3 bg-white overflow-visible "+(e.id===n?"LoA-highlight":""),style:a.draggableProps.style,children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl self-start lg:self-center",children:["#",Q(t)]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[120px] w-full lg:w-40",children:[(0,f.jsx)("label",{className:Z,children:"\ucf54\uc5b4 \uc885\ub958"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:e.name,onChange:t=>V(e.id,{name:t}),items:o,placeholder:"\ucf54\uc5b4\uba85"})]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[160px] w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\ucf54\uc5b4 \ub4f1\uae09"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:e.grade,onChange:t=>V(e.id,{grade:t}),items:v.map(e=>({value:e,label:b[e]})),placeholder:"\ucf54\uc5b4 \ub4f1\uae09"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\uacf5\uae09 \uc758\uc9c0\ub825"}),(0,f.jsx)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center",children:(0,f.jsx)("span",{className:"text-primary font-semibold",children:l})})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\ubaa9\ud45c \uad6c\uac04"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:String(null!==(x=e.minThreshold)&&void 0!==x?x:""),onChange:t=>{V(e.id,t?{minThreshold:Number(t),enforceMin:!0}:{minThreshold:void 0,enforceMin:!1})},items:s,placeholder:"\uad6c\uac04"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("input",{id:`enf-${e.id}`,type:"checkbox",className:"accent-primary",checked:e.enforceMin,onChange:t=>V(e.id,{enforceMin:t.target.checked})}),(0,f.jsx)("label",{htmlFor:`enf-${e.id}`,className:"text-sm",children:"\ubaa9\ud45c \uad6c\uac04 \uac15\uc81c"})]}),(0,f.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uc120\ud0dd \uc548 \ud568\uc774\uba74 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,f.jsx)("br",{className:"hidden lg:block"}),"\ucd5c\uc18c \uad6c\uac04 ",(0,f.jsxs)("b",{className:"text-primary",children:[c,"P"]}),"\uc744 \uae30\ubcf8 \ubaa9\ud45c\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4."]})]}),(0,f.jsxs)("div",{className:"lg:ml-auto lg:static absolute top-2 right-2 flex items-center gap-1",children:[(0,f.jsx)("div",{className:"hidden lg:hidden"}),(0,f.jsxs)("div",{className:"flex lg:hidden flex-row gap-1 mr-1",children:[(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,$(t=>{if(e<=0)return t;const l=[...t];return[l[e-1],l[e]]=[l[e],l[e-1]],l});var e},"aria-label":"\uc704\ub85c",children:(0,f.jsx)(i.A,{size:16})}),(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,$(t=>{if(e>=t.length-1)return t;const l=[...t];return[l[e+1],l[e]]=[l[e],l[e+1]],l});var e},"aria-label":"\uc544\ub798\ub85c",children:(0,f.jsx)(r.A,{size:16})})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,$(e=>e.length<=0?e:e.filter(e=>e.id!==t)),void(n===t&&m(null));var t},disabled:S.length<=0,"aria-label":"\ucf54\uc5b4 \uc0ad\uc81c",children:[(0,f.jsx)(d.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})]})]})}},e.id)}),e.placeholder]})})}),0===S.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\ucf54\uc5b4\ub97c \ucd94\uac00\ud558\uc138\uc694. (\ucd5c\ub300 3\uac1c\uc758 \ucf54\uc5b4\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)"})]})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 mb-3",children:[(0,f.jsx)("h2",{className:K,children:"\uc82c \uc785\ub825"}),(0,f.jsxs)("div",{className:"flex gap-2 ml-auto whitespace-nowrap",children:[(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>{const e=E();z(t=>[{id:e,will:null,point:null,o1k:"atk",o1v:0,o2k:"add",o2v:0},...t]),w(e)},"aria-label":"\uc82c \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc82c \ucd94\uac00"})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>z([]),"aria-label":"\uc804\uccb4 \uc0ad\uc81c",children:[(0,f.jsx)(d.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc804\uccb4 \uc0ad\uc81c"})]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col gap-3",children:[I.map((e,t)=>(0,f.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white "+(e.id===x?"LoA-highlight":""),children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",children:["#",ee(t,I.length)]}),(0,f.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,f.jsx)(F,{value:e.will,onChange:t=>W(e.id,{will:t}),min:0,max:9,step:1,allowFloat:!1,className:`${q} w-full lg:w-24`,inputProps:{title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825"}})]}),(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,f.jsx)(F,{value:e.point,onChange:t=>W(e.id,{point:t}),min:0,max:9,step:1,allowFloat:!1,className:`${q} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:Z,children:"\uc635\uc158 1"}),(0,f.jsx)(T,{className:"w-full lg:w-44",value:e.o1k,onChange:t=>W(e.id,{o1k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\uc218\uce58"}),(0,f.jsx)(F,{value:e.o1v,onChange:t=>W(e.id,{o1v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:Z,children:"\uc635\uc158 2"}),(0,f.jsx)(T,{className:"w-full lg:w-44",value:e.o2k,onChange:t=>W(e.id,{o2k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\uc218\uce58"}),(0,f.jsx)(F,{value:e.o2v,onChange:t=>W(e.id,{o2v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsx)("div",{className:"lg:static absolute top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,z(e=>e.filter(e=>e.id!==t)),void(x===t&&w(null));var t},"aria-label":"\uc82c \uc0ad\uc81c",children:[(0,f.jsx)(d.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})})]},e.id)),0===I.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\uc82c\uc744 \ucd94\uac00\ud558\uc138\uc694."})]})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsx)("h2",{className:K,children:"\uc720\ud6a8\uc635\uc158 \uac00\uc911\uce58"}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>a({...y}),"aria-label":"\uac00\uc911\uce58 \ucd08\uae30\ud654",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uac00\uc911\uce58 \ucd08\uae30\ud654"})]})]}),(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("div",{className:"grid grid-cols-2 gap-2 lg:flex lg:flex-nowrap text-sm min-w-0",children:j.map(e=>(0,f.jsxs)("div",{className:"bg-gray-50 border rounded-xl px-2 py-2 w-full lg:w-1/6 min-w-[120px]",children:[(0,f.jsx)("label",{className:Z,children:N[e]}),(0,f.jsx)(F,{value:l[e],onChange:t=>a(l=>({...l,[e]:t})),min:0,max:5,step:1e-4,allowFloat:!0,className:"h-10 w-full px-2 rounded-md border bg-white focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50"})]},e))})})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsx)("h2",{className:K,children:"\uacb0\uacfc"}),(0,f.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["\ucf54\uc5b4 1\uac1c\ub2f9 \ucd5c\ub300 ",(0,f.jsx)("b",{children:"\uc82c 4\uac1c"}),"\uae4c\uc9c0 \uc7a5\ucc29\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,f.jsx)("div",{className:"space-y-4 mt-2",children:S.map((t,s)=>{const a=g[t.grade],n=null===D||void 0===D?void 0:D[s],i=!!(n&&n.list&&n.list.length>0),r=Math.min(...p[t.grade]);return(0,f.jsxs)("div",{className:"border rounded-xl p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,f.jsxs)("div",{className:"text-base font-semibold",children:[t.name," ",(0,f.jsxs)("span",{className:"text-sm text-gray-500",children:["(",b[t.grade],")"]})]}),i&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:X,children:["\ucd1d \uc758\uc9c0\ub825 ",(0,f.jsx)("span",{className:"font-semibold",children:String(n.totalWill)})," / \uacf5\uae09 ",(0,f.jsx)("span",{children:String(a)})," (",(0,f.jsxs)("span",{children:["\ub098\uba38\uc9c0 ",String(a-n.totalWill)]}),")"]}),(0,f.jsxs)("div",{className:X,children:["\ucd1d \ud3ec\uc778\ud2b8 ",(0,f.jsx)("span",{className:"font-semibold",children:String(n.totalPoint)})]}),(()=>{const e=n.thr.length?Math.max(...n.thr):null;return(0,f.jsxs)("div",{className:X,children:["\ub2ec\uc131 \uad6c\uac04 ",(0,f.jsx)("span",{className:"font-semibold",children:null!=e?String(e):"\uc5c6\uc74c"})]})})(),(0,f.jsxs)("div",{className:X,children:["\uc720\ud6a8 \uc635\uc158 \ud569(",(0,f.jsx)("span",{className:"font-semibold",children:"dealer"===e?"\ub51c\ub7ec":"\uc11c\ud3ff"}),") ",(0,f.jsx)("span",{className:"font-semibold text-primary",children:String(n.roleSum.toFixed(4))})]})]})]}),i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"hidden lg:block overflow-x-auto mt-2",children:(0,f.jsxs)("table",{className:"min-w-full text-sm",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc120\ud0dd"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1581"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1582"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc720\ud6a8\ud569"})]})}),(0,f.jsx)("tbody",{children:n.list.map(t=>{var s,a;const n=I.findIndex(e=>e.id===t.id),i=ee(n,I.length);return(0,f.jsxs)("tr",{className:"border-t",children:[(0,f.jsxs)("td",{className:"px-2 py-2",children:["#",String(i)]}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(s=t.will)&&void 0!==s?s:0)}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(a=t.point)&&void 0!==a?a:0)}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[t.o1k]," ",String(t.o1v)]}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[t.o2k]," ",String(t.o2v)]}),(0,f.jsx)("td",{className:"px-2 py-2 text-primary",children:String(C(t,e,A(l)).toFixed(4))})]},t.id)})})]})}),(0,f.jsx)("div",{className:"lg:hidden mt-2 space-y-2",children:n.list.map(t=>{const s=I.findIndex(e=>e.id===t.id),a=ee(s,I.length);return(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsxs)("div",{className:"font-medium",children:["#",String(a)]}),(0,f.jsxs)("div",{className:"text-xs text-primary",children:["\uc720\ud6a8\ud569 ",String(C(t,e,A(l)).toFixed(2))]})]}),(0,f.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-sm",children:[(0,f.jsx)("div",{className:"text-gray-500",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("div",{children:String(t.will)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-primary",children:String(t.point)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1581"}),(0,f.jsxs)("div",{children:[N[t.o1k]," ",String(t.o1v)]}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1582"}),(0,f.jsxs)("div",{children:[N[t.o2k]," ",String(t.o2v)]})]})]},t.id)})})]}):(0,f.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:["\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. (\uc774 \ucf54\uc5b4\uc5d0 \ubc30\uc815 \uac00\ub2a5\ud55c \uc870\ud569\uc774 \uc5c6\uac70\ub098, \ubaa9\ud45c \uad6c\uac04\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.",null==t.minThreshold?` / \ucd5c\uc18c ${r}P \uc790\ub3d9 \uc801\uc6a9\uc911`:"",")"]})]},t.id)})})]})]}),(0,f.jsx)(O,{toasts:B,onClose:H}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}var z=l(596),B=l(693),G=l(899),H=l(829),D=l(655);function W(e){let t=2166136261;for(let l=0;l<e.length;l++)t^=e.charCodeAt(l),t=Math.imul(t,16777619);return t>>>0}function V(e){return W(JSON.stringify(e))||1}function U(e){let t=e>>>0;return function(){return t^=t<<13,t>>>=0,t^=t>>>17,t>>>=0,t^=t<<5,t>>>=0,(t>>>0)/4294967296}}const Y={LEGEND_MIN:4,LEGEND_MAX:15,RELIC_MIN:16,RELIC_MAX:18,ANCIENT_MIN:19},q={"\uc9c8\uc11c-\uc548\uc815":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\uc9c8\uc11c-\uacac\uace0":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\uc9c8\uc11c-\ubd88\ubcc0":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\uce68\uc2dd":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\ud63c\ub3c8-\uc65c\uace1":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\ubd95\uad34":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]}},K={"\uace0\uae09":5,"\ud76c\uadc0":7,"\uc601\uc6c5":9},J={"\uace0\uae09":0,"\ud76c\uadc0":1,"\uc601\uc6c5":2},X=1,Z=5,Q=900,ee=(e,t,l)=>Math.max(t,Math.min(l,e));function te(e){const t=Number(e);return Number.isFinite(t)?(100*t).toFixed(5)+"%":"0.00000%"}const le=e=>te(e),se=e=>e.toLocaleString();function ae(e,t){if(t<=0)return 0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mle"){case"laplace":return(e+1)/(t+2);case"jeffreys":return(e+.5)/(t+1);default:return e/t}}const ne=!0,ie=[{value:1e3,label:"1,000\ud68c (\ube60\ub984)"},{value:5e3,label:"5,000\ud68c (\ubcf4\ud1b5)"},{value:1e4,label:"10,000\ud68c (\ucd94\ucc9c)"},{value:5e4,label:"50,000\ud68c (\uc815\ubc00)"}];function re(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96;const s=1+l*l/t,a=(e+l*l/(2*t))/s,n=l/s*Math.sqrt(e*(1-e)/t+l*l/(4*t*t));return{low:Math.max(0,a-n),high:Math.min(1,a+n)}}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return 1-Math.pow(t,1/e)}const de=e=>e>=5e4?.002:e>=1e4?.0035:e>=5e3?.005:.007,ce=e=>e>=5e4?1e3:e>=1e4?800:e>=5e3?600:400;function me(e,t){const l=q[e];return l?"\uacf5\uaca9\ud615"===t?l.attack:"\uc9c0\uc6d0\ud615"===t?l.support:[...l.attack,...l.support]:[]}const xe=e=>e.eff+e.pts+e.aLvl+e.bLvl;function ue(e){return e>=Y.ANCIENT_MIN?"\uace0\ub300":e>=Y.RELIC_MIN&&e<=Y.RELIC_MAX?"\uc720\ubb3c":e>=Y.LEGEND_MIN&&e<=Y.LEGEND_MAX?"\uc804\uc124":"\ub4f1\uae09 \ubbf8\ub9cc"}function he(e,t,l,s,a,n){const i=l.eff>=s.eff&&l.pts>=s.pts;if("\uc0c1\uad00 \uc5c6\uc74c"===e)return i;const r=me(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,d=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":r.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,c=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":r.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?r.includes(e)&&t>=s:e===l&&t>=s;if("ANY_ONE"===t){const e=d&&(m(l.aName,l.aLvl,d,s.aLvl)||m(l.bName,l.bLvl,d,s.aLvl));return i&&!!e}return!(!d||!c)&&(i&&(m(l.aName,l.aLvl,d,s.aLvl)&&m(l.bName,l.bLvl,c,s.bLvl)||m(l.aName,l.aLvl,c,s.bLvl)&&m(l.bName,l.bLvl,d,s.aLvl)))}function fe(e){return 1!==e}function ge(e,t,l,s,a){const n=e,i=[];n.eff<5&&i.push({slot:{kind:"EFF",delta:1},w:11.65}),n.eff<=3&&i.push({slot:{kind:"EFF",delta:2},w:4.4}),n.eff<=2&&i.push({slot:{kind:"EFF",delta:3},w:1.75}),n.eff<=1&&i.push({slot:{kind:"EFF",delta:4},w:.45}),fe(n.eff)&&i.push({slot:{kind:"EFF",delta:-1},w:3}),n.pts<5&&i.push({slot:{kind:"PTS",delta:1},w:11.65}),n.pts<=3&&i.push({slot:{kind:"PTS",delta:2},w:4.4}),n.pts<=2&&i.push({slot:{kind:"PTS",delta:3},w:1.75}),n.pts<=1&&i.push({slot:{kind:"PTS",delta:4},w:.45}),fe(n.pts)&&i.push({slot:{kind:"PTS",delta:-1},w:3}),n.aLvl<5&&i.push({slot:{kind:"A_LVL",delta:1},w:11.65}),n.aLvl<=3&&i.push({slot:{kind:"A_LVL",delta:2},w:4.4}),n.aLvl<=2&&i.push({slot:{kind:"A_LVL",delta:3},w:1.75}),n.aLvl<=1&&i.push({slot:{kind:"A_LVL",delta:4},w:.45}),fe(n.aLvl)&&i.push({slot:{kind:"A_LVL",delta:-1},w:3}),n.bLvl<5&&i.push({slot:{kind:"B_LVL",delta:1},w:11.65}),n.bLvl<=3&&i.push({slot:{kind:"B_LVL",delta:2},w:4.4}),n.bLvl<=2&&i.push({slot:{kind:"B_LVL",delta:3},w:1.75}),n.bLvl<=1&&i.push({slot:{kind:"B_LVL",delta:4},w:.45}),fe(n.bLvl)&&i.push({slot:{kind:"B_LVL",delta:-1},w:3});const r=me(s,"\uc0c1\uad00 \uc5c6\uc74c"),o=r.filter(e=>e!==n.bName&&e!==n.aName).length>0,d=r.filter(e=>e!==n.aName&&e!==n.bName).length>0;return o&&i.push({slot:{kind:"A_CHANGE"},w:3.25}),d&&i.push({slot:{kind:"B_CHANGE"},w:3.25}),t>1&&(1!==a&&i.push({slot:{kind:"COST",mod:1},w:1.75}),-1!==a&&i.push({slot:{kind:"COST",mod:-1},w:1.75}),i.push({slot:{kind:"REROLL_PLUS",amount:1},w:2.5}),i.push({slot:{kind:"REROLL_PLUS",amount:2},w:.75})),i.push({slot:{kind:"HOLD"},w:1.75}),i}function pe(e,t){switch(e.kind){case"EFF":return"\uc758\uc9c0\ub825 \ud6a8\uc728 "+(e.delta>0?"+"+e.delta:"-1");case"PTS":return"\ud3ec\uc778\ud2b8 "+(e.delta>0?"+"+e.delta:"-1");case"A_LVL":return`${t.aName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"B_LVL":return`${t.bName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"A_CHANGE":return`${t.aName} \ud6a8\uacfc \ubcc0\uacbd`;case"B_CHANGE":return`${t.bName} \ud6a8\uacfc \ubcc0\uacbd`;case"COST":return 1===e.mod?"\uac00\uacf5 \ube44\uc6a9 +100% \uc99d\uac00":"\uac00\uacf5 \ube44\uc6a9 -100% \uac10\uc18c";case"HOLD":return"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0";case"REROLL_PLUS":return"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 "+(2===e.amount?"+2\ud68c":"+1\ud68c");default:return""}}function be(e,t){const l=e=>e.includes("-1")?-1:parseInt(e.replace(/[^0-9]/g,""),10)||1;return(e=e.trim()).startsWith("\uc758\uc9c0\ub825 \ud6a8\uc728")?{kind:"EFF",delta:l(e)}:e.startsWith("\ud3ec\uc778\ud2b8")?{kind:"PTS",delta:l(e)}:e.startsWith(t.aName+" ")?e.includes("\ubcc0\uacbd")?{kind:"A_CHANGE"}:{kind:"A_LVL",delta:l(e)}:e.startsWith(t.bName+" ")?e.includes("\ubcc0\uacbd")?{kind:"B_CHANGE"}:{kind:"B_LVL",delta:l(e)}:e.startsWith("\uac00\uacf5 \ube44\uc6a9")?{kind:"COST",mod:e.includes("+100%")?1:-1}:e.startsWith("\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")?{kind:"HOLD"}:e.startsWith("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30")?{kind:"REROLL_PLUS",amount:e.includes("+2")?2:1}:null}function ve(e,t,l,s,a,n){const i="function"===typeof n?n:Math.random;let r={...l};const o=Q*(-1===a?0:1===a?2:1);let d=0,c=0;const m=me(e,"\uc0c1\uad00 \uc5c6\uc74c");switch(s.kind){case"EFF":r.eff=ee(r.eff+s.delta,0,Z);break;case"PTS":r.pts=ee(r.pts+s.delta,0,Z);break;case"A_LVL":r.aLvl=ee(r.aLvl+s.delta,0,Z);break;case"B_LVL":r.bLvl=ee(r.bLvl+s.delta,0,Z);break;case"A_CHANGE":{const e=m.filter(e=>e!==r.bName&&e!==r.aName);if(e.length){const t=e[Math.floor(i()*e.length)];r.aName=t}break}case"B_CHANGE":{const e=m.filter(e=>e!==r.aName&&e!==r.bName);if(e.length){const t=e[Math.floor(i()*e.length)];r.bName=t}break}case"COST":d=s.mod;break;case"HOLD":default:break;case"REROLL_PLUS":c+=s.amount}return{next:r,goldThisAttempt:o,nextRate:d,rerollDelta:c}}const Ne={successProb:0,legendProb:0,relicProb:0,ancientProb:0,expectedGold:0};function je(e,t,l,s,a,n,i,r,o,d,c,m,x){let u=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{};const{maxTrials:h=5e4,epsilon:f=.002,batch:g=1e3,minTrials:p=Math.min(1e4,h),estimator:b="jeffreys"}=u,v=U(m),N=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=v()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1},j=s=>function(e,t,l,s,a,n){let i=Math.max(0,s.eff-l.eff)+Math.max(0,s.pts-l.pts);if("\uc0c1\uad00 \uc5c6\uc74c"===e)return i;const r=me(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,d=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":r.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,c=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":r.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?(r.includes(e)?0:1)+Math.max(0,s-t):(e===l?0:1)+Math.max(0,s-t);if("ANY_ONE"===t){if(!d)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,d,s.aLvl),t=m(l.bName,l.bLvl,d,s.aLvl);i+=Math.min(e,t)}else{if(!d||!c)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,d,s.aLvl)+m(l.bName,l.bLvl,c,s.bLvl),t=m(l.aName,l.aLvl,c,s.bLvl)+m(l.bName,l.bLvl,d,s.aLvl);i+=Math.min(e,t)}return i}(t,l,s,a,e,x);let w={...Ne,trialsUsed:0,ci:{low:0,high:0,halfWidth:0}};const y=()=>{let m={...s},u=0,h=i,f=r,g=d,p=o,b=!0;if("STOP_ON_SUCCESS"===n&&he(t,l,m,a,e,x)){const e=ue(xe(m));return{successProb:1,legendProb:"\uc804\uc124"===e?1:0,relicProb:"\uc720\ubb3c"===e?1:0,ancientProb:"\uace0\ub300"===e?1:0,expectedGold:0}}for(;h>0;){let s=[];if(b&&c.length>0)s=c.slice(0,4);else{const t=ge(m,h,0,e,p);if(!t.length)break;const l=[...t],a=Math.min(4,l.length);for(let e=0;e<a;e++){const e=N(l);s.push(l[e].slot),l.splice(e,1)}}if(ne){const t=s[Math.floor(v()*s.length)],l=ve(e,0,m,t,p,v);m=l.next,u+=l.goldThisAttempt,p=l.nextRate,f+=l.rerollDelta,g=!0}else{const l=me(e,t),a=m.aName,n=m.bName,i=l.some(e=>e!==n&&e!==a),r=l.some(e=>e!==a&&e!==n),o=j(m);let d=null;for(const t of s){if("A_CHANGE"===t.kind&&!i)continue;if("B_CHANGE"===t.kind&&!r)continue;const l=ve(e,0,m,t,p,v),s=o-j(l.next);(!d||s>d.gain)&&(d={next:l.next,gold:l.goldThisAttempt,nextRate:l.nextRate,rrd:l.rerollDelta,gain:s})}if(d&&d.gain<=0&&g&&f>0){f-=1,b=!1;continue}d&&(m=d.next,u+=d.gold,p=d.nextRate,f+=d.rrd,g=!0)}if(h-=1,b=!1,"STOP_ON_SUCCESS"===n&&he(t,l,m,a,e,x))break}const w=ue(xe(m));return{successProb:he(t,l,m,a,e,x)?1:0,legendProb:"\uc804\uc124"===w?1:0,relicProb:"\uc720\ubb3c"===w?1:0,ancientProb:"\uace0\ub300"===w?1:0,expectedGold:u}};let L=0,k=0,E=0,A=0,C=0,S=0;for(;L<h;){const e=Math.min(g,h-L);for(let s=0;s<e;s++){const e=y();k+=e.successProb,E+=e.legendProb,A+=e.relicProb,C+=e.ancientProb,S+=e.expectedGold}L+=e;const t=k/L;let l;if(0===t){const e=oe(L);l={low:0,high:e,halfWidth:e/2}}else if(1===t){const e=1-oe(L);l={low:e,high:1,halfWidth:(1-e)/2}}else{const e=re(t,L);l={low:e.low,high:e.high,halfWidth:(e.high-e.low)/2}}w.ci=l;if((l.halfWidth||0)<=f&&L>=p)break}return w.trialsUsed=L,w.successProb=ae(k,L,b),w.legendProb=ae(E,L,b),w.relicProb=ae(A,L,b),w.ancientProb=ae(C,L,b),w.expectedGold=S/L,w}function we(e){let{value:t,items:l,onChange:a,placeholder:n,className:o,disabled:d}=e;const[c,u]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=(0,s.useRef)(null),p=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>u(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=(0,s.useMemo)(()=>Array.isArray(e)?e:[e],[e]),a=(0,s.useRef)(t);(0,s.useEffect)(()=>{a.current=t},[t]),(0,s.useEffect)(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([h,g],()=>u(!1)),(0,s.useLayoutEffect)(()=>{if(!c||!h.current)return;const e=h.current.getBoundingClientRect();p.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(p.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[c]);const v=l.find(e=>e.value===t),N=c&&!d?(0,f.jsx)(m.N,{children:(0,f.jsx)(x.P.ul,{ref:g,initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.12},style:{position:"fixed",top:p.current.top,left:p.current.left,width:p.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),u(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:h,className:`relative min-w-0 ${o||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>!d&&u(e=>!e),disabled:d,className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 "+(d?"cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"truncate text-sm",children:v?v.label:n||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:c?(0,f.jsx)(i.A,{size:16}):(0,f.jsx)(r.A,{size:16})})]}),c&&N]})}function ye(e){let{toasts:t,onClose:l}=e;const s=e=>({success:"text-emerald-900/80 hover:text-emerald-900",info:"text-sky-900/80 hover:text-sky-900",warning:"text-amber-900/80 hover:text-amber-900",error:"text-rose-900/80 hover:text-rose-900"}[e]||"text-amber-900/80 hover:text-amber-900");return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex space-y-2 flex-col items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>{return(0,f.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:`pointer-events-auto overflow-hidden rounded-2xl border shadow-lg backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw] ${t=e.tone,{success:"bg-emerald-50/95 border-emerald-200 text-emerald-900",info:"bg-sky-50/95 border-sky-200 text-sky-900",warning:"bg-amber-50/95 border-amber-200 text-amber-900",error:"bg-rose-50/95 border-rose-200 text-rose-900"}[t]||"bg-amber-50/95 border-amber-200 text-amber-900"}`,children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:`text-sm font-medium self-center ${s(e.tone)}`,onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id);var t})})})}function Le(e){let{value:t,set:l,onChange:a,min:n=X,max:i=99,step:r=1,allowFloat:o=!1,zeroOnBlur:d=!0,className:c="",inputProps:m={},disabled:x}=e;const u=e=>null===e||void 0===e?"":String(e),[h,g]=s.useState(u(t));s.useEffect(()=>{g(u(t))},[t]);const p=e=>{let t=e;return null!=n&&t<n&&(t=n),null!=i&&t>i&&(t=i),t},b="function"===typeof a,v="function"===typeof l;return(0,f.jsx)("input",{type:"number",inputMode:o?"decimal":"numeric",step:r,min:n,max:i,disabled:x,value:h,onChange:e=>{const t=e.target.value;if(""===t)return g(""),void(b&&a(null));g(t);const s=Number(t);if(!Number.isFinite(s))return void(b&&a(null));const n=o?s:Math.trunc(s);b?a(n):v&&l(p(n))},onBlur:()=>{const e=(e=>{if(""===e)return d?null!==n&&void 0!==n?n:0:null;let t=Number(e);return Number.isFinite(t)?(t=o?t:Math.trunc(t),p(t)):d?null!==n&&void 0!==n?n:0:null})(h);g(null==e?"":String(e)),b?a(e):v&&l(null==e?null!==n&&void 0!==n?n:0:e)},onWheel:e=>e.currentTarget.blur(),className:`h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white ${c}`,...m})}const ke=e=>{let{value:t,set:l,options:s,disabled:a,placeholder:n}=e;const i=(s||[]).map(e=>{var t,l;return"string"===typeof e?{value:e,label:e}:{value:null!==(t=e.value)&&void 0!==t?t:e,label:null!==(l=e.label)&&void 0!==l?l:String(e)}});return(0,f.jsx)(we,{value:t,onChange:l,items:i,disabled:!!a,className:"w-full lg:w-full",placeholder:n||"\uc120\ud0dd"})};function Ee(e){const t=e.filter(Boolean);return new Set(t).size!==t.length}function Ae(){var e;const{toasts:t,push:l,remove:a}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const s=Math.random().toString(36).slice(2,9);t(t=>[...t,{id:s,msg:e,tone:l}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==s)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),[n,i]=(0,s.useState)("\uc9c8\uc11c-\uc548\uc815"),[r,o]=(0,s.useState)("\uc0c1\uad00 \uc5c6\uc74c"),[d,m]=(0,s.useState)("\uace0\uae09"),[u,g]=(0,s.useState)("ANY_ONE"),p=(0,s.useMemo)(()=>me(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),b=(0,s.useMemo)(()=>me(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),[v,N]=(0,s.useState)({eff:X,pts:X,aName:p[0],aLvl:X,bName:p[1]||p[0],bLvl:X}),[j,w]=(0,s.useState)({eff:X,pts:X,aLvl:X,bLvl:X}),[y,L]=(0,s.useState)({aName:me(n,r)[0],bName:me(n,r)[1]||me(n,r)[0]}),[k,E]=(0,s.useState)(!1),[A,C]=(0,s.useState)(!1),[S,M]=(0,s.useState)(!1),P=v.aName!==v.bName,[R,$]=(0,s.useState)(1e4),_=(0,s.useRef)(!1);(0,s.useEffect)(()=>{_.current||(_.current=!0,N(e=>({...e,eff:Math.max(e.eff,X),pts:Math.max(e.pts,X),aLvl:Math.max(e.aLvl,X),bLvl:Math.max(e.bLvl,X)})),w(e=>({...e,eff:Math.max(e.eff,X),pts:Math.max(e.pts,X),aLvl:Math.max(e.aLvl,X),bLvl:Math.max(e.bLvl,X)})))},[]);const[T,O]=(0,s.useState)(()=>({attemptsLeft:K[d],rerolls:J[d],unlocked:!1,costAddRate:0,gold:0,state:{...v}}));(0,s.useEffect)(()=>{O(e=>({...e,attemptsLeft:K[d],rerolls:J[d],state:{...v},unlocked:!1,costAddRate:0,gold:0}))},[d,v]);const[F,I]=(0,s.useState)(null),[Y,ae]=(0,s.useState)(""),[ne,re]=(0,s.useState)({past:[],future:[]}),oe=(0,s.useCallback)(()=>({manual:JSON.parse(JSON.stringify(T)),changeMode:F?{...F,options:[...F.options]}:null,changePick:Y}),[T,F,Y]),xe=(0,s.useCallback)(e=>{O(e.manual),I(e.changeMode),ae(e.changePick)},[]),ue=(0,s.useCallback)(()=>{re(e=>{const t=[...e.past,oe()];for(;t.length>50;)t.shift();return{past:t,future:[]}})},[oe]),he=ne.past.length>0,fe=ne.future.length>0,[Ne,Ae]=(0,s.useState)([]),Ce=()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`},Se=(0,s.useCallback)(e=>{Ae(t=>[{id:Math.random().toString(36).slice(2),time:Ce(),...e},...t].slice(0,200))},[]),Me=(0,s.useCallback)(()=>{re(e=>{if(0===e.past.length)return e;const t=e.past[e.past.length-1],l=e.past.slice(0,-1),s=oe();return xe(t),Se({type:"undo",title:"\ub418\ub3cc\ub9ac\uae30",detail:"\uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uad6c"}),{past:l,future:[s,...e.future]}})},[xe,oe,Se]),Pe=(0,s.useCallback)(()=>{re(e=>{if(0===e.future.length)return e;const t=e.future[0],l=e.future.slice(1),s=oe();return xe(t),Se({type:"redo",title:"\ub2e4\uc2dc\ud558\uae30",detail:"\ub418\ub3cc\ub9ac\uae30 \ucde8\uc18c"}),{past:[...e.past,s],future:l}})},[xe,oe,Se]);(0,s.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key.toLowerCase()&&(e.preventDefault(),e.shiftKey?fe&&Pe():he&&Me())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[he,fe,Me,Pe]);const Re=(e,t)=>{const l=[],s=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;e[s]!==t[s]&&l.push(`${a} ${e[s]}\u2192${t[s]}`)};if(s("eff","\ud6a8\uc728"),s("pts","\ud3ec\uc778\ud2b8"),e.aName!==t.aName||e.aLvl!==t.aLvl){const s=e.aName===t.aName?t.aName:`${e.aName}\u2192${t.aName}`;l.push(`A ${s} Lv.${e.aLvl}\u2192${t.aLvl}`)}if(e.bName!==t.bName||e.bLvl!==t.bLvl){const s=e.bName===t.bName?t.bName:`${e.bName}\u2192${t.bName}`;l.push(`B ${s} Lv.${e.bLvl}\u2192${t.bLvl}`)}return l.join(" \xb7 ")};(0,s.useEffect)(()=>{const e=me(n,r);L(t=>{const l=e.includes(t.aName)?t.aName:e[0],s=e[1]||e[0],a=e.includes(t.bName)?t.bName:l===s?e.find(e=>e!==l)||l:s;return{aName:l,bName:a}})},[n,r]);const $e=(0,s.useMemo)(()=>{const e=ge(T.state,T.attemptsLeft,0,n,T.costAddRate).map(e=>pe(e.slot,T.state));return Array.from(new Set(e))},[T.state,T.attemptsLeft,T.costAddRate,r,n]),_e=(0,s.useMemo)(()=>{const e=["\uc758\uc9c0\ub825 \ud6a8\uc728 +1","\ud3ec\uc778\ud2b8 +1",`${T.state.aName} Lv. +1`,`${T.state.bName} Lv. +1`],t=[];let l=0;for(const i of e)if($e.includes(i)&&!t.includes(i))t.push(i);else{for(var s;l<$e.length&&t.includes($e[l]);)l++;t.push(null!==(s=$e[l])&&void 0!==s?s:i),l++}for(;t.length<4;){for(var a,n;l<$e.length&&t.includes($e[l]);)l++;t.push(null!==(a=null!==(n=$e[l++])&&void 0!==n?n:$e[0])&&void 0!==a?a:"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")}return t.slice(0,4)},[$e,T.state.aName,T.state.bName]),[Te,Oe]=(0,s.useState)(_e);(0,s.useEffect)(()=>{Oe(e=>{const t=e.map((e,t)=>{var l,s;return $e.includes(e)?e:null!==(l=null!==(s=$e[t])&&void 0!==s?s:$e[0])&&void 0!==l?l:e}),l=new Set;for(let s=0;s<t.length;s++){if(!l.has(t[s])){l.add(t[s]);continue}const e=$e.find(e=>!l.has(e));e&&(t[s]=e,l.add(e))}return t})},[$e]);const[Fe,Ie]=(0,s.useState)(null),[ze,Be]=(0,s.useState)(null),[Ge,He]=(0,s.useState)(!1),De=(0,s.useRef)(0),We=(0,s.useRef)(null),Ve=(0,s.useRef)(null),[Ue,Ye]=(0,s.useState)(null);(0,s.useLayoutEffect)(()=>{const e=()=>{Ve.current&&Ye(Ve.current.offsetHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[T,Te,ze,Fe,F,S,k,A]);const qe=.0025,Ke=(0,s.useCallback)((e,t,l,s,a,n,i)=>{let r=0,o=0;for(const d of e){const e=be(d,a.state);if(!e)continue;if("A_CHANGE"===e.kind){if(!(me(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.bName&&e!==a.state.aName).length>0))continue}if("B_CHANGE"===e.kind){if(!(me(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.aName&&e!==a.state.bName).length>0))continue}const c=ve(t,0,a.state,e,a.costAddRate,()=>U(i+W(d))()),m={attemptsLeft:a.attemptsLeft-1,rerolls:a.rerolls+c.rerollDelta,unlocked:!0,costAddRate:c.nextRate,gold:a.gold+c.goldThisAttempt,state:c.next};r+=je(t,l,s,m.state,n,"RUN_TO_END",m.attemptsLeft,m.rerolls,m.costAddRate,m.unlocked,[],i+W(d),y,{maxTrials:8e3,epsilon:.006,batch:500}).successProb,o+=1}return o?r/o:0},[y]);function Je(e,t,l,s){const a=U(e),n=[...ge(s.state,s.attemptsLeft,0,t,s.costAddRate)],i=[],r=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=a()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1},o=Math.min(4,n.length);for(let d=0;d<o;d++){const e=r(n);i.push(n[e].slot),n.splice(e,1)}return i}function Xe(e,t){return e.map(e=>pe(e,t))}const Ze=(0,s.useMemo)(()=>{if(!T.unlocked)return{shouldReroll:!1,reason:"\uccab \uac00\uacf5 \uc774\uc804\uc5d0\ub294 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \ucd94\ucc9c\uc744 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."};if(T.rerolls<=0)return{shouldReroll:!1,reason:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."};if(T.attemptsLeft<=0)return{shouldReroll:!1,reason:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud310\ub2e8\uc774 \ubb34\uc758\ubbf8\ud569\ub2c8\ub2e4."};const e="\uc0c1\uad00 \uc5c6\uc74c"===r?"ANY_ONE":u,t=V({gemKey:n,pos:r,rarity:d,manual:T,tgt:j,manLabels:Te,abForEval:e,salt:"REROLL_EV"}),l=Ke(Te,n,r,e,T,j,t+7);let s=0;for(let d=0;d<16;d++){const l=t+1e3+31*d,a={...T,rerolls:T.rerolls-1},i=Xe(Je(l,n,0,a),a.state);s+=Ke(i,n,r,e,a,j,l+17)}const a=s/16,i=a-l,o=e=>(100*e).toFixed(2)+"%";return i>qe?{shouldReroll:!0,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)} \u2192 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)} (\u25b2${o(i)}).`}:i<-qe?{shouldReroll:!1,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)}\uac00 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)}\ubcf4\ub2e4 \uc720\ub9ac (\u25bc${o(-i)}).`}:{shouldReroll:!1,reason:`\ub450 \uacbd\ub85c \ucc28\uc774 \ubbf8\ubbf8: \ud604\uc7ac ${o(l)} vs \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${o(a)} (|\u0394| < ${.25.toFixed(2)}%).`}},[n,r,d,T,j,Te,u,Ke]);function Qe(){if(!F)return;if(!it)return void l("\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815\uc740 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning");ue();const e=Q*(-1===T.costAddRate?0:1===T.costAddRate?2:1),t={...T.state};O(t=>{const l={...t.state};return"A"===F.who?l.aName=Y:l.bName=Y,{attemptsLeft:t.attemptsLeft-1,rerolls:t.rerolls,unlocked:!0,costAddRate:t.costAddRate,gold:t.gold+e,state:l}});const s={...T.state,..."A"===F.who?{aName:Y}:{bName:Y}};Se({type:"change",title:`\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815 (${F.who}) \u2192 ${Y}`,detail:Re(t,s),meta:{cost:e}}),I(null),l("\uc120\ud0dd\ud55c \ud6a8\uacfc\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success")}function et(){I(null),l("\ud6a8\uacfc \ubcc0\uacbd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","warning")}(0,s.useEffect)(()=>{if("BOTH"!==u||"\uc0c1\uad00 \uc5c6\uc74c"===r)return;const e=me(n,r);L(t=>{const l=e.includes(t.aName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.aName?t.aName:e[0],s=e.find(e=>e!==l)||e[0],a=e.includes(t.bName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.bName&&t.bName!==l?t.bName:s;return{aName:l,bName:a}})},[u,n,r]),(0,s.useEffect)(()=>{if(!S||!P)return Ie(null),void Be(null);if(Ee(Te))return Ie(null),void Be(null);const e=Te.map(e=>be(e,T.state)).filter(e=>!!e),t="\uc0c1\uad00 \uc5c6\uc74c"===r?"ANY_ONE":u,l=V({gemKey:n,pos:r,rarity:d,manual:T,tgt:j,selectedFirstFour:e,calcMode:"\uc0c1\uad00 \uc5c6\uc74c"===r?"IGNORE_AB":u}),s=++De.current;return He(!0),We.current&&clearTimeout(We.current),We.current=setTimeout(()=>{const a=je(n,r,t,T.state,j,"STOP_ON_SUCCESS",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,l+101,y,{maxTrials:R,minTrials:R,epsilon:de(R),batch:ce(R),estimator:"jeffreys"}),i=je(n,r,t,T.state,j,"RUN_TO_END",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,l+103,y,{maxTrials:R,minTrials:R,epsilon:de(R),batch:ce(R),estimator:"jeffreys"});s===De.current&&(Ie(a),Be(i),He(!1))},0),()=>{We.current&&(clearTimeout(We.current),We.current=null)}},[n,r,d,P,T,j,S,Te,u,y,R]),(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud5ec\ud37c"},[]);const tt="bg-white rounded-2xl shadow-sm p-4 lg:p-6",lt="block text-xs text-gray-500 mb-1",st="text-base font-semibold whitespace-nowrap",at="\uc0c1\uad00 \uc5c6\uc74c"===r?"IGNORE_AB":u,nt=1===T.costAddRate?"+100%":-1===T.costAddRate?"-100%":"0%",it=k&&A&&S,rt=Ee(Te),ot=(0,s.useMemo)(()=>P&&(Ge||!(ze&&Fe)),[P,Ge,ze,Fe]),dt=!it||rt||!!F||T.attemptsLeft<=0,ct=!it||!!F||T.attemptsLeft<=0||T.rerolls<=0,mt=(0,s.useRef)(!1);(0,s.useEffect)(()=>{it||(Ae([]),re({past:[],future:[]}))},[it]),(0,s.useEffect)(()=>{rt?mt.current||(l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694."),mt.current=!0):mt.current=!1},[rt,l]);const xt=(0,s.useMemo)(()=>{const e=me(n,r);return"\uc0c1\uad00 \uc5c6\uc74c"===r?e:"ANY_ONE"===u?["\uc0c1\uad00\uc5c6\uc74c",...e]:e},[n,r,u]);return(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n      "}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud655\ub960 \uacc4\uc0b0\uae30"}),(0,f.jsx)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("span",{className:"hidden sm:inline text-white/90 text-sm",children:"\uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218"}),(0,f.jsx)("div",{className:"min-w-[170px]",children:(0,f.jsx)(we,{value:R,onChange:$,items:ie,placeholder:"\ubc18\ubcf5 \uc218 \uc120\ud0dd"})})]})})]})}),(0,f.jsxs)("section",{className:`${tt} !mt-2`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\uae30\ubcf8 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:k?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>E(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>E(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r ",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] w-full lg:w-56 "+(k?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\uc82c \ud0c0\uc785"}),(0,f.jsx)(we,{className:"w-full",value:n,onChange:e=>i(e),items:Object.keys(q).map(e=>({value:e,label:e})),placeholder:"\uc82c \ud0c0\uc785",disabled:k})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] w-full lg:w-40 "+(k?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ub4f1\uae09"}),(0,f.jsx)(we,{className:"w-full",value:d,onChange:e=>m(e),items:["\uace0\uae09","\ud76c\uadc0","\uc601\uc6c5"].map(e=>({value:e,label:e})),placeholder:"\ub4f1\uae09",disabled:k})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-auto",children:[(0,f.jsx)("label",{className:lt,children:"\uae30\ubcf8 \uc2dc\ub3c4/\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"}),(0,f.jsxs)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center text-sm",children:["\uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"mx-1",children:K[d]})," \xb7 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"," ",(0,f.jsx)("b",{className:"ml-1",children:J[d]}),"\ud68c"]})]})]})})]}),(0,f.jsxs)("section",{className:tt,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\ud604\uc7ac \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:A?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>C(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>C(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)(Le,{value:v.eff,set:e=>N({...v,eff:ee(e,X,Z)}),min:X,max:Z,disabled:A})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)(Le,{value:v.pts,set:e=>N({...v,pts:ee(e,X,Z)}),min:X,max:Z,disabled:A})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud6a8\uacfc A"}),(0,f.jsx)(ke,{value:v.aName,set:e=>N({...v,aName:e}),options:b,disabled:A,placeholder:A?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud6a8\uacfc A \ub808\ubca8"}),(0,f.jsx)(Le,{value:v.aLvl,set:e=>N({...v,aLvl:ee(e,X,Z)}),min:X,max:Z,disabled:A})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud6a8\uacfc B"}),(0,f.jsx)(ke,{value:v.bName,set:e=>N({...v,bName:e}),options:b.filter(e=>e!==v.aName),disabled:A,placeholder:A?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(A?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud6a8\uacfc B \ub808\ubca8"}),(0,f.jsx)(Le,{value:v.bLvl,set:e=>N({...v,bLvl:ee(e,X,Z)}),min:X,max:Z,disabled:A})]})]})})]}),(0,f.jsxs)("section",{className:tt,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\ubaa9\ud45c \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-3 flex-wrap",children:S?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uacc4\uc0b0 \ud65c\uc131)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>M(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>M(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===r?"opacity-50":""),children:[(0,f.jsx)("span",{className:"text-xs text-gray-500",children:"\ubaa9\ud45c \ucda9\uc871 \ubc29\uc2dd"}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"ANY_ONE"===u,onChange:()=>g("ANY_ONE"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===r,className:"accent-primary"}),"1\uac1c \uc774\uc0c1"]}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"BOTH"===u,onChange:()=>g("BOTH"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===r,className:"accent-primary"}),"2\uac1c"]})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative\r grid grid-cols-2 gap-2\r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3\r items-stretch lg:items-end\r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728 \u2265"}),(0,f.jsx)(Le,{value:j.eff,set:e=>w({...j,eff:ee(e,X,Z)}),min:X,max:Z,disabled:S})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ud3ec\uc778\ud2b8 \u2265"}),(0,f.jsx)(Le,{value:j.pts,set:e=>w({...j,pts:ee(e,X,Z)}),min:X,max:Z,disabled:S})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-[100px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ucd94\uac00 \ud6a8\uacfc"}),(0,f.jsx)(we,{className:"w-full lg:w-[100px]",value:r,onChange:e=>o(e),items:["\uc0c1\uad00 \uc5c6\uc74c","\uacf5\uaca9\ud615","\uc9c0\uc6d0\ud615"].map(e=>({value:e,label:e})),placeholder:"\ucd94\uac00 \ud6a8\uacfc",disabled:S})]}),(()=>{const e=S||"\uc0c1\uad00 \uc5c6\uc74c"===r,t=e||"BOTH"!==u,l=e?"opacity-50":"",s=t?"opacity-50":"";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===r?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ubaa9\ud45c \ud6a8\uacfc A"}),(0,f.jsx)(ke,{value:y.aName,set:e=>L(t=>({...t,aName:e})),options:"BOTH"===u?xt.filter(e=>e!==y.bName):xt,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===r})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${l}`,children:[(0,f.jsx)("label",{className:lt,children:"\ubaa9\ud45c \ud6a8\uacfc A \ub808\ubca8 \u2265"}),(0,f.jsx)(Le,{value:j.aLvl,set:e=>w({...j,aLvl:ee(e,X,Z)}),min:X,max:Z,disabled:e})]}),(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===r||"BOTH"!==u?"opacity-50":""),children:[(0,f.jsx)("label",{className:lt,children:"\ubaa9\ud45c \ud6a8\uacfc B"}),(0,f.jsx)(ke,{value:y.bName,set:e=>L(t=>({...t,bName:e})),options:"BOTH"===u?xt.filter(e=>e!==y.aName):xt,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===r||"BOTH"!==u})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${s}`,children:[(0,f.jsx)("label",{className:lt,children:"\ubaa9\ud45c \ud6a8\uacfc B \ub808\ubca8 \u2265"}),(0,f.jsx)(Le,{value:j.bLvl,set:e=>w({...j,bLvl:ee(e,X,Z)}),min:X,max:Z,disabled:t})]})]})})()]})})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,f.jsxs)("section",{ref:Ve,className:"lg:col-span-2 "+tt,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\uac00\uacf5 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("button",{onClick:function(){Ae([]),re({past:[],future:[]}),O({attemptsLeft:K[d],rerolls:J[d],unlocked:!1,costAddRate:0,gold:0,state:{...v}})},className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(c.A,{size:16}),"\uc2dc\ubbac\ub808\uc774\uc158 \ucd08\uae30\ud654"]})})]}),(0,f.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["\ud56d\ubaa9 \uc801\uc6a9 / \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 ",(0,f.jsx)("b",{children:"\ubaa8\ub4e0 \uc124\uc815\uc744 \uc800\uc7a5(\uc7a0\uae08)"}),"\ud55c \ub4a4 \uc774\uc6a9\ud558\uc138\uc694."]}),(0,f.jsxs)("div",{className:"mt-3 gap-4",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\ud604\uc7ac \uc82c \uc0c1\ud0dc"}),(0,f.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:T.state.eff})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc9c8\uc11c\xb7\ud63c\ub3c8 \ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:T.state.pts})]}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"A"===(null===F||void 0===F?void 0:F.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(ke,{value:Y,set:ae,options:F.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:Qe,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:et,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:T.state.aName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.aLvl]})]})}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"B"===(null===F||void 0===F?void 0:F.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(ke,{value:Y,set:ae,options:F.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:Qe,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:et,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:T.state.bName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.bLvl]})]})})]}),(0,f.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[T.attemptsLeft<=0?(0,f.jsx)("div",{className:"inline-flex items-center px-2.5 py-1.5 rounded-xl bg-violet-50 border border-violet-200 text-violet-900 text-[12px] lg:text-[13px]",children:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub0a8\uc740 \uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"ml-1",children:T.attemptsLeft})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",(0,f.jsx)("b",{className:"ml-1",children:T.rerolls})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\uac00\uacf5 \ube44\uc6a9 \ucd94\uac00 \ube44\uc728 ",(0,f.jsx)("b",{className:"ml-1",children:nt})]})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub204\uc801 \uace8\ub4dc ",(0,f.jsx)("b",{className:"ml-1",children:se(T.gold)})," G"]})]})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white mt-4",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\uc774\ubc88\uc5d0 \ub4f1\uc7a5\ud55c 4\uac1c \ud56d\ubaa9"}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Te.map((e,t)=>(0,f.jsxs)("div",{className:"slot-card rounded-xl border p-2 transition-all",children:[(0,f.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["\uc2ac\ub86f ",t+1]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(ke,{value:e,set:e=>{const l=[...Te];l[t]=e,Oe(l)},options:$e}),(0,f.jsx)("button",{onClick:()=>function(e){if(!it)return void l("\ud56d\ubaa9\uc744 \uc801\uc6a9\ud558\ub824\uba74 '\uae30\ubcf8 \uc124\uc815/\ud604\uc7ac \uc635\uc158/\ubaa9\ud45c \uc635\uc158'\uc744 \ubaa8\ub450 \uc800\uc7a5(\uc7a0\uae08)\ud558\uc138\uc694.","warning");if(ue(),!S)return void l("\ubaa9\ud45c \uc635\uc158\uc744 \uba3c\uc800 \uc800\uc7a5\ud574 \uc8fc\uc138\uc694.");if(T.attemptsLeft<=0)return;if(Ee(Te))return void l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694.");const t=Te[e];if(!$e.includes(t))return void l("\ubbf8\ub4f1\uc7a5 \uc870\uac74\uc73c\ub85c \ud604\uc7ac \uc120\ud0dd\uc740 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.");const s=be(t,T.state);if(!s)return void l("\uc120\ud0dd\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc5b4\uc694.");if("A_CHANGE"===s.kind||"B_CHANGE"===s.kind){const e=me(n,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==T.state.aName&&e!==T.state.bName);return e.length<=0?void l("\ucd94\uac00 \ud6a8\uacfc \uc870\uac74/\uc911\ubcf5\uc73c\ub85c \ud6a8\uacfc \ubcc0\uacbd\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4."):(I({who:"A_CHANGE"===s.kind?"A":"B",options:e}),ae(e[0]),void l("\ubcc0\uacbd\ud560 \ud6a8\uacfc\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc67c\ucabd \ud328\ub110\uc5d0\uc11c \uc801\uc6a9\uc744 \ub204\ub974\uba74 \uc774\ubc88 \ucc28\uc218\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.","info"))}if(T.attemptsLeft<=0)return void l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub354 \uc774\uc0c1 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.","warning");const a={...T.state},i=ve(n,0,T.state,s,T.costAddRate),r=T.attemptsLeft-1;O(e=>({attemptsLeft:r,rerolls:e.rerolls+i.rerollDelta,unlocked:!0,costAddRate:i.nextRate,gold:e.gold+i.goldThisAttempt,state:i.next})),Se({type:"apply",title:`\uc2ac\ub86f ${e+1} \uc801\uc6a9: ${t}`,detail:Re(a,i.next),meta:{cost:i.goldThisAttempt,attemptsLeft:r,rerollDelta:i.rerollDelta}}),r>0&&l("\uc120\ud0dd\ud55c \ud6a8\uacfc\uac00 \ubc18\uc601\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c 4\uac1c\uc758 \uc120\ud0dd\uc9c0\ub97c \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694.","success")}(t),"aria-disabled":dt,className:`apply-btn transition-all justify-center min-w-[60px] h-10 px-3 rounded-xl border bg-white \n                          hover:border-[#a399f2] hover:text-white hover:bg-[#a399f2] inline-flex items-center\n                          ${dt?"opacity-50 cursor-not-allowed":""} \n                          ${rt?"opacity-50 cursor-not-allowed":""}`,children:"\uc801\uc6a9"})]})]},t))}),(0,f.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("button",{onClick:function(){it?T.attemptsLeft<=0?l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694."):T.unlocked?T.rerolls<=0?l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud69f\uc218\uac00 \ubd80\uc871\ud574\uc694."):(ue(),O(e=>({...e,rerolls:e.rerolls-1})),Se({type:"reroll",title:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc0ac\uc6a9",detail:`\ub0a8\uc740 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${T.rerolls-1}\ud68c`})):l("\uac00\uacf5 1\ud68c \uc774\ud6c4\ubd80\ud130 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."):l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning")},disabled:ct,className:`h-10 px-3 rounded-xl border ${ct?"opacity-50 cursor-not-allowed":"bg-white hover:bg-gray-50"} inline-flex items-center gap-2`,children:[(0,f.jsx)(G.A,{size:16}),"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",T.rerolls,"\ud68c"]}),(0,f.jsx)("span",{className:"text-xs text-gray-600",children:T.attemptsLeft<=0?"\uac00\uacf5 \uc644\ub8cc":T.unlocked?T.rerolls<=0?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc5c6\uc74c":Ze.shouldReroll?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c":"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c":"\uccab \uac00\uacf5 \uc774\ud6c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),T.unlocked&&T.rerolls>0&&(0,f.jsx)("div",{className:"mt-2 text-xs text-gray-700",children:Ze.reason})]})]})]}),(0,f.jsxs)("section",{className:`${tt} h-full flex flex-col`,style:Ue?{maxHeight:Ue}:void 0,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,f.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,f.jsx)("button",{onClick:Me,disabled:!he,className:`ml-auto h-10 px-3 rounded-xl border ${he?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub418\ub3cc\ub9ac\uae30 (Ctrl/Cmd+Z)",children:(0,f.jsx)(H.A,{size:16})}),(0,f.jsx)("button",{onClick:Pe,disabled:!fe,className:`h-10 px-3 rounded-xl border ${fe?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub2e4\uc2dc\ud558\uae30 (Ctrl/Cmd+Shift+Z)",children:(0,f.jsx)(D.A,{size:16})})]})]}),0===Ne.length?(0,f.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,f.jsx)("div",{className:"mt-3 flex-1 min-h-0 space-y-2 overflow-auto",children:Ne.map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-2 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:e.time})]}),e.detail&&(0,f.jsx)("div",{className:"mt-1 text-xs text-gray-700",children:e.detail}),e.meta&&(0,f.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5 text-[11px] text-gray-600",children:["cost"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ube44\uc6a9 ",se(e.meta.cost)," G"]}),"attemptsLeft"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub0a8\uc740 \uac00\uacf5 ",e.meta.attemptsLeft,"\ud68c"]}),"rerollDelta"in e.meta&&0!==e.meta.rerollDelta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",e.meta.rerollDelta>0?`+${e.meta.rerollDelta}`:e.meta.rerollDelta]})]})]},e.id))})]})]}),(0,f.jsxs)("section",{className:tt,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:st,children:"\uacb0\uacfc \ucd9c\ub825"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("span",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 text-[10px] lg:text-xs text-gray-600",children:["Monte Carlo ",se(Math.max((null===ze||void 0===ze?void 0:ze.trialsUsed)||0,(null===Fe||void 0===Fe?void 0:Fe.trialsUsed)||0)),"\ud68c",null!==ze&&void 0!==ze&&null!==(e=ze.ci)&&void 0!==e&&e.halfWidth?` (\xb1${(100*ze.ci.halfWidth).toFixed(2)}%p @95%)`:""]})})]}),ot?(0,f.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:[...Array(4)].map((e,t)=>(0,f.jsx)("div",{className:"h-6 w-28 rounded-lg bg-gray-100 animate-pulse"},t))}),(0,f.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-2",children:[0,1].map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-3 h-8 w-2/3 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-2 h-2 w-full bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-4 h-4 w-40 bg-gray-100 rounded animate-pulse"})]},e))})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-2 text-sm text-gray-700",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:Te.map((e,t)=>(0,f.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white text-[12px]",children:e},t))})]}),ze&&Fe&&(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,f.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ubaa9\ud45c \ub2ec\uc131 \ud655\ub960"}),(0,f.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-50 text-[11px] text-gray-600",children:"IGNORE_AB"===at?"\ucd94\uac00 \ud6a8\uacfc \uc0c1\uad00 \uc5c6\uc74c":"ANY_ONE"===at?"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 1\uac1c \uc774\uc0c1":"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 2\uac1c \uc804\ubd80"})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsx)("div",{className:"flex items-center justify-between",children:(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\ub2ec\uc131 \uc989\uc2dc \uac00\uacf5 \uc644\ub8cc"})}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:te(Fe.successProb,Fe.ci)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Fe.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-600 flex items-center gap-1",children:["\ud3c9\uade0 \uace8\ub4dc: ",(0,f.jsx)("b",{children:se(Math.round(Fe.expectedGold))})," G (",se(Math.max((null===ze||void 0===ze?void 0:ze.trialsUsed)||0,(null===Fe||void 0===Fe?void 0:Fe.trialsUsed)||0)),"\ud68c \ud3c9\uade0)"]})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsx)("div",{className:"flex items-center justify-between",children:(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uac00\uacf5 \ud69f\uc218 \uc804\ubd80 \uc18c\ubaa8"})}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:le(ze.successProb)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*ze.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-600 flex items-center gap-1",children:["\ud3c9\uade0 \uace8\ub4dc: ",(0,f.jsx)("b",{children:se(Math.round(ze.expectedGold))})," G (",se(Math.max((null===ze||void 0===ze?void 0:ze.trialsUsed)||0,(null===Fe||void 0===Fe?void 0:Fe.trialsUsed)||0)),"\ud68c \ud3c9\uade0)"]})]})]})]}),(0,f.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,delay:.05},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ub4f1\uae09 \ud655\ub960"}),(0,f.jsxs)("div",{className:"mt-3 space-y-3 text-sm",children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-700",children:"\uc804\uc124 (4~15)"}),(0,f.jsx)("b",{children:le(ze.legendProb)})]}),(0,f.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*ze.legendProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-700",children:"\uc720\ubb3c (16~18)"}),(0,f.jsx)("b",{children:le(ze.relicProb)})]}),(0,f.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*ze.relicProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-700",children:"\uace0\ub300 (19+)"}),(0,f.jsx)("b",{children:le(ze.ancientProb)})]}),(0,f.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*ze.ancientProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})})]})]})]})]})]})]})]}),(0,f.jsx)(ye,{toasts:t,onClose:a}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}function Ce(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;const[t,l]=s.useState(!1);return s.useEffect(()=>{const t=()=>{const t=document.documentElement,s=t.scrollHeight-(t.scrollTop+window.innerHeight);l(s<=e)};return t(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t}(520);return(0,f.jsx)("div",{className:"fixed z-50 right-4 bottom-4 sm:right-6 sm:bottom-6 pr-[env(safe-area-inset-right)] pb-[env(safe-area-inset-bottom)]",children:(0,f.jsxs)("button",{type:"button","aria-label":"\ub9e8 \uc704\ub85c",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:["inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-3 shadow-lg backdrop-blur","text-gray-700 hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/40","transition transform duration-200",e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"].join(" "),children:[(0,f.jsx)(i.A,{size:18}),(0,f.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"TOP"})]})})}function Se(){return(0,f.jsxs)(a.I9,{basename:"/core",children:[(0,f.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,f.jsx)("header",{className:"sticky top-0 z-40 border-b border-gray-200/60 bg-white/70 backdrop-blur",children:(0,f.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3",children:(0,f.jsx)("nav",{"aria-label":"Core pages",children:(0,f.jsxs)("ul",{className:"mx-auto flex w-full flex-wrap justify-center gap-1 rounded-xl",children:[(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/gem",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uac00\uacf5 \ud5ec\ud37c"})}),(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/optimizer",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uc7a5\ucc29 \ud5ec\ud37c"})})]})})})}),(0,f.jsx)("main",{children:(0,f.jsxs)(a.BV,{children:[(0,f.jsx)(a.qh,{path:"/gem",element:(0,f.jsx)(Ae,{})}),(0,f.jsx)(a.qh,{path:"/optimizer",element:(0,f.jsx)(I,{})}),(0,f.jsx)(a.qh,{path:"*",element:(0,f.jsx)(a.C5,{to:"/gem",replace:!0})})]})})]}),(0,f.jsx)(Ce,{})]})}},346:(e,t,l)=>{l.d(t,{A:()=>n});var s=l(43),a=l(579);const n=function(){const e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const t=document.createElement("ins");t.className="kakao_ad_area",t.style.display="none",t.setAttribute("data-ad-unit","DAN-V4UQDzJ7BdEKoWll"),t.setAttribute("data-ad-width","320"),t.setAttribute("data-ad-height","50");const l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src="//t1.daumcdn.net/kas/static/ba.min.js",e.current&&(e.current.innerHTML="",e.current.appendChild(t),e.current.appendChild(l))},[]),(0,a.jsx)("div",{ref:e,className:"kakao-adfit-container"})}}}]);
//# sourceMappingURL=299.09460a9d.chunk.js.map