"use strict";(self.webpackChunkpeon_calculator=self.webpackChunkpeon_calculator||[]).push([[840],{346:(e,l,t)=>{t.d(l,{A:()=>n});var s=t(43),a=t(579);const n=function(){const e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const l=document.createElement("ins");l.className="kakao_ad_area",l.style.display="none",l.setAttribute("data-ad-unit","DAN-V4UQDzJ7BdEKoWll"),l.setAttribute("data-ad-width","320"),l.setAttribute("data-ad-height","50");const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//t1.daumcdn.net/kas/static/ba.min.js",e.current&&(e.current.innerHTML="",e.current.appendChild(l),e.current.appendChild(t))},[]),(0,a.jsx)("div",{ref:e,className:"kakao-adfit-container"})}},840:(e,l,t)=>{t.r(l),t.d(l,{default:()=>De});var s=t(43),a=t(981),n=t(950),r=t(711),i=t(382),o=t(360),c=t(855),d=t(805),u=t(546),x=t(446),m=t(289);var h=t(346);const f={HERO:7,LEGEND:11,RELIC:15,ANCIENT:17},p={HERO:[10],LEGEND:[10,14],RELIC:[10,14,17,18,19,20],ANCIENT:[10,14,17,18,19,20]},g={HERO:"\uc601\uc6c5",LEGEND:"\uc804\uc124",RELIC:"\uc720\ubb3c",ANCIENT:"\uace0\ub300"},b=["HERO","LEGEND","RELIC","ANCIENT"],v={atk:"\uacf5\uaca9\ub825",add:"\ucd94\uac00 \ud53c\ud574",boss:"\ubcf4\uc2a4 \ud53c\ud574",brand:"\ub099\uc778\ub825",allyDmg:"\uc544\uad70 \ud53c\ud574 \uac15\ud654",allyAtk:"\uc544\uad70 \uacf5\uaca9 \uac15\ud654"},N=["atk","add","boss","brand","allyDmg","allyAtk"],j={dealer:new Set(["atk","add","boss"]),support:new Set(["brand","allyDmg","allyAtk"])},w={atk:1,add:1,boss:1,brand:1,allyDmg:1,allyAtk:1},y={boss:.07870909,add:.06018182,atk:.03407273,brand:0,allyDmg:0,allyAtk:0};function k(e){const l={...w};return e?(Object.keys(l).forEach(t=>{const s=e[t],a="number"===typeof s?s:Number(s);l[t]=Number.isFinite(a)&&a>=0?a:w[t]}),l):l}function L(e,l,t){var s,a,n,r;if(null==l)return 0;const i="dealer"===l?j.dealer:j.support;return(i.has(e.o1k)?(null!==(s=e.o1v)&&void 0!==s?s:0)*(null!==(a=t[e.o1k])&&void 0!==a?a:1):0)+(i.has(e.o2k)?(null!==(n=e.o2v)&&void 0!==n?n:0)*(null!==(r=t[e.o2k])&&void 0!==r?r:1):0)}function E(e,l){return p[e].filter(e=>l>=e)}function A(e,l,t,s){const a=e.reduce((e,l)=>{var t;return e+(null!==(t=l.will)&&void 0!==t?t:0)},0),n=e.reduce((e,l)=>{var t;return e+(null!==(t=l.point)&&void 0!==t?t:0)},0),r=E(l,n),i=e.reduce((e,l)=>e+L(l,t,s),0);return{totalWill:a,totalPoint:n,thr:r,roleSum:i,score:1e7*r.length+1e4*n+10*(5e3-a)+i-e.length}}var C=t(579);const S=[{value:"\ud574 \ucf54\uc5b4",label:"\ud574 \ucf54\uc5b4"},{value:"\ub2ec \ucf54\uc5b4",label:"\ub2ec \ucf54\uc5b4"},{value:"\ubcc4 \ucf54\uc5b4",label:"\ubcc4 \ucf54\uc5b4"}],M={order:"\uc9c8\uc11c",chaos:"\ud63c\ub3c8"},R="LoA-CoreOptimizer-v2",P=["\ud574 \ucf54\uc5b4","\ub2ec \ucf54\uc5b4","\ubcc4 \ucf54\uc5b4"];const $=()=>Math.random().toString(36).slice(2,9);function F(){try{const e=localStorage.getItem(R);return e?JSON.parse(e):null}catch(e){return console.warn("loadFromStorage fail",e),null}}const T="undefined"!==typeof document?document.body:null;function _(e){let{draggableId:l,index:t,children:s}=e;return(0,C.jsx)(m.sx,{draggableId:l,index:t,children:(e,l)=>{const t="function"===typeof s?s(e,l):s;return l.isDragging&&T?(0,n.createPortal)(t,T):t}})}function I(e){let{value:l,items:t,onChange:a,placeholder:o,className:c}=e;const[d,m]=(0,s.useState)(!1),[h,f]=(0,s.useState)(-1),p=(0,s.useRef)(null),g=(0,s.useRef)(null),b=(0,s.useRef)([]),v=(0,s.useRef)({top:0,left:0,width:0}),[,N]=(0,s.useState)(0),j=(0,s.useRef)(`dd-list-${Math.random().toString(36).slice(2)}`).current,w=(0,s.useCallback)(()=>{const e=t.findIndex(e=>e.value===l&&!e.disabled);if(e>=0)return e;const s=t.findIndex(e=>!e.disabled);return s>=0?s:-1},[t,l]);(0,s.useEffect)(()=>{const e=()=>m(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,l){const t=s.useMemo(()=>Array.isArray(e)?e:[e],[e]),a=s.useRef(l);s.useEffect(()=>{a.current=l},[l]),s.useEffect(()=>{const e=e=>{var l;t.some(l=>(null===l||void 0===l?void 0:l.current)&&l.current.contains(e.target))||null===(l=a.current)||void 0===l||l.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[t])}([p,g],()=>m(!1)),(0,s.useLayoutEffect)(()=>{if(!d||!p.current)return;const e=p.current.getBoundingClientRect();v.current={top:e.bottom+4,left:e.left,width:e.width},N(e=>e+1);const l=()=>{var e;const l=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();l&&(v.current={top:l.bottom+4,left:l.left,width:l.width},N(e=>e+1))};return window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[d]),(0,s.useEffect)(()=>{if(!d)return;f(w());const e=requestAnimationFrame(()=>{var e,l;const t=b.current[w()];null===(e=null!==t&&void 0!==t?t:g.current)||void 0===e||null===(l=e.focus)||void 0===l||l.call(e)});return()=>cancelAnimationFrame(e)},[d,w]);const y=t.find(e=>e.value===l),k=(e,l)=>{const s=t.length;if(0===s)return-1;let a=e;for(let n=0;n<s;n++)if(a=(a+l+s)%s,!t[a].disabled)return a;return-1},L=d?(0,C.jsx)(u.N,{children:(0,C.jsx)(x.P.ul,{ref:g,role:"listbox",id:j,tabIndex:-1,"aria-activedescendant":h>=0?`${j}-opt-${h}`:void 0,initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},style:{position:"fixed",top:v.current.top,left:v.current.left,width:v.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60 focus:outline-none",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();const l=h>=0?h:w(),t="ArrowDown"===e.key?k(l,1):k(l,-1);t>=0&&f(t)}else if("Home"===e.key){e.preventDefault();const l=t.findIndex(e=>!e.disabled);l>=0&&f(l)}else if("End"===e.key){e.preventDefault();let l=-1;for(let e=t.length-1;e>=0;e--)if(!t[e].disabled){l=e;break}l>=0&&f(l)}else if("Enter"===e.key||" "===e.key){e.preventDefault();const l=t[h];l&&!l.disabled&&(a(l.value),m(!1),requestAnimationFrame(()=>{var e,l,t;return null===(e=p.current)||void 0===e||null===(l=e.querySelector("button"))||void 0===l||null===(t=l.focus)||void 0===t?void 0:t.call(l)}))}else"Escape"===e.key?(e.preventDefault(),m(!1),requestAnimationFrame(()=>{var e,l,t;return null===(e=p.current)||void 0===e||null===(l=e.querySelector("button"))||void 0===l||null===(t=l.focus)||void 0===t?void 0:t.call(l)})):"Tab"===e.key&&m(!1)},children:t.map((e,t)=>{const s=e.value===l,n=t===h;return(0,C.jsx)("li",{children:(0,C.jsx)("button",{ref:e=>b.current[t]=e,id:`${j}-opt-${t}`,type:"button",role:"option","aria-selected":s,onMouseEnter:()=>(e=>f(e))(t),onClick:()=>{e.disabled||(a(e.value),m(!1),requestAnimationFrame(()=>{var e,l,t;return null===(e=p.current)||void 0===e||null===(l=e.querySelector("button"))||void 0===l||null===(t=l.focus)||void 0===t?void 0:t.call(l)}))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm\n                  ${e.disabled?"opacity-40 cursor-not-allowed":"hover:bg-gray-50"}\n                  ${s?"bg-gray-100":""}\n                  ${n?"outline-none ring-2 ring-[#a399f2]/40":""}\n                `,children:(0,C.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value))})},"menu")}):null;return(0,C.jsxs)("div",{ref:p,className:`relative min-w-0 ${c||""}`,children:[(0,C.jsxs)("button",{type:"button","aria-haspopup":"listbox","aria-expanded":d,"aria-controls":d?j:void 0,onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();if(!d)m(!0);else{const l=h>=0?h:w(),t="ArrowDown"===e.key?k(l,1):k(l,-1);t>=0&&f(t)}}else"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m(e=>!e))},onClick:()=>m(e=>!e),className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50",children:[(0,C.jsx)("span",{className:"truncate text-sm",children:y?y.label:o||"\uc120\ud0dd"}),(0,C.jsx)("span",{className:"text-gray-500 text-sm select-none",children:d?(0,C.jsx)(r.A,{size:16}):(0,C.jsx)(i.A,{size:16})})]}),d&&(0,n.createPortal)(L,document.body)]})}function D(e){let{toasts:l,onClose:t}=e;return(0,C.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none px-4",children:(0,C.jsx)(u.N,{children:l.map(e=>(0,C.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:"pointer-events-auto overflow-hidden rounded-2xl border shadow-lg bg-amber-50/95 border-amber-200 text-amber-900 backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw]",children:[(0,C.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,C.jsx)("button",{className:"text-sm font-medium text-amber-900/80 hover:text-amber-900 self-center",onClick:()=>t(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id))})})}function O(e){let{value:l,onChange:t,min:a,max:n,step:r=1,allowFloat:i=!1,zeroOnBlur:o=!0,className:c="",inputProps:d={}}=e;const u=e=>null===e||void 0===e?"":String(e),[x,m]=s.useState(u(l));s.useEffect(()=>{m(u(l))},[l]);const h=e=>{if(""===e)return o?null!==a&&void 0!==a?a:0:null;let l=Number(e);return Number.isFinite(l)?(l=i?l:Math.trunc(l),(e=>{let l=e;return null!=a&&l<a&&(l=a),null!=n&&l>n&&(l=n),l})(l)):o?null!==a&&void 0!==a?a:0:null};return(0,C.jsx)("input",{type:"number",inputMode:i?"decimal":"numeric",step:r,min:a,max:n,value:x,onChange:e=>{const l=e.target.value;if(""===l)return m(""),void(null===t||void 0===t||t(null));m(l);const s=Number(l);Number.isFinite(s)?null===t||void 0===t||t(i?s:Math.trunc(s)):null===t||void 0===t||t(null)},onBlur:()=>{const e=h(x);m(null==e?"":String(e)),null===t||void 0===t||t(e)},onWheel:e=>e.currentTarget.blur(),className:c,...d})}function z(){(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ud5ec\ud37c"},[]);const[e,l]=(0,s.useState)(()=>{var e,l;return null!==(e=null===(l=F())||void 0===l?void 0:l.category)&&void 0!==e?e:"order"}),[a,u]=(0,s.useState)(()=>{var e;const l=F();return null!==(e=null===l||void 0===l?void 0:l.coresByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[x,T]=(0,s.useState)(()=>{var e;const l=F();return null!==(e=null===l||void 0===l?void 0:l.gemsByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[z,B]=(0,s.useState)(null),[G,H]=(0,s.useState)({...w}),[q,W]=(0,s.useState)(null),[V,U]=(0,s.useState)(null),{toasts:K,push:Y,remove:J}=function(){const[e,l]=(0,s.useState)([]);return{toasts:e,push:e=>{const t=$();l(l=>[...l,{id:t,msg:e}]),setTimeout(()=>l(e=>e.filter(e=>e.id!==t)),2600)},remove:e=>l(l=>l.filter(l=>l.id!==e))}}(),[X,Z]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),le=(0,s.useRef)(!1),te=a[e],se=x[e],{isComputing:ae,progress:ne,results:re,calculate:ie,hasCalculated:oe}=function(e,l,a,r){const[i,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)({pct:0,label:"\uc900\ube44 \uc911\u2026",indeterminate:!0,phase:void 0,coreIndex:null,coreCount:null,coreDone:null,coreTotal:null,rate:null,elapsedMs:null,etaMs:null,pulse:0}),[f,p]=(0,s.useState)([]),g=(0,s.useRef)(null),b=(0,s.useRef)({cores:e,gems:l,role:a,weights:r});return(0,s.useEffect)(()=>{g.current=new Worker(new URL(t.p+t.u(290),t.b),{type:void 0});try{var e;null===(e=g.current)||void 0===e||e.postMessage({type:"kickoff"})}catch{}return()=>{var e;null===(e=g.current)||void 0===e||e.terminate(),g.current=null}},[]),(0,s.useEffect)(()=>{if(0===i)return;let e=!1;return setTimeout(()=>{e||(0,n.flushSync)(()=>{var e;x(!0),h({pct:0,label:"\ucd5c\uc801\uc758 \uc82c \uc870\ud569\uc744 \ucc3e\uace0 \uc788\uc2b5\ub2c8\ub2e4\u2026",indeterminate:!1,phase:"gen",coreIndex:null,coreCount:(null===(e=b.current.cores)||void 0===e?void 0:e.length)||null,coreDone:null,coreTotal:null,rate:null,elapsedMs:null,etaMs:null,pulse:0})})},0),(async()=>{try{await new Promise(e=>requestAnimationFrame(e));const l=g.current;if(!l)throw new Error("Worker not initialized");const t=s=>{if(e)return;const a=s.data||{};var n;if("error"===(null===a||void 0===a?void 0:a.type)||null!==a&&void 0!==a&&a.error)return console.error((null===(n=s.data)||void 0===n?void 0:n.error)||(null===a||void 0===a?void 0:a.error)),x(!1),h(e=>({...e,pct:0,label:"\uc5d0\ub7ec",indeterminate:!0})),void l.removeEventListener("message",t);if("progress"===a.type){const{done:e,total:l,indeterminate:t=!1,phase:s,coreIndex:n,coreCount:r,coreDone:i,coreTotal:o,rate:c,elapsedMs:d,etaMs:u,pulse:x}=a;if(t||!l||l<=0||null==e)h(e=>{var l;return{...e,pct:0,indeterminate:!0,phase:s,coreIndex:null!==n&&void 0!==n?n:e.coreIndex,coreCount:null!==r&&void 0!==r?r:e.coreCount,coreDone:null!==i&&void 0!==i?i:e.coreDone,coreTotal:null!==o&&void 0!==o?o:e.coreTotal,rate:null!==c&&void 0!==c?c:e.rate,elapsedMs:null!==d&&void 0!==d?d:e.elapsedMs,etaMs:null!==u&&void 0!==u?u:e.etaMs,pulse:null!==x&&void 0!==x?x:null!==(l=e.pulse)&&void 0!==l?l:0}});else{const t=Math.max(0,Math.min(100,Math.floor(e/Math.max(1,l)*100)));h(e=>({...e,pct:t,indeterminate:!1,phase:s,coreIndex:null!==n&&void 0!==n?n:e.coreIndex,coreCount:null!==r&&void 0!==r?r:e.coreCount,coreDone:null!==i&&void 0!==i?i:e.coreDone,coreTotal:null!==o&&void 0!==o?o:e.coreTotal,rate:null!==c&&void 0!==c?c:e.rate,elapsedMs:null!==d&&void 0!==d?d:e.elapsedMs,etaMs:null!==u&&void 0!==u?u:e.etaMs,pulse:void 0}))}return}if("result"===a.type){const{picks:e}=a;return p(e||[]),x(!1),h(e=>({...e,pct:100,label:"\uc644\ub8cc",indeterminate:!1,pulse:void 0})),void l.removeEventListener("message",t)}};l.addEventListener("message",t);const{cores:s,gems:a,role:n,weights:r}=b.current,i=a.length>60?800:a.length>45?1200:a.length>30?1600:2e3;l.postMessage({type:"run",cores:s,gems:a,role:n,weights:r,perCoreLimit:i})}catch(l){e||(console.error(l),x(!1))}})(),()=>{e=!0}},[i]),{isComputing:u,progress:m,results:f,calculate:(0,s.useCallback)(()=>{b.current={cores:e,gems:l,role:a,weights:r},o(e=>e+1),d(!0)},[e,l,a,r]),hasCalculated:c}}(te,se,z,G);(0,s.useEffect)(()=>{re&&re.length>0&&ee(!1)},[re]);const ce=l=>{u(t=>{const s="function"===typeof l?l(t[e]):l;return ee(!0),{...t,[e]:s}})},de=l=>{T(t=>{const s="function"===typeof l?l(t[e]):l;return ee(!0),{...t,[e]:s}})};(0,s.useEffect)(()=>{le.current?ee(!0):le.current=!0},[z,G,e]);const ue=(e,l)=>de(t=>t.map(t=>t.id===e?{...t,...l}:t)),xe=(e,l)=>ce(t=>{if("name"in l){if(t.some(t=>t.id!==e&&t.name===l.name))return Y(`${l.name}\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucf54\uc5b4\uc785\ub2c8\ub2e4`),t}return t.map(t=>t.id===e?{...t,...l}:t)}),[me,he]=(0,s.useState)(!1),fe="h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white",pe="text-base font-semibold whitespace-nowrap",ge="bg-white rounded-2xl shadow-sm",be="px-2.5 py-1.5 rounded-xl bg-gray-100 text-xs lg:text-[13px]",ve="block text-xs text-gray-500 mb-1",Ne=e=>e+1,je=(e,l)=>l-e;function we(e){let{onAdd:l,focusOnMount:t=!1}=e;const[a,n]=(0,s.useState)("atk"),[r,i]=(0,s.useState)("add"),[c,d]=(0,s.useState)(0),[u,x]=(0,s.useState)(0),[m,h]=(0,s.useState)(0),[f,p]=(0,s.useState)(0),g=(0,s.useRef)(null),b=(0,s.useRef)(!1),j="quick-pad-will-input";(0,s.useEffect)(()=>{t&&requestAnimationFrame(()=>{var e,l,t,s;null===(e=g.current)||void 0===e||null===(l=e.focus)||void 0===l||l.call(e),null===(t=g.current)||void 0===t||null===(s=t.select)||void 0===s||s.call(t)})},[t]);const w=e=>{var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e);const s=$();l({id:s,will:Number.isFinite(m)?m:0,point:Number.isFinite(f)?f:0,o1k:a,o1v:Number.isFinite(c)?c:0,o2k:r,o2v:Number.isFinite(u)?u:0}),b.current&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(g.current)try{var e,l;return g.current.focus(),void(null===(e=(l=g.current).select)||void 0===e||e.call(l))}catch{}const t=document.getElementById(j);var s;t&&(t.focus(),null===(s=t.select)||void 0===s||s.call(t))})}),b.current=!1)},y=e=>{"Enter"!==e.key||e.shiftKey||(b.current=!0,w(e))};return(0,C.jsxs)("form",{onSubmit:w,children:[(0,C.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white",children:[(0,C.jsx)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",title:"\ube60\ub978 \ucd94\uac00",children:(0,C.jsx)(o.A,{size:18})}),(0,C.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,C.jsx)(O,{value:m,onChange:h,min:0,max:9,step:1,allowFloat:!1,className:`${fe} w-full lg:w-24`,inputProps:{id:j,title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825",onKeyDown:y,ref:g}})]}),(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,C.jsx)(O,{value:f,onChange:p,min:0,max:9,step:1,allowFloat:!1,className:`${fe} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8",onKeyDown:y}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 1"}),(0,C.jsx)(I,{className:"w-full lg:w-44",value:a,onChange:e=>n(e),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(O,{value:c,onChange:d,min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0",onKeyDown:y}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 2"}),(0,C.jsx)(I,{className:"w-full lg:w-44",value:r,onChange:e=>i(e),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(O,{value:u,onChange:x,min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0",onKeyDown:y}})]})]}),(0,C.jsx)("div",{className:"top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,C.jsxs)("button",{type:"submit",onClick:()=>{b.current=!0},className:"h-10 w-full lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",title:"Enter\ub85c\ub3c4 \ucd94\uac00 \uac00\ub2a5",children:[(0,C.jsx)(o.A,{size:16}),(0,C.jsx)("span",{className:"inline",children:" \uc82c \ucd94\uac00"})]})})]}),(0,C.jsxs)("div",{className:"relative flex items-center my-4",children:[(0,C.jsx)("div",{className:"flex-grow border-t"}),(0,C.jsx)("span",{className:"mx-3 text-sm text-gray-600",children:"\uc544\ub798\uc5d0\uc11c \ucd94\uac00\ud55c \uc82c\ub4e4\uc744 \ud655\uc778\ud558\uc138\uc694."}),(0,C.jsx)("div",{className:"flex-grow border-t"})]})]})}return(0,s.useEffect)(()=>{!function(){try{var e;const l=k({atk:2,add:"3",boss:-1});console.assert(2===l.atk&&3===l.add&&1===l.boss,"sanitizeWeights failed");const t={id:"t1",will:1,point:1,o1k:"atk",o1v:2,o2k:"brand",o2v:3};console.assert(L(t,"dealer",l)===2*l.atk,"scoreGemForRole dealer failed"),console.assert(L(t,"support",l)===3*(null!==(e=l.brand)&&void 0!==e?e:1),"scoreGemForRole support failed"),console.assert(E("RELIC",20).includes(20)&&0===E("RELIC",9).length,"thresholdsHit failed");const s=A([t],"RELIC","dealer",l),a=A([t,{...t,id:"t2",will:0,point:10}],"RELIC","dealer",l);console.assert(a.score>=s.score,"scoreCombo monotonicity failed"),console.log("\u2705 Self-tests passed")}catch(l){console.warn("\u274c Self-tests encountered an error",l)}}()},[]),(0,s.useEffect)(()=>{!function(e){try{localStorage.setItem(R,JSON.stringify(e))}catch(l){console.warn("saveToStorage fail",l)}}({category:e,coresByCat:a,gemsByCat:x,role:z,weights:G})},[e,a,x,z,G]),(0,C.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,C.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .btn-primary{ background: #000000; color:#fff; border:none; }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n        .ring-primary:focus{ outline:none; box-shadow:0 0 0 2px rgba(163,153,242,.35); }\n        @keyframes loa-marquee { 0%{ transform: translateX(-100%);} 100%{ transform: translateX(300%);} }\n        .animate-loa-marquee{ animation: loa-marquee 1.2s cubic-bezier(.4,0,.2,1) infinite; }\n      "}),(0,C.jsx)("style",{children:"button{cursor:pointer}"}),(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,C.jsx)("section",{className:"py-2 lg:py-3",children:(0,C.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,C.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ub3c4\uc6b0\ubbf8"}),(0,C.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:[(0,C.jsx)("button",{onClick:()=>l("order"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("order"===e?"bg-white":"bg-white/70"),title:"\uc9c8\uc11c \uce74\ud14c\uace0\ub9ac",children:M.order}),(0,C.jsx)("button",{onClick:()=>l("chaos"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("chaos"===e?"bg-white":"bg-white/70"),title:"\ud63c\ub3c8 \uce74\ud14c\uace0\ub9ac",children:M.chaos})]})]})}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 !mt-2 ${me?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,C.jsxs)("h2",{className:pe,children:[M[e]," \ucf54\uc5b4 \uc785\ub825"]}),(0,C.jsx)("div",{className:"flex items-center gap-2 ml-auto whitespace-nowrap",children:(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90 ring-primary",onClick:()=>ce(e=>{if(e.length>=3)return Y("\ucf54\uc5b4\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc5b4\uc694."),e;const l=function(e){for(const l of P)if(!e.has(l))return l;return null}(new Set(e.map(e=>e.name)));if(!l)return Y("\ud574/\ub2ec/\ubcc4 \ucf54\uc5b4\uac00 \ubaa8\ub450 \ucd94\uac00\ub418\uc5b4 \uc788\uc5b4\uc694."),e;const t=$();return W(t),[{id:t,name:l,grade:"RELIC",minThreshold:void 0,enforceMin:!1},...e]}),"aria-label":"\ucf54\uc5b4 \ucd94\uac00",children:[(0,C.jsx)(o.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \ucf54\uc5b4 \ucd94\uac00"})]})})]}),(0,C.jsxs)("p",{className:"hidden lg:block text-xs text-gray-600",children:["\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,C.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,C.jsxs)("p",{className:"block lg:hidden text-xs text-gray-600",children:["\ud654\uc0b4\ud45c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,C.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,C.jsxs)("div",{className:"mt-3",children:[(0,C.jsx)(m.JY,{onDragStart:()=>{requestAnimationFrame(()=>he(!0));const e=new Event("close-all-dropdowns");window.dispatchEvent(e)},onDragEnd:e=>{requestAnimationFrame(()=>he(!1)),e.destination&&ce(l=>{const t=Array.from(l),[s]=t.splice(e.source.index,1);return t.splice(e.destination.index,0,s),t})},children:(0,C.jsx)(m.gL,{droppableId:"cores-droppable",ignoreContainerClipping:!0,children:e=>(0,C.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"flex flex-col gap-3",children:[te.map((e,l)=>{const t=f[e.grade],s=[{value:"",label:"(\uc120\ud0dd \uc548 \ud568)"}].concat(p[e.grade].map(e=>({value:String(e),label:`${e}P`}))),a=new Set(te.filter(l=>l.id!==e.id).map(e=>e.name)),n=S.map(e=>({...e,disabled:a.has(e.value)}));return(0,C.jsx)(_,{draggableId:e.id,index:l,children:a=>{var o;return(0,C.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-end border rounded-xl p-3 bg-white overflow-visible "+(e.id===q?"LoA-highlight":""),style:a.draggableProps.style,children:[(0,C.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl self-start lg:self-center",children:["#",Ne(l)]}),(0,C.jsxs)("div",{className:"flex flex-col min-w-[120px] w-full lg:w-40",children:[(0,C.jsx)("label",{className:ve,children:"\ucf54\uc5b4 \uc885\ub958"}),(0,C.jsx)(I,{className:"w-full lg:w-40",value:e.name,onChange:l=>xe(e.id,{name:l}),items:n,placeholder:"\ucf54\uc5b4\uba85"})]}),(0,C.jsxs)("div",{className:"flex flex-col min-w-[160px] w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\ucf54\uc5b4 \ub4f1\uae09"}),(0,C.jsx)(I,{className:"w-full lg:w-40",value:e.grade,onChange:l=>xe(e.id,{grade:l}),items:b.map(e=>({value:e,label:g[e]})),placeholder:"\ucf54\uc5b4 \ub4f1\uae09"})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\uacf5\uae09 \uc758\uc9c0\ub825"}),(0,C.jsx)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center",children:(0,C.jsx)("span",{className:"text-primary font-semibold",children:t})})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsx)("label",{className:ve,children:"\ubaa9\ud45c \uad6c\uac04"}),(0,C.jsx)(I,{className:"w-full lg:w-40",value:String(null!==(o=e.minThreshold)&&void 0!==o?o:""),onChange:l=>{xe(e.id,l?{minThreshold:Number(l)}:{minThreshold:void 0})},items:s,placeholder:"\ubaa9\ud45c \ud3ec\uc778\ud2b8 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{id:`enf-${e.id}`,type:"checkbox",className:"accent-primary",checked:e.enforceMin,onChange:l=>xe(e.id,{enforceMin:l.target.checked})}),(0,C.jsx)("label",{htmlFor:`enf-${e.id}`,className:"text-sm",children:"\uc120\ud0dd\ud55c \ud3ec\uc778\ud2b8 \uc774\uc0c1\uc73c\ub85c \ud0d0\uc0c9"})]}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uccb4\ud06c \ud574\uc81c \uc2dc, \ubaa9\ud45c \ud3ec\uc778\ud2b8\uc640",(0,C.jsx)("br",{className:"hidden lg:block"}),(0,C.jsx)("b",{className:"text-primary",children:"\uc815\ud655\ud788 \uc77c\uce58\ud558\ub294 \uc870\ud569\ub9cc \uacc4\uc0b0"}),"\ud569\ub2c8\ub2e4."]})]}),(0,C.jsxs)("div",{className:"lg:ml-auto lg:static absolute top-2 right-2 flex items-center gap-1",children:[(0,C.jsx)("div",{className:"hidden lg:hidden"}),(0,C.jsxs)("div",{className:"flex lg:hidden flex-row gap-1 mr-1",children:[(0,C.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=l,ce(l=>{if(e<=0)return l;const t=[...l];return[t[e-1],t[e]]=[t[e],t[e-1]],t});var e},"aria-label":"\uc704\ub85c",children:(0,C.jsx)(r.A,{size:16})}),(0,C.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=l,ce(l=>{if(e>=l.length-1)return l;const t=[...l];return[t[e+1],t[e]]=[t[e],t[e+1]],t});var e},"aria-label":"\uc544\ub798\ub85c",children:(0,C.jsx)(i.A,{size:16})})]}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return l=e.id,ce(e=>e.length<=0?e:e.filter(e=>e.id!==l)),void(q===l&&W(null));var l},disabled:te.length<=0,"aria-label":"\ucf54\uc5b4 \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})]})]})}},e.id)}),e.placeholder]})})}),0===te.length&&(0,C.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\ucf54\uc5b4\ub97c \ucd94\uac00\ud558\uc138\uc694. (\ucd5c\ub300 3\uac1c\uc758 \ucf54\uc5b4\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)"})]})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${me?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 "+(X?"":"mb-3"),children:[(0,C.jsxs)("h2",{className:pe,children:[M[e]," \uc82c \uc785\ub825"]}),(0,C.jsxs)("div",{className:"flex items-center gap-2 ml-1",children:[(0,C.jsx)("span",{className:"text-xs text-gray-600",children:"\ube60\ub974\uac8c \ucd94\uac00"}),(0,C.jsx)("button",{type:"button",role:"switch","aria-checked":X,onClick:()=>Z(e=>!e),className:"relative inline-flex h-6 w-11 items-center rounded-full transition "+(X?"bg-[#a399f2]":"bg-gray-300"),"aria-label":"\ube60\ub974\uac8c \ucd94\uac00 \ubaa8\ub4dc",children:(0,C.jsx)("span",{className:"inline-block h-4 w-5 transform rounded-full bg-white shadow transition "+(X?"translate-x-5":"translate-x-1")})})]}),(0,C.jsxs)("div",{className:"flex gap-2 ml-auto whitespace-nowrap",children:[!X&&(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>{const e=$();de(l=>[{id:e,will:null,point:null,o1k:"atk",o1v:0,o2k:"add",o2v:0},...l]),U(e)},"aria-label":"\uc82c \ucd94\uac00",children:[(0,C.jsx)(o.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc82c \ucd94\uac00"})]}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>de([]),"aria-label":"\uc804\uccb4 \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc804\uccb4 \uc0ad\uc81c"})]})]})]}),X&&(0,C.jsx)("p",{className:"text-[11px] text-gray-500 mb-3",children:"Tab \ud0a4\ub85c \uc785\ub825 \uce78\uc744 \uc774\ub3d9\ud560 \uc218 \uc788\uace0, Enter \ud0a4\ub85c \ube60\ub974\uac8c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),X&&(0,C.jsx)("div",{className:"mb-3",children:(0,C.jsx)(we,{autoFocus:!0,onAdd:e=>{de(l=>[e,...l]),U(e.id),ee(!0)}})}),(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[se.map((e,l)=>(0,C.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white "+(e.id===V?"LoA-highlight":""),children:[(0,C.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",children:["#",je(l,se.length)]}),(0,C.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,C.jsx)(O,{value:e.will,onChange:l=>ue(e.id,{will:l}),min:0,max:9,step:1,allowFloat:!1,className:`${fe} w-full lg:w-24`,inputProps:{title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825"}})]}),(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,C.jsx)(O,{value:e.point,onChange:l=>ue(e.id,{point:l}),min:0,max:9,step:1,allowFloat:!1,className:`${fe} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8"}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 1"}),(0,C.jsx)(I,{className:"w-full lg:w-44",value:e.o1k,onChange:l=>ue(e.id,{o1k:l}),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(O,{value:e.o1v,onChange:l=>ue(e.id,{o1v:l}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,C.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,C.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,C.jsx)("label",{className:ve,children:"\uc635\uc158 2"}),(0,C.jsx)(I,{className:"w-full lg:w-44",value:e.o2k,onChange:l=>ue(e.id,{o2k:l}),items:N.map(e=>({value:e,label:v[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,C.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,C.jsx)("label",{className:ve,children:"\uc218\uce58"}),(0,C.jsx)(O,{value:e.o2v,onChange:l=>ue(e.id,{o2v:l}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,C.jsx)("div",{className:"lg:static absolute top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return l=e.id,de(e=>e.filter(e=>e.id!==l)),void(V===l&&U(null));var l},"aria-label":"\uc82c \uc0ad\uc81c",children:[(0,C.jsx)(c.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})})]},e.id)),0===se.length&&(0,C.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\uc82c\uc744 \ucd94\uac00\ud558\uc138\uc694."})]})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${me?"":"backdrop-blur"}`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,C.jsx)("h2",{className:pe,children:"\uc720\ud6a8\uc635\uc158 \uac00\uc911\uce58"}),(0,C.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>H({...w}),"aria-label":"\uac00\uc911\uce58 \ucd08\uae30\ud654",children:[(0,C.jsx)(d.A,{size:16}),(0,C.jsx)("span",{className:"hidden lg:inline",children:" \uac00\uc911\uce58 \ucd08\uae30\ud654"})]})]}),(0,C.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm",children:[(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"\ud3ec\uc9c0\uc158 \uc120\ud0dd"}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",name:"role",checked:"dealer"===z,onChange:()=>{B("dealer"),H({...y})},className:"accent-primary"}),"\ub51c\ub7ec"]}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",name:"role",checked:"support"===z,onChange:()=>{B("support"),H(e=>function(e,l){const t={...e};return("dealer"===l?j.support:j.dealer).forEach(e=>{t[e]=0}),j[l].forEach(e=>{t[e]=1}),t}(e,"support"))},className:"accent-primary"}),"\uc11c\ud3ec\ud130"]})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsx)("div",{className:"grid grid-cols-2 gap-2 lg:flex lg:flex-nowrap text-sm min-w-0",children:N.map(e=>(0,C.jsxs)("div",{className:"bg-gray-50 border rounded-xl px-2 py-2 w-full lg:w-1/6 min-w-[120px]",children:[(0,C.jsx)("label",{className:ve,children:v[e]}),(0,C.jsx)(O,{value:G[e],onChange:l=>H(t=>({...t,[e]:l})),min:0,max:5,step:1e-7,allowFloat:!0,className:"h-10 w-full px-2 rounded-md border bg-white focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50"})]},e))})})]}),(0,C.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[Q&&!ae&&oe&&(0,C.jsxs)("span",{className:"inline-block text-[11px] px-3 py-1.5 rounded-lg bg-red-100 text-red-800 border border-red-200 text-center lg:text-left",children:["\uc785\ub825\uac12\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. ",(0,C.jsx)("b",{children:"\uacc4\uc0b0\ud558\uae30"})," \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub2e4\uc2dc \uacc4\uc0b0\ud574 \uc8fc\uc138\uc694."]}),(0,C.jsx)("div",{className:"flex items-center gap-2 lg:ml-auto w-full lg:w-auto",children:(0,C.jsx)("button",{type:"button",onClick:ie,disabled:ae,className:"h-10 w-full lg:w-[120px] px-0 lg:px-3 rounded-xl ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",children:ae?"\uacc4\uc0b0 \uc911\u2026":"\uacc4\uc0b0\ud558\uae30"})})]}),(0,C.jsxs)("section",{className:`${ge} p-4 lg:p-6 ${me?"":"backdrop-blur"}`,children:[(0,C.jsx)("h2",{className:pe,children:"\uacb0\uacfc"}),(0,C.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["\ucf54\uc5b4 1\uac1c\ub2f9 \ucd5c\ub300 ",(0,C.jsx)("b",{children:"\uc82c 4\uac1c"}),"\uae4c\uc9c0 \uc7a5\ucc29\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),!ae&&Q&&oe&&(0,C.jsxs)("p",{className:"text-xs text-red-700 mt-1",children:["\uc785\ub825\uac12\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc6b0\uce21 \uc0c1\ub2e8\uc758 ",(0,C.jsx)("b",{children:"\uacc4\uc0b0\ud558\uae30"})," \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub2e4\uc2dc \uacc4\uc0b0\ud574 \uc8fc\uc138\uc694."]}),(0,C.jsx)("div",{className:"space-y-4 mt-2",children:te.map((e,l)=>{const t=f[e.grade],s=null===re||void 0===re?void 0:re[l],a=!!(s&&s.list&&s.list.length>0),n=Math.min(...p[e.grade]);return(0,C.jsxs)("div",{className:"border rounded-xl p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,C.jsxs)("div",{className:"text-base font-semibold",children:[e.name," ",(0,C.jsxs)("span",{className:"text-sm text-gray-500",children:["(",g[e.grade],")"]})]}),a&&(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-[12px] lg:text-[13px]",children:[(0,C.jsxs)("div",{className:be,children:["\ucd1d \uc758\uc9c0\ub825 ",(0,C.jsx)("span",{className:"font-semibold",children:String(s.totalWill)})," / \uacf5\uae09 ",(0,C.jsx)("span",{children:String(t)})," (",(0,C.jsxs)("span",{children:["\ub098\uba38\uc9c0 ",String(t-s.totalWill)]}),")"]}),(0,C.jsxs)("div",{className:be,children:["\ucd1d \ud3ec\uc778\ud2b8 ",(0,C.jsx)("span",{className:"font-semibold",children:String(s.totalPoint)})]}),(()=>{const e=s.thr.length?Math.max(...s.thr):null;return(0,C.jsxs)("div",{className:be,children:["\ub2ec\uc131 \uad6c\uac04 ",(0,C.jsx)("span",{className:"font-semibold",children:null!=e?String(e):"\uc5c6\uc74c"})]})})(),(0,C.jsxs)("div",{className:be,children:["dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 ",(0,C.jsxs)("span",{className:"font-semibold text-primary",children:[String(s.roleSum.toFixed(4)),"%"]})]})]})]}),a?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"hidden lg:block overflow-x-auto mt-2",children:(0,C.jsxs)("table",{className:"min-w-full text-sm",children:[(0,C.jsxs)("colgroup",{children:[(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"13%"}),(0,C.jsx)("col",{width:"24%"}),(0,C.jsx)("col",{width:"24%"}),(0,C.jsx)("col",{width:"13%"})]}),(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc120\ud0dd"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc758\uc9c0\ub825"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1581"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1582"}),(0,C.jsx)("th",{className:"px-2 py-2",children:"dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 "})]})}),(0,C.jsx)("tbody",{children:s.list.map(e=>{var l,t,s;const a=se.findIndex(l=>l.id===e.id),n=je(a,se.length);return(0,C.jsxs)("tr",{className:"border-t",children:[(0,C.jsxs)("td",{className:"px-2 py-2",children:["#",String(n)]}),(0,C.jsx)("td",{className:"px-2 py-2",children:String(null!==(l=null!==(t=e.wwill)&&void 0!==t?t:e.will)&&void 0!==l?l:0)}),(0,C.jsx)("td",{className:"px-2 py-2",children:String(null!==(s=e.point)&&void 0!==s?s:0)}),(0,C.jsxs)("td",{className:"px-2 py-2",children:[v[e.o1k]," ",String(e.o1v)]}),(0,C.jsxs)("td",{className:"px-2 py-2",children:[v[e.o2k]," ",String(e.o2v)]}),(0,C.jsxs)("td",{className:"px-2 py-2 text-primary",children:[String(L(e,z,k(G)).toFixed(4)),"%"]})]},e.id)})})]})}),(0,C.jsx)("div",{className:"lg:hidden mt-2 space-y-2",children:s.list.map(e=>{const l=se.findIndex(l=>l.id===e.id),t=je(l,se.length);return(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,C.jsxs)("div",{className:"font-medium",children:["#",String(t)]}),(0,C.jsxs)("div",{className:"text-xs text-primary",children:["dealer"===z?"\uc608\uc0c1 \ub51c \uc99d\uac00\ub7c9 (\uc82c) ":"support"===z?"\uc608\uc0c1 \uc9c0\uc6d0 \uc99d\uac00\ub7c9 (\uc82c) ":"\uc720\ud6a8 \uc635\uc158 \ud569 "," ",String(L(e,z,k(G)).toFixed(4)),"%"]})]}),(0,C.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-sm",children:[(0,C.jsx)("div",{className:"text-gray-500",children:"\uc758\uc9c0\ub825"}),(0,C.jsx)("div",{children:String(e.will)}),(0,C.jsx)("div",{className:"text-gray-500",children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)("div",{className:"text-primary",children:String(e.point)}),(0,C.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1581"}),(0,C.jsxs)("div",{children:[v[e.o1k]," ",String(e.o1v)]}),(0,C.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1582"}),(0,C.jsxs)("div",{children:[v[e.o2k]," ",String(e.o2v)]})]})]},e.id)})})]}):(0,C.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:["\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. (\uc774 \ucf54\uc5b4\uc5d0 \ubc30\uc815 \uac00\ub2a5\ud55c \uc870\ud569\uc774 \uc5c6\uac70\ub098, \ubaa9\ud45c \uad6c\uac04\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.",null==e.minThreshold?` / \ucd5c\uc18c ${n}P \uc790\ub3d9 \uc801\uc6a9\uc911`:"",")"]})]},e.id)})})]})]}),(0,C.jsx)(D,{toasts:K,onClose:J}),(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)(h.A,{})}),ae&&(0,C.jsx)("div",{className:"fixed inset-0 z-[99999] bg-black/35 backdrop-blur-[1px] flex items-center justify-center px-6",children:(0,C.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white/95 border shadow p-4",children:[(0,C.jsx)("div",{className:"text-sm font-medium text-gray-800 mb-2",children:ne.label}),(0,C.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden relative",children:ne.indeterminate?(0,C.jsx)("div",{className:"absolute inset-0",children:(0,C.jsx)("div",{className:"h-full w-1/3 bg-[#a399f2] animate-loa-marquee rounded-full"})}):(0,C.jsx)("div",{className:"h-full bg-[#a399f2] transition-[width] duration-100",style:{width:`${ne.pct}%`}})}),(0,C.jsx)("div",{className:"mt-2 text-right text-xs text-gray-600",children:ne.indeterminate?null!=ne.pulse?Number(ne.pulse).toLocaleString():"":`${ne.pct}%`})]})})]})}var B=t(596),G=t(693),H=t(899),q=t(829),W=t(655);const V=!0,U=!0,K=!0,Y={LEGEND_MIN:4,LEGEND_MAX:15,RELIC_MIN:16,RELIC_MAX:18,ANCIENT_MIN:19},J={"\uc9c8\uc11c-\uc548\uc815":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\uc9c8\uc11c-\uacac\uace0":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\uc9c8\uc11c-\ubd88\ubcc0":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\uce68\uc2dd":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\ud63c\ub3c8-\uc65c\uace1":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\ubd95\uad34":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]}},X={"\uace0\uae09":5,"\ud76c\uadc0":7,"\uc601\uc6c5":9},Z={"\uace0\uae09":0,"\ud76c\uadc0":1,"\uc601\uc6c5":2},Q=1,ee=5,le=900,te=[{value:1e3,label:"1,000\ud68c (\ube60\ub984)"},{value:5e3,label:"5,000\ud68c (\ubcf4\ud1b5)"},{value:1e4,label:"10,000\ud68c (\ucd94\ucc9c)"},{value:5e4,label:"50,000\ud68c (\uc815\ubc00)"}];function se(e){let l=2166136261;for(let t=0;t<e.length;t++)l^=e.charCodeAt(t),l=Math.imul(l,16777619);return l>>>0}function ae(e){return se(JSON.stringify(e))||1}function ne(e){let l=e>>>0;return function(){return l^=l<<13,l>>>=0,l^=l>>>17,l>>>=0,l^=l<<5,l>>>=0,(l>>>0)/4294967296}}const re=e=>!(Number(e)>0),ie=e=>Number(e)>=1,oe=(e,l,t)=>Math.max(l,Math.min(t,e));function ce(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return 1-Math.pow(l,1/e)}const de=e=>e>=2e5?1e-4:e>=1e5?2e-4:e>=5e4?3e-4:e>=1e4?5e-4:e>=5e3?7e-4:.001,ue=e=>e>=5e4?1e3:e>=1e4?800:e>=5e3?600:400;function xe(e){const l=Number(e);return!Number.isFinite(l)||l<=0?"0%":l>=1?"100.00000%":(100*l).toFixed(5)+"%"}const me=e=>xe(e),he=e=>e.toLocaleString();function fe(e,l){return!Number.isFinite(e)||e<=0?0:!Number.isFinite(l)||l<=0?1/0:e/l}const pe=e=>`${Math.max(0,Math.min(100,Math.round(100*(Number(e)||0))))}%`;function ge(e){return e>=.2?{label:"\ub0ae\uc74c",tone:"bg-emerald-50 border-emerald-200 text-emerald-800"}:e>=.05?{label:"\ubcf4\ud1b5",tone:"bg-amber-50 border-amber-200 text-amber-800"}:e>=.01?{label:"\ub192\uc74c",tone:"bg-orange-50 border-orange-200 text-orange-800"}:{label:"\ub9e4\uc6b0 \ub192\uc74c",tone:"bg-rose-50 border-rose-200 text-rose-800"}}function be(e,l){if(l<=0)return 0;if(0===e)return 0;if(e===l)return 1;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mle"){case"laplace":return(e+1)/(l+2);case"jeffreys":return(e+.5)/(l+1);default:return e/l}}function ve(e,l){const t=J[e];return t?"\uacf5\uaca9\ud615"===l?t.attack:"\uc9c0\uc6d0\ud615"===l?t.support:[...t.attack,...t.support]:[]}const Ne=e=>e.eff+e.pts+e.aLvl+e.bLvl;function je(e){return e>=Y.ANCIENT_MIN?"\uace0\ub300":e>=Y.RELIC_MIN&&e<=Y.RELIC_MAX?"\uc720\ubb3c":e>=Y.LEGEND_MIN&&e<=Y.LEGEND_MAX?"\uc804\uc124":"\ub4f1\uae09 \ubbf8\ub9cc"}function we(e,l,t,s,a,n){const r=t.eff>=s.eff&&t.pts>=s.pts;if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=ve(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,u=(e,l,t,s)=>o(t)?i.includes(e)&&l>=s:e===t&&l>=s;if("ANY_ONE"===l){const e=c&&(u(t.aName,t.aLvl,c,s.aLvl)||u(t.bName,t.bLvl,c,s.aLvl));return r&&!!e}return!(!c||!d)&&(r&&(u(t.aName,t.aLvl,c,s.aLvl)&&u(t.bName,t.bLvl,d,s.bLvl)||u(t.aName,t.aLvl,d,s.bLvl)&&u(t.bName,t.bLvl,c,s.aLvl)))}function ye(e){return 1!==e}function ke(e,l,t,s,a){const n=e,r=[];n.eff<5&&r.push({slot:{kind:"EFF",delta:1},w:11.65}),n.eff<=3&&r.push({slot:{kind:"EFF",delta:2},w:4.4}),n.eff<=2&&r.push({slot:{kind:"EFF",delta:3},w:1.75}),n.eff<=1&&r.push({slot:{kind:"EFF",delta:4},w:.45}),ye(n.eff)&&r.push({slot:{kind:"EFF",delta:-1},w:3}),n.pts<5&&r.push({slot:{kind:"PTS",delta:1},w:11.65}),n.pts<=3&&r.push({slot:{kind:"PTS",delta:2},w:4.4}),n.pts<=2&&r.push({slot:{kind:"PTS",delta:3},w:1.75}),n.pts<=1&&r.push({slot:{kind:"PTS",delta:4},w:.45}),ye(n.pts)&&r.push({slot:{kind:"PTS",delta:-1},w:3}),n.aLvl<5&&r.push({slot:{kind:"A_LVL",delta:1},w:11.65}),n.aLvl<=3&&r.push({slot:{kind:"A_LVL",delta:2},w:4.4}),n.aLvl<=2&&r.push({slot:{kind:"A_LVL",delta:3},w:1.75}),n.aLvl<=1&&r.push({slot:{kind:"A_LVL",delta:4},w:.45}),ye(n.aLvl)&&r.push({slot:{kind:"A_LVL",delta:-1},w:3}),n.bLvl<5&&r.push({slot:{kind:"B_LVL",delta:1},w:11.65}),n.bLvl<=3&&r.push({slot:{kind:"B_LVL",delta:2},w:4.4}),n.bLvl<=2&&r.push({slot:{kind:"B_LVL",delta:3},w:1.75}),n.bLvl<=1&&r.push({slot:{kind:"B_LVL",delta:4},w:.45}),ye(n.bLvl)&&r.push({slot:{kind:"B_LVL",delta:-1},w:3});const i=ve(s,"\uc0c1\uad00 \uc5c6\uc74c"),o=i.filter(e=>e!==n.bName&&e!==n.aName).length>0,c=i.filter(e=>e!==n.aName&&e!==n.bName).length>0;return o&&r.push({slot:{kind:"A_CHANGE"},w:3.25}),c&&r.push({slot:{kind:"B_CHANGE"},w:3.25}),l>1&&(1!==a&&r.push({slot:{kind:"COST",mod:1},w:1.75}),-1!==a&&r.push({slot:{kind:"COST",mod:-1},w:1.75}),r.push({slot:{kind:"REROLL_PLUS",amount:1},w:2.5}),r.push({slot:{kind:"REROLL_PLUS",amount:2},w:.75})),r.push({slot:{kind:"HOLD"},w:1.75}),r}function Le(e,l){switch(e.kind){case"EFF":return"\uc758\uc9c0\ub825 \ud6a8\uc728 "+(e.delta>0?"+"+e.delta:"-1");case"PTS":return"\ud3ec\uc778\ud2b8 "+(e.delta>0?"+"+e.delta:"-1");case"A_LVL":return`${l.aName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"B_LVL":return`${l.bName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"A_CHANGE":return`${l.aName} \ud6a8\uacfc \ubcc0\uacbd`;case"B_CHANGE":return`${l.bName} \ud6a8\uacfc \ubcc0\uacbd`;case"COST":return 1===e.mod?"\uac00\uacf5 \ube44\uc6a9 +100% \uc99d\uac00":"\uac00\uacf5 \ube44\uc6a9 -100% \uac10\uc18c";case"HOLD":return"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0";case"REROLL_PLUS":return"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 "+(2===e.amount?"+2\ud68c":"+1\ud68c");default:return""}}function Ee(e,l){const t=e=>e.includes("-1")?-1:parseInt(e.replace(/[^0-9]/g,""),10)||1;return(e=e.trim()).startsWith("\uc758\uc9c0\ub825 \ud6a8\uc728")?{kind:"EFF",delta:t(e)}:e.startsWith("\ud3ec\uc778\ud2b8")?{kind:"PTS",delta:t(e)}:e.startsWith(l.aName+" ")?e.includes("\ubcc0\uacbd")?{kind:"A_CHANGE"}:{kind:"A_LVL",delta:t(e)}:e.startsWith(l.bName+" ")?e.includes("\ubcc0\uacbd")?{kind:"B_CHANGE"}:{kind:"B_LVL",delta:t(e)}:e.startsWith("\uac00\uacf5 \ube44\uc6a9")?{kind:"COST",mod:e.includes("+100%")?1:-1}:e.startsWith("\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")?{kind:"HOLD"}:e.startsWith("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30")?{kind:"REROLL_PLUS",amount:e.includes("+2")?2:1}:null}function Ae(e,l,t,s,a,n){const r="function"===typeof n?n:Math.random;let i={...t};const o=le*(-1===a?0:1===a?2:1);let c=0,d=0;const u=ve(e,"\uc0c1\uad00 \uc5c6\uc74c");switch(s.kind){case"EFF":i.eff=oe(i.eff+s.delta,0,ee);break;case"PTS":i.pts=oe(i.pts+s.delta,0,ee);break;case"A_LVL":i.aLvl=oe(i.aLvl+s.delta,0,ee);break;case"B_LVL":i.bLvl=oe(i.bLvl+s.delta,0,ee);break;case"A_CHANGE":{const e=u.filter(e=>e!==i.bName&&e!==i.aName);if(e.length){const l=e[Math.floor(r()*e.length)];i.aName=l}break}case"B_CHANGE":{const e=u.filter(e=>e!==i.aName&&e!==i.bName);if(e.length){const l=e[Math.floor(r()*e.length)];i.bName=l}break}case"COST":c=s.mod;break;case"HOLD":default:break;case"REROLL_PLUS":d+=s.amount}return{next:i,goldThisAttempt:o,nextRate:c,rerollDelta:d}}const Ce={successProb:0,legendProb:0,relicProb:0,ancientProb:0,expectedGold:0};function Se(e,l,t,s,a,n,r,i,o,c,d,u,x){let m=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{};const{maxTrials:h=5e4,epsilon:f=.002,batch:p=1e3,minTrials:g=Math.min(1e4,h),estimator:b="jeffreys",useAntithetic:v=!0,autoScaleRare:N=!0,rareTargetSuccesses:j=100,rareMaxTrials:w=2e5,rareTiers:y=[2e5]}=m,k=s=>function(e,l,t,s,a,n){let r=Math.max(0,s.eff-t.eff)+Math.max(0,s.pts-t.pts);if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=ve(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,u=(e,l,t,s)=>o(t)?(i.includes(e)?0:1)+Math.max(0,s-l):(e===t?0:1)+Math.max(0,s-l);if("ANY_ONE"===l){if(!c)return Number.POSITIVE_INFINITY;const e=u(t.aName,t.aLvl,c,s.aLvl),l=u(t.bName,t.bLvl,c,s.aLvl);r+=Math.min(e,l)}else{if(!c||!d)return Number.POSITIVE_INFINITY;const e=u(t.aName,t.aLvl,c,s.aLvl)+u(t.bName,t.bLvl,d,s.bLvl),l=u(t.aName,t.aLvl,d,s.bLvl)+u(t.bName,t.bLvl,c,s.aLvl);r+=Math.min(e,l)}return r}(l,t,s,a,e,x),L=u=>{const m=e=>{const l=e.reduce((e,l)=>e+l.w,0);let t=u()*l;for(let s=0;s<e.length;s++)if(t-=e[s].w,t<=0)return s;return e.length-1};let h={...s},f=0,p=r,g=i,b=c,v=o,N=!0;if("STOP_ON_SUCCESS"===n&&we(l,t,h,a,e,x)){const e=je(Ne(h));return{successProb:1,legendProb:"\uc804\uc124"===e?1:0,relicProb:"\uc720\ubb3c"===e?1:0,ancientProb:"\uace0\ub300"===e?1:0,expectedGold:0}}for(;p>0;){let s=[];if(N&&d.length>0)s=d.slice(0,4);else{const l=ke(h,p,0,e,v);if(!l.length)break;const t=[...l],a=Math.min(4,t.length);for(let e=0;e<a;e++){const e=m(t);s.push(t[e].slot),t.splice(e,1)}}if(K){const l=s[Math.floor(u()*s.length)],t=Ae(e,0,h,l,v,u);h=t.next,f+=t.goldThisAttempt,v=t.nextRate,g+=t.rerollDelta,b=!0}else{const t=ve(e,l),a=h.aName,n=h.bName,r=t.some(e=>e!==n&&e!==a),i=t.some(e=>e!==a&&e!==n),o=k(h);let c=null;for(const l of s){if("A_CHANGE"===l.kind&&!r)continue;if("B_CHANGE"===l.kind&&!i)continue;const t=Ae(e,0,h,l,v,u),s=o-k(t.next);(!c||s>c.gain)&&(c={next:t.next,gold:t.goldThisAttempt,nextRate:t.nextRate,rrd:t.rerollDelta,gain:s})}if(c&&c.gain<=0&&b&&g>0){g-=1,N=!1;continue}c&&(h=c.next,f+=c.gold,v=c.nextRate,g+=c.rrd,b=!0)}if(p-=1,N=!1,"STOP_ON_SUCCESS"===n&&we(l,t,h,a,e,x))break}const j=je(Ne(h));return{successProb:we(l,t,h,a,e,x)?1:0,legendProb:"\uc804\uc124"===j?1:0,relicProb:"\uc720\ubb3c"===j?1:0,ancientProb:"\uace0\ub300"===j?1:0,expectedGold:f}};let E=0,A=0,C=0,S=0,M=0,R=0,P={...Ce,trialsUsed:0,ci:{low:0,high:0,halfWidth:0}},$=h,F=!1;const T=Array.isArray(y)&&y.length?[...y].sort((e,l)=>e-l):[w],_=T[T.length-1],I=e=>T.find(l=>l>e)||e,D=T[0],O=(e,l)=>(e>>>0^Math.imul(l+1>>>0,2654435761)>>>0)>>>0,z=()=>{const e=A/Math.max(1,E);let l;if(0===e){const e=ce(E);l={low:0,high:e,halfWidth:e/2}}else if(1===e){const e=1-ce(E);l={low:e,high:1,halfWidth:(1-e)/2}}else{const t=function(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96;const s=1+t*t/l,a=(e+t*t/(2*l))/s,n=t/s*Math.sqrt(e*(1-e)/l+t*t/(4*l*l));return{low:Math.max(0,a-n),high:Math.min(1,a+n)}}(e,E);l={low:t.low,high:t.high,halfWidth:(t.high-t.low)/2}}return P.ci=l,l};for(;E<$;){const e=p;for(let t=0;t<e&&!(E>=$);t++){const e=O(u>>>0,E+t),l=L(ne(e));if(A+=l.successProb,C+=l.legendProb,S+=l.relicProb,M+=l.ancientProb,R+=l.expectedGold,E+=1,v&&E<$){const l=ne(e),t=L(()=>1-l());A+=t.successProb,C+=t.legendProb,S+=t.relicProb,M+=t.ancientProb,R+=t.expectedGold,E+=1}}const l=z().halfWidth||0;if(N&&E>=g&&0===A&&$<_){$=$<D?D:I($),F=!0;continue}if(N&&E>=g&&A<j&&$<_){const e=$<D?D:I($);$=Math.min(_,e);continue}if(!F&&l<=f&&E>=g)break}return P.trialsUsed=E,P.successProb=be(A,E,b),P.legendProb=be(C,E,b),P.relicProb=be(S,E,b),P.ancientProb=be(M,E,b),P.expectedGold=R/Math.max(1,E),P.successes=0|A,P}const Me={legend:"linear-gradient(90deg, #7A3E00, #B16800)",relic:"linear-gradient(90deg, #8C2F06, #AB4102)",ancient:"linear-gradient(90deg, #A67C37, #F5DFAB)"};function Re(e){let{value:l,items:t,onChange:a,placeholder:n,className:o,disabled:c,bordered:d=!0}=e;const[m,h]=(0,s.useState)(!1),f=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>h(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,l){const t=(0,s.useMemo)(()=>Array.isArray(e)?e:[e],[e]),a=(0,s.useRef)(l);(0,s.useEffect)(()=>{a.current=l},[l]),(0,s.useEffect)(()=>{const e=e=>{var l;t.some(l=>(null===l||void 0===l?void 0:l.current)&&l.current.contains(e.target))||null===(l=a.current)||void 0===l||l.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[t])}([f,p],()=>h(!1)),(0,s.useLayoutEffect)(()=>{if(!m||!f.current)return;const e=f.current.getBoundingClientRect();g.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const l=()=>{var e;const l=null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect();l&&(g.current={top:l.bottom+4,left:l.left,width:l.width},b(e=>e+1))};return window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[m]);const v=t.find(e=>e.value===l),N=m&&!c?(0,C.jsx)(u.N,{children:(0,C.jsx)(x.P.ul,{ref:p,initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.12},style:{position:"fixed",top:g.current.top,left:g.current.left,width:g.current.width,zIndex:9999},className:"rounded-xl bg-white shadow-lg overflow-auto max-h-60 "+(d?"border":""),children:t.map(e=>(0,C.jsx)("li",{children:(0,C.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),h(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"cursor-not-allowed":"hover:bg-gray-50"} ${e.value===l?"bg-gray-100":""}`,children:(0,C.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,C.jsxs)("div",{ref:f,className:`relative min-w-0 ${o||""}`,children:[(0,C.jsxs)("button",{type:"button",onClick:()=>!c&&h(e=>!e),disabled:c,className:`min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 ${d?"border":""} ${c?"cursor-not-allowed":""}`,children:[(0,C.jsx)("span",{className:"truncate text-sm",children:v?v.label:n||"\uc120\ud0dd"}),(0,C.jsx)("span",{className:"text-gray-500 text-sm select-none",children:m?(0,C.jsx)(r.A,{size:16}):(0,C.jsx)(i.A,{size:16})})]}),m&&N]})}function Pe(e){let{toasts:l,onClose:t}=e;const s=e=>({success:"text-emerald-900/80 hover:text-emerald-900",info:"text-sky-900/80 hover:text-sky-900",warning:"text-amber-900/80 hover:text-amber-900",error:"text-rose-900/80 hover:text-rose-900"}[e]||"text-amber-900/80 hover:text-amber-900");return(0,C.jsx)("div",{className:"fixed inset-0 z-[9999] flex space-y-2 flex-col items-center justify-center pointer-events-none px-4",children:(0,C.jsx)(u.N,{children:l.map(e=>{return(0,C.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:`pointer-events-auto overflow-hidden rounded-2xl border shadow-lg backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw] ${l=e.tone,{success:"bg-emerald-50/95 border-emerald-200 text-emerald-900",info:"bg-sky-50/95 border-sky-200 text-sky-900",warning:"bg-amber-50/95 border-amber-200 text-amber-900",error:"bg-rose-50/95 border-rose-200 text-rose-900"}[l]||"bg-amber-50/95 border-amber-200 text-amber-900"}`,children:[(0,C.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,C.jsx)("button",{className:`text-sm font-medium self-center ${s(e.tone)}`,onClick:()=>t(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id);var l})})})}function $e(e){let{value:l,set:t,onChange:a,min:n=Q,max:r=99,step:i=1,allowFloat:o=!1,zeroOnBlur:c=!0,className:d="",inputProps:u={},disabled:x}=e;const m=e=>null===e||void 0===e?"":String(e),[h,f]=s.useState(m(l));s.useEffect(()=>{f(m(l))},[l]);const p=e=>{let l=e;return null!=n&&l<n&&(l=n),null!=r&&l>r&&(l=r),l},g="function"===typeof a,b="function"===typeof t;return(0,C.jsx)("input",{type:"number",inputMode:o?"decimal":"numeric",step:i,min:n,max:r,disabled:x,value:h,onChange:e=>{const l=e.target.value;if(""===l)return f(""),void(g&&a(null));f(l);const s=Number(l);if(!Number.isFinite(s))return void(g&&a(null));const n=o?s:Math.trunc(s);g?a(n):b&&t(p(n))},onBlur:()=>{const e=(e=>{if(""===e)return c?null!==n&&void 0!==n?n:0:null;let l=Number(e);return Number.isFinite(l)?(l=o?l:Math.trunc(l),p(l)):c?null!==n&&void 0!==n?n:0:null})(h);f(null==e?"":String(e)),g?a(e):b&&t(null==e?null!==n&&void 0!==n?n:0:e)},onWheel:e=>e.currentTarget.blur(),className:`h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white ${d}`,...u})}const Fe=e=>{let{value:l,set:t,options:s,disabled:a,placeholder:n}=e;const r=(s||[]).map(e=>{var l,t;return"string"===typeof e?{value:e,label:e}:{value:null!==(l=e.value)&&void 0!==l?l:e,label:null!==(t=e.label)&&void 0!==t?t:String(e)}});return(0,C.jsx)(Re,{value:l,onChange:t,items:r,disabled:!!a,className:"w-full lg:w-full",placeholder:n||"\uc120\ud0dd"})};function Te(e){const l=e.filter(Boolean);return new Set(l).size!==l.length}function _e(){var e;const{toasts:l,push:t,remove:a}=function(){const[e,l]=(0,s.useState)([]);return{toasts:e,push:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const s=Math.random().toString(36).slice(2,9);l(l=>[...l,{id:s,msg:e,tone:t}]),setTimeout(()=>l(e=>e.filter(e=>e.id!==s)),2600)},remove:e=>l(l=>l.filter(l=>l.id!==e))}}(),[n,r]=(0,s.useState)("\uc9c8\uc11c-\uc548\uc815"),[i,o]=(0,s.useState)("\uc0c1\uad00 \uc5c6\uc74c"),[c,u]=(0,s.useState)("\uace0\uae09"),[m,f]=(0,s.useState)("ANY_ONE"),p=(0,s.useMemo)(()=>ve(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),g=(0,s.useMemo)(()=>ve(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),[b,v]=(0,s.useState)({eff:Q,pts:Q,aName:p[0],aLvl:Q,bName:p[1]||p[0],bLvl:Q}),[N,j]=(0,s.useState)({eff:Q,pts:Q,aLvl:Q,bLvl:Q}),[w,y]=(0,s.useState)({aName:ve(n,i)[0],bName:ve(n,i)[1]||ve(n,i)[0]}),[k,L]=(0,s.useState)(!1),[E,A]=(0,s.useState)(!1),[S,M]=(0,s.useState)(!1),R=b.aName!==b.bName,[P,$]=(0,s.useState)(1e4),F=(0,s.useRef)(!1);(0,s.useEffect)(()=>{F.current||(F.current=!0,v(e=>({...e,eff:Math.max(e.eff,Q),pts:Math.max(e.pts,Q),aLvl:Math.max(e.aLvl,Q),bLvl:Math.max(e.bLvl,Q)})),j(e=>({...e,eff:Math.max(e.eff,Q),pts:Math.max(e.pts,Q),aLvl:Math.max(e.aLvl,Q),bLvl:Math.max(e.bLvl,Q)})))},[]);const[T,_]=(0,s.useState)(()=>({attemptsLeft:X[c],rerolls:Z[c],unlocked:!1,costAddRate:0,gold:0,state:{...b}}));(0,s.useEffect)(()=>{_(e=>({...e,attemptsLeft:X[c],rerolls:Z[c],state:{...b},unlocked:!1,costAddRate:0,gold:0}))},[c,b]);const[I,D]=(0,s.useState)(null),[O,z]=(0,s.useState)(""),[K,Y]=(0,s.useState)({past:[],future:[]}),ce=(0,s.useCallback)(()=>({manual:JSON.parse(JSON.stringify(T)),changeMode:I?{...I,options:[...I.options]}:null,changePick:O}),[T,I,O]),be=(0,s.useCallback)(e=>{_(e.manual),D(e.changeMode),z(e.changePick)},[]),Ne=(0,s.useCallback)(()=>{Y(e=>{const l=[...e.past,ce()];for(;l.length>50;)l.shift();return{past:l,future:[]}})},[ce]),je=K.past.length>0,we=K.future.length>0,[ye,Ce]=(0,s.useState)([]),_e=()=>{const e=new Date,l=e=>String(e).padStart(2,"0");return`${l(e.getHours())}:${l(e.getMinutes())}:${l(e.getSeconds())}`},Ie=(0,s.useCallback)(e=>{Ce(l=>[{id:Math.random().toString(36).slice(2),time:_e(),...e},...l].slice(0,200))},[]),De=(0,s.useCallback)(()=>{Y(e=>{if(0===e.past.length)return e;const l=e.past[e.past.length-1],t=e.past.slice(0,-1),s=ce();return be(l),Ie({type:"undo",title:"\ub418\ub3cc\ub9ac\uae30",detail:"\uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uad6c"}),{past:t,future:[s,...e.future]}})},[be,ce,Ie]),Oe=(0,s.useCallback)(()=>{Y(e=>{if(0===e.future.length)return e;const l=e.future[0],t=e.future.slice(1),s=ce();return be(l),Ie({type:"redo",title:"\ub2e4\uc2dc\ud558\uae30",detail:"\ub418\ub3cc\ub9ac\uae30 \ucde8\uc18c"}),{past:[...e.past,s],future:t}})},[be,ce,Ie]);(0,s.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key.toLowerCase()&&(e.preventDefault(),e.shiftKey?we&&Oe():je&&De())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[je,we,De,Oe]);const ze=(e,l)=>{const t=[],s=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;e[s]!==l[s]&&t.push(`${a} ${e[s]}\u2192${l[s]}`)};if(s("eff","\ud6a8\uc728"),s("pts","\ud3ec\uc778\ud2b8"),e.aName!==l.aName||e.aLvl!==l.aLvl){const s=e.aName===l.aName?l.aName:`${e.aName}\u2192${l.aName}`;t.push(`A ${s} Lv.${e.aLvl}\u2192${l.aLvl}`)}if(e.bName!==l.bName||e.bLvl!==l.bLvl){const s=e.bName===l.bName?l.bName:`${e.bName}\u2192${l.bName}`;t.push(`B ${s} Lv.${e.bLvl}\u2192${l.bLvl}`)}return t.join(" \xb7 ")};(0,s.useEffect)(()=>{const e=ve(n,i);y(l=>{const t=e.includes(l.aName)?l.aName:e[0],s=e[1]||e[0],a=e.includes(l.bName)?l.bName:t===s?e.find(e=>e!==t)||t:s;return{aName:t,bName:a}})},[n,i]);const Be=(0,s.useMemo)(()=>{const e=ke(T.state,T.attemptsLeft,0,n,T.costAddRate).map(e=>Le(e.slot,T.state));return Array.from(new Set(e))},[T.state,T.attemptsLeft,T.costAddRate,i,n]),Ge=(0,s.useMemo)(()=>{const e=["\uc758\uc9c0\ub825 \ud6a8\uc728 +1","\ud3ec\uc778\ud2b8 +1",`${T.state.aName} Lv. +1`,`${T.state.bName} Lv. +1`],l=[];let t=0;for(const r of e)if(Be.includes(r)&&!l.includes(r))l.push(r);else{for(var s;t<Be.length&&l.includes(Be[t]);)t++;l.push(null!==(s=Be[t])&&void 0!==s?s:r),t++}for(;l.length<4;){for(var a,n;t<Be.length&&l.includes(Be[t]);)t++;l.push(null!==(a=null!==(n=Be[t++])&&void 0!==n?n:Be[0])&&void 0!==a?a:"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")}return l.slice(0,4)},[Be,T.state.aName,T.state.bName]),[He,qe]=(0,s.useState)(Ge);(0,s.useEffect)(()=>{qe(e=>{const l=e.map((e,l)=>{var t,s;return Be.includes(e)?e:null!==(t=null!==(s=Be[l])&&void 0!==s?s:Be[0])&&void 0!==t?t:e}),t=new Set;for(let s=0;s<l.length;s++){if(!t.has(l[s])){t.add(l[s]);continue}const e=Be.find(e=>!t.has(e));e&&(l[s]=e,t.add(e))}return l})},[Be]);const[We,Ve]=(0,s.useState)(null),[Ue,Ke]=(0,s.useState)(null),[Ye,Je]=(0,s.useState)(!1),Xe=(0,s.useRef)(0),Ze=(0,s.useRef)(null),Qe=(0,s.useRef)(null),[el,ll]=(0,s.useState)(null);(0,s.useLayoutEffect)(()=>{const e=()=>{Qe.current&&ll(Qe.current.offsetHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[T,He,Ue,We,I,S,k,E]);const tl=.0025,sl=(0,s.useCallback)((e,l,t,s,a,n,r)=>{let i=0,o=0;for(const c of e){const e=Ee(c,a.state);if(!e)continue;if("A_CHANGE"===e.kind){if(!(ve(l,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.bName&&e!==a.state.aName).length>0))continue}if("B_CHANGE"===e.kind){if(!(ve(l,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.aName&&e!==a.state.bName).length>0))continue}const d=Ae(l,0,a.state,e,a.costAddRate,()=>ne(r+se(c))()),u={attemptsLeft:a.attemptsLeft-1,rerolls:a.rerolls+d.rerollDelta,unlocked:!0,costAddRate:d.nextRate,gold:a.gold+d.goldThisAttempt,state:d.next};i+=Se(l,t,s,u.state,n,"RUN_TO_END",u.attemptsLeft,u.rerolls,u.costAddRate,u.unlocked,[],r+se(c),w,{maxTrials:Math.min(8e3,P),minTrials:Math.min(8e3,P),epsilon:.006,batch:500,estimator:"jeffreys",useAntithetic:V,autoScaleRare:!1}).successProb,o+=1}return o?i/o:0},[w,P]);function al(e,l,t,s){const a=ne(e),n=[...ke(s.state,s.attemptsLeft,0,l,s.costAddRate)],r=[],i=e=>{const l=e.reduce((e,l)=>e+l.w,0);let t=a()*l;for(let s=0;s<e.length;s++)if(t-=e[s].w,t<=0)return s;return e.length-1},o=Math.min(4,n.length);for(let c=0;c<o;c++){const e=i(n);r.push(n[e].slot),n.splice(e,1)}return r}function nl(e,l){return e.map(e=>Le(e,l))}const rl=(0,s.useMemo)(()=>{if(!T.unlocked)return{shouldReroll:!1,reason:"\uccab \uac00\uacf5 \uc774\uc804\uc5d0\ub294 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \ucd94\ucc9c\uc744 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."};if(T.rerolls<=0)return{shouldReroll:!1,reason:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."};if(T.attemptsLeft<=0)return{shouldReroll:!1,reason:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud310\ub2e8\uc774 \ubb34\uc758\ubbf8\ud569\ub2c8\ub2e4."};const e="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":m,l=ae({gemKey:n,pos:i,rarity:c,manual:T,tgt:N,manLabels:He,abForEval:e,salt:"REROLL_EV"}),t=sl(He,n,i,e,T,N,l+7);let s=0;for(let c=0;c<16;c++){const t=l+1e3+31*c,a={...T,rerolls:T.rerolls-1},r=nl(al(t,n,0,a),a.state);s+=sl(r,n,i,e,a,N,t+17)}const a=s/16,r=a-t,o=e=>(100*e).toFixed(2)+"%";return r>tl?{shouldReroll:!0,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(t)} \u2192 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)} (\u25b2${o(r)}).`}:r<-tl?{shouldReroll:!1,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(t)}\uac00 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)}\ubcf4\ub2e4 \uc720\ub9ac (\u25bc${o(-r)}).`}:{shouldReroll:!1,reason:`\ub450 \uacbd\ub85c \ucc28\uc774 \ubbf8\ubbf8: \ud604\uc7ac ${o(t)} vs \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${o(a)} (|\u0394| < ${.25.toFixed(2)}%).`}},[n,i,c,T,N,He,m,sl]);function il(){if(!I)return;if(!hl)return void t("\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815\uc740 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning");Ne();const e=le*(-1===T.costAddRate?0:1===T.costAddRate?2:1),l={...T.state};_(l=>{const t={...l.state};return"A"===I.who?t.aName=O:t.bName=O,{attemptsLeft:l.attemptsLeft-1,rerolls:l.rerolls,unlocked:!0,costAddRate:l.costAddRate,gold:l.gold+e,state:t}});const s={...T.state,..."A"===I.who?{aName:O}:{bName:O}};Ie({type:"change",title:`\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815 (${I.who}) \u2192 ${O}`,detail:ze(l,s),meta:{cost:e}}),D(null),t("\uc120\ud0dd\ud55c \ud6a8\uacfc\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success")}function ol(){D(null),t("\ud6a8\uacfc \ubcc0\uacbd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","warning")}(0,s.useEffect)(()=>{if("BOTH"!==m||"\uc0c1\uad00 \uc5c6\uc74c"===i)return;const e=ve(n,i);y(l=>{const t=e.includes(l.aName)&&"\uc0c1\uad00\uc5c6\uc74c"!==l.aName?l.aName:e[0],s=e.find(e=>e!==t)||e[0],a=e.includes(l.bName)&&"\uc0c1\uad00\uc5c6\uc74c"!==l.bName&&l.bName!==t?l.bName:s;return{aName:t,bName:a}})},[m,n,i]),(0,s.useEffect)(()=>{if(!S||!R)return Ve(null),void Ke(null);if(Te(He))return Ve(null),void Ke(null);const e=He.map(e=>Ee(e,T.state)).filter(e=>!!e),l="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":m,t=ae({gemKey:n,pos:i,rarity:c,manual:T,tgt:N,selectedFirstFour:e,calcMode:"\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":m}),s=++Xe.current;return Je(!0),Ze.current&&clearTimeout(Ze.current),Ze.current=setTimeout(()=>{const a={maxTrials:P,minTrials:P,epsilon:de(P),batch:ue(P),estimator:"jeffreys",useAntithetic:V,autoScaleRare:U,rareTargetSuccesses:100,rareTiers:[2e5]},r=Se(n,i,l,T.state,N,"STOP_ON_SUCCESS",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,t+101,w,a),o=Se(n,i,l,T.state,N,"RUN_TO_END",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,t+103,w,a);s===Xe.current&&(Ve(r),Ke(o),Je(!1))},0),()=>{Ze.current&&(clearTimeout(Ze.current),Ze.current=null)}},[n,i,c,R,T,N,S,He,m,w,P]),(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud5ec\ud37c"},[]);const cl="bg-white rounded-2xl shadow-sm p-4 lg:p-6",dl="block text-xs text-gray-500 mb-1",ul="text-base font-semibold whitespace-nowrap",xl="\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":m,ml=1===T.costAddRate?"+100%":-1===T.costAddRate?"-100%":"0%",hl=k&&E&&S,fl=Te(He),pl=(0,s.useMemo)(()=>R&&(Ye||!(Ue&&We)),[R,Ye,Ue,We]),gl=!hl||fl||!!I||T.attemptsLeft<=0,bl=!hl||!!I||T.attemptsLeft<=0||T.rerolls<=0,vl=(0,s.useRef)(!1);(0,s.useEffect)(()=>{hl||(Ce([]),Y({past:[],future:[]}))},[hl]),(0,s.useEffect)(()=>{fl?vl.current||(t("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694."),vl.current=!0):vl.current=!1},[fl,t]);const Nl=(0,s.useMemo)(()=>{const e=ve(n,i);return"\uc0c1\uad00 \uc5c6\uc74c"===i?e:"ANY_ONE"===m?["\uc0c1\uad00\uc5c6\uc74c",...e]:e},[n,i,m]);return(0,C.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,C.jsx)("style",{children:"\n    :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n    .text-primary{ color:#a399f2; }\n    .accent-primary{ accent-color:#a399f2; }\n  "}),(0,C.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,C.jsx)("section",{className:"py-2 lg:py-3",children:(0,C.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,C.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud655\ub960 \uacc4\uc0b0\uae30"}),(0,C.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0 items-center",children:[(0,C.jsx)("span",{className:"hidden sm:inline text-white/90 text-sm",children:"\uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218"}),(0,C.jsx)("div",{className:"min-w-[170px]",children:(0,C.jsx)(Re,{value:P,onChange:$,items:te,placeholder:"\ubc18\ubcf5 \uc218 \uc120\ud0dd",bordered:!1})})]})]})}),(0,C.jsxs)("section",{className:`${cl} !mt-2`,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\uae30\ubcf8 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:k?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>L(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>L(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r ",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] w-full lg:w-56 "+(k?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\uc82c \ud0c0\uc785"}),(0,C.jsx)(Re,{className:"w-full",value:n,onChange:e=>r(e),items:Object.keys(J).map(e=>({value:e,label:e})),placeholder:"\uc82c \ud0c0\uc785",disabled:k})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] w-full lg:w-40 "+(k?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ub4f1\uae09"}),(0,C.jsx)(Re,{className:"w-full",value:c,onChange:e=>u(e),items:["\uace0\uae09","\ud76c\uadc0","\uc601\uc6c5"].map(e=>({value:e,label:e})),placeholder:"\ub4f1\uae09",disabled:k})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-auto",children:[(0,C.jsx)("label",{className:dl,children:"\uae30\ubcf8 \uc2dc\ub3c4/\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"}),(0,C.jsxs)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center text-sm",children:["\uac00\uacf5 \ud69f\uc218 ",(0,C.jsx)("b",{className:"mx-1",children:X[c]})," \xb7 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"," ",(0,C.jsx)("b",{className:"ml-1",children:Z[c]}),"\ud68c"]})]})]})})]}),(0,C.jsxs)("section",{className:cl,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\ud604\uc7ac \uc635\uc158 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:E?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>A(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,C.jsx)($e,{value:b.eff,set:e=>v({...b,eff:oe(e,Q,ee)}),min:Q,max:ee,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud3ec\uc778\ud2b8"}),(0,C.jsx)($e,{value:b.pts,set:e=>v({...b,pts:oe(e,Q,ee)}),min:Q,max:ee,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud6a8\uacfc A"}),(0,C.jsx)(Fe,{value:b.aName,set:e=>v({...b,aName:e}),options:g,disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud6a8\uacfc A \ub808\ubca8"}),(0,C.jsx)($e,{value:b.aLvl,set:e=>v({...b,aLvl:oe(e,Q,ee)}),min:Q,max:ee,disabled:E})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud6a8\uacfc B"}),(0,C.jsx)(Fe,{value:b.bName,set:e=>v({...b,bName:e}),options:g.filter(e=>e!==b.aName),disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud6a8\uacfc B \ub808\ubca8"}),(0,C.jsx)($e,{value:b.bLvl,set:e=>v({...b,bLvl:oe(e,Q,ee)}),min:Q,max:ee,disabled:E})]})]})})]}),(0,C.jsxs)("section",{className:cl,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\ubaa9\ud45c \uc635\uc158 \uc124\uc815"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-3 flex-wrap",children:S?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uacc4\uc0b0 \ud65c\uc131)"}),(0,C.jsxs)("button",{type:"button",onClick:()=>M(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,C.jsxs)("button",{type:"button",onClick:()=>M(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(G.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,C.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,C.jsx)("span",{className:"text-xs text-gray-500",children:"\ubaa9\ud45c \ucda9\uc871 \ubc29\uc2dd"}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",checked:"ANY_ONE"===m,onChange:()=>f("ANY_ONE"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"1\uac1c \uc774\uc0c1"]}),(0,C.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,C.jsx)("input",{type:"radio",checked:"BOTH"===m,onChange:()=>f("BOTH"),disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"2\uac1c"]})]}),(0,C.jsx)("div",{className:"mt-3",children:(0,C.jsxs)("div",{className:"\r relative\r grid grid-cols-2 gap-2\r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3\r items-stretch lg:items-end\r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\uc758\uc9c0\ub825 \ud6a8\uc728 \u2265"}),(0,C.jsx)($e,{value:N.eff,set:e=>j({...N,eff:oe(e,Q,ee)}),min:Q,max:ee,disabled:S})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ud3ec\uc778\ud2b8 \u2265"}),(0,C.jsx)($e,{value:N.pts,set:e=>j({...N,pts:oe(e,Q,ee)}),min:Q,max:ee,disabled:S})]}),(0,C.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-[100px] "+(S?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ucd94\uac00 \ud6a8\uacfc"}),(0,C.jsx)(Re,{className:"w-full lg:w-[100px]",value:i,onChange:e=>o(e),items:["\uc0c1\uad00 \uc5c6\uc74c","\uacf5\uaca9\ud615","\uc9c0\uc6d0\ud615"].map(e=>({value:e,label:e})),placeholder:"\ucd94\uac00 \ud6a8\uacfc",disabled:S})]}),(()=>{const e=S||"\uc0c1\uad00 \uc5c6\uc74c"===i,l=e||"BOTH"!==m,t=e?"opacity-50":"",s=l?"opacity-50":"";return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ubaa9\ud45c \ud6a8\uacfc A"}),(0,C.jsx)(Fe,{value:w.aName,set:e=>y(l=>({...l,aName:e})),options:"BOTH"===m?Nl.filter(e=>e!==w.bName):Nl,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i})]}),(0,C.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${t}`,children:[(0,C.jsx)("label",{className:dl,children:"\ubaa9\ud45c \ud6a8\uacfc A \ub808\ubca8 \u2265"}),(0,C.jsx)($e,{value:N.aLvl,set:e=>j({...N,aLvl:oe(e,Q,ee)}),min:Q,max:ee,disabled:e})]}),(0,C.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(S||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==m?"opacity-50":""),children:[(0,C.jsx)("label",{className:dl,children:"\ubaa9\ud45c \ud6a8\uacfc B"}),(0,C.jsx)(Fe,{value:w.bName,set:e=>y(l=>({...l,bName:e})),options:"BOTH"===m?Nl.filter(e=>e!==w.aName):Nl,disabled:S||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==m})]}),(0,C.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${s}`,children:[(0,C.jsx)("label",{className:dl,children:"\ubaa9\ud45c \ud6a8\uacfc B \ub808\ubca8 \u2265"}),(0,C.jsx)($e,{value:N.bLvl,set:e=>j({...N,bLvl:oe(e,Q,ee)}),min:Q,max:ee,disabled:l})]})]})})()]})})]}),(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,C.jsxs)("section",{ref:Qe,className:"lg:col-span-2 "+cl,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\uac00\uacf5 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,C.jsxs)("button",{onClick:function(){Ce([]),Y({past:[],future:[]}),_({attemptsLeft:X[c],rerolls:Z[c],unlocked:!1,costAddRate:0,gold:0,state:{...b}})},className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,C.jsx)(d.A,{size:16}),"\uc2dc\ubbac\ub808\uc774\uc158 \ucd08\uae30\ud654"]})})]}),(0,C.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["\ud56d\ubaa9 \uc801\uc6a9 / \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 ",(0,C.jsx)("b",{children:"\ubaa8\ub4e0 \uc124\uc815\uc744 \uc800\uc7a5(\uc7a0\uae08)"}),"\ud55c \ub4a4 \uc774\uc6a9\ud558\uc138\uc694."]}),(0,C.jsxs)("div",{className:"mt-3 gap-4",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\ud604\uc7ac \uc82c \uc0c1\ud0dc"}),(0,C.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,C.jsx)("div",{className:"text-lg font-semibold",children:T.state.eff})]}),(0,C.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"\uc9c8\uc11c\xb7\ud63c\ub3c8 \ud3ec\uc778\ud2b8"}),(0,C.jsx)("div",{className:"text-lg font-semibold",children:T.state.pts})]}),(0,C.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"A"===(null===I||void 0===I?void 0:I.who)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)(Fe,{value:O,set:z,options:I.options})}),(0,C.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,C.jsx)("button",{onClick:il,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,C.jsx)("button",{onClick:ol,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:T.state.aName}),(0,C.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.aLvl]})]})}),(0,C.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"B"===(null===I||void 0===I?void 0:I.who)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"w-full",children:(0,C.jsx)(Fe,{value:O,set:z,options:I.options})}),(0,C.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,C.jsx)("button",{onClick:il,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,C.jsx)("button",{onClick:ol,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:T.state.bName}),(0,C.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.bLvl]})]})})]}),(0,C.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[T.attemptsLeft<=0?(0,C.jsx)("div",{className:"inline-flex items-center px-2.5 py-1.5 rounded-xl bg-violet-50 border border-violet-200 text-violet-900 text-[12px] lg:text-[13px]",children:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub0a8\uc740 \uac00\uacf5 \ud69f\uc218 ",(0,C.jsx)("b",{className:"ml-1",children:T.attemptsLeft})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",(0,C.jsx)("b",{className:"ml-1",children:T.rerolls})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\uac00\uacf5 \ube44\uc6a9 \ucd94\uac00 \ube44\uc728 ",(0,C.jsx)("b",{className:"ml-1",children:ml})]})]}),(0,C.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub204\uc801 \uace8\ub4dc ",(0,C.jsx)("b",{className:"ml-1",children:he(T.gold)})," G"]})]})]}),(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white mt-4",children:[(0,C.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\uc774\ubc88\uc5d0 \ub4f1\uc7a5\ud55c 4\uac1c \ud56d\ubaa9"}),(0,C.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:He.map((e,l)=>(0,C.jsxs)("div",{className:"slot-card rounded-xl border p-2 transition-all",children:[(0,C.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["\uc2ac\ub86f ",l+1]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(Fe,{value:e,set:e=>{const t=[...He];t[l]=e,qe(t)},options:Be}),(0,C.jsx)("button",{onClick:()=>function(e){if(!hl)return void t("\ud56d\ubaa9\uc744 \uc801\uc6a9\ud558\ub824\uba74 '\uae30\ubcf8 \uc124\uc815/\ud604\uc7ac \uc635\uc158/\ubaa9\ud45c \uc635\uc158'\uc744 \ubaa8\ub450 \uc800\uc7a5(\uc7a0\uae08)\ud558\uc138\uc694.","warning");if(Ne(),!S)return void t("\ubaa9\ud45c \uc635\uc158\uc744 \uba3c\uc800 \uc800\uc7a5\ud574 \uc8fc\uc138\uc694.");if(T.attemptsLeft<=0)return;if(Te(He))return void t("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694.");const l=He[e];if(!Be.includes(l))return void t("\ubbf8\ub4f1\uc7a5 \uc870\uac74\uc73c\ub85c \ud604\uc7ac \uc120\ud0dd\uc740 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.");const s=Ee(l,T.state);if(!s)return void t("\uc120\ud0dd\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc5b4\uc694.");if("A_CHANGE"===s.kind||"B_CHANGE"===s.kind){const e=ve(n,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==T.state.aName&&e!==T.state.bName);return e.length<=0?void t("\ucd94\uac00 \ud6a8\uacfc \uc870\uac74/\uc911\ubcf5\uc73c\ub85c \ud6a8\uacfc \ubcc0\uacbd\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4."):(D({who:"A_CHANGE"===s.kind?"A":"B",options:e}),z(e[0]),void t("\ubcc0\uacbd\ud560 \ud6a8\uacfc\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc67c\ucabd \ud328\ub110\uc5d0\uc11c \uc801\uc6a9\uc744 \ub204\ub974\uba74 \uc774\ubc88 \ucc28\uc218\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.","info"))}if(T.attemptsLeft<=0)return void t("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub354 \uc774\uc0c1 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.","warning");const a={...T.state},r=Ae(n,0,T.state,s,T.costAddRate),i=T.attemptsLeft-1;_(e=>({attemptsLeft:i,rerolls:e.rerolls+r.rerollDelta,unlocked:!0,costAddRate:r.nextRate,gold:e.gold+r.goldThisAttempt,state:r.next})),Ie({type:"apply",title:`\uc2ac\ub86f ${e+1} \uc801\uc6a9: ${l}`,detail:ze(a,r.next),meta:{cost:r.goldThisAttempt,attemptsLeft:i,rerollDelta:r.rerollDelta}}),i>0&&t("\uc120\ud0dd\ud55c \ud6a8\uacfc\uac00 \ubc18\uc601\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c 4\uac1c\uc758 \uc120\ud0dd\uc9c0\ub97c \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694.","success")}(l),"aria-disabled":gl,className:`apply-btn transition-all justify-center min-w-[60px] h-10 px-3 rounded-xl border bg-white \n                          hover:border-[#a399f2] hover:text-white hover:bg-[#a399f2] inline-flex items-center\n                          ${gl?"opacity-50 cursor-not-allowed":""} \n                          ${fl?"opacity-50 cursor-not-allowed":""}`,children:"\uc801\uc6a9"})]})]},l))}),(0,C.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("button",{onClick:function(){hl?T.attemptsLeft<=0?t("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694."):T.unlocked?T.rerolls<=0?t("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud69f\uc218\uac00 \ubd80\uc871\ud574\uc694."):(Ne(),_(e=>({...e,rerolls:e.rerolls-1})),Ie({type:"reroll",title:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc0ac\uc6a9",detail:`\ub0a8\uc740 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${T.rerolls-1}\ud68c`})):t("\uac00\uacf5 1\ud68c \uc774\ud6c4\ubd80\ud130 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."):t("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning")},disabled:bl,className:`h-10 px-3 rounded-xl border ${bl?"opacity-50 cursor-not-allowed":"bg-white hover:bg-gray-50"} inline-flex items-center gap-2`,children:[(0,C.jsx)(H.A,{size:16}),"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",T.rerolls,"\ud68c"]}),(0,C.jsx)("span",{className:"text-xs text-gray-600",children:T.attemptsLeft<=0?"\uac00\uacf5 \uc644\ub8cc":T.unlocked?T.rerolls<=0?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc5c6\uc74c":rl.shouldReroll?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c":"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c":"\uccab \uac00\uacf5 \uc774\ud6c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),T.unlocked&&T.rerolls>0&&(0,C.jsx)("div",{className:"mt-2 text-xs text-gray-700",children:rl.reason})]})]})]}),(0,C.jsxs)("section",{className:`${cl} h-full flex flex-col`,style:el?{maxHeight:el}:void 0,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,C.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,C.jsx)("button",{onClick:De,disabled:!je,className:`ml-auto h-10 px-3 rounded-xl border ${je?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub418\ub3cc\ub9ac\uae30 (Ctrl/Cmd+Z)",children:(0,C.jsx)(q.A,{size:16})}),(0,C.jsx)("button",{onClick:Oe,disabled:!we,className:`h-10 px-3 rounded-xl border ${we?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub2e4\uc2dc\ud558\uae30 (Ctrl/Cmd+Shift+Z)",children:(0,C.jsx)(W.A,{size:16})})]})]}),0===ye.length?(0,C.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,C.jsx)("div",{className:"mt-3 flex-1 min-h-0 space-y-2 overflow-auto",children:ye.map(e=>(0,C.jsxs)("div",{className:"rounded-xl border p-2 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:e.time})]}),e.detail&&(0,C.jsx)("div",{className:"mt-1 text-xs text-gray-700",children:e.detail}),e.meta&&(0,C.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5 text-[11px] text-gray-600",children:["cost"in e.meta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ube44\uc6a9 ",he(e.meta.cost)," G"]}),"attemptsLeft"in e.meta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub0a8\uc740 \uac00\uacf5 ",e.meta.attemptsLeft,"\ud68c"]}),"rerollDelta"in e.meta&&0!==e.meta.rerollDelta&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",e.meta.rerollDelta>0?`+${e.meta.rerollDelta}`:e.meta.rerollDelta]})]})]},e.id))})]})]}),(0,C.jsxs)("section",{className:cl,children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("h2",{className:ul,children:"\uacb0\uacfc \ucd9c\ub825"}),(0,C.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,C.jsxs)("span",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 text-[10px] lg:text-xs text-gray-600",children:["Monte Carlo ",he(Math.max((null===Ue||void 0===Ue?void 0:Ue.trialsUsed)||0,(null===We||void 0===We?void 0:We.trialsUsed)||0)),"\ud68c",null!==Ue&&void 0!==Ue&&null!==(e=Ue.ci)&&void 0!==e&&e.halfWidth?` (\xb1${(100*Ue.ci.halfWidth).toFixed(2)}%p @95%)`:""]})})]}),pl?(0,C.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1.5",children:[...Array(4)].map((e,l)=>(0,C.jsx)("div",{className:"h-6 w-28 rounded-lg bg-gray-100 animate-pulse"},l))}),(0,C.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-2",children:[0,1].map(e=>(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-3 h-8 w-2/3 bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-2 h-2 w-full bg-gray-100 rounded animate-pulse"}),(0,C.jsx)("div",{className:"mt-4 h-4 w-40 bg-gray-100 rounded animate-pulse"})]},e))})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"mt-2 text-sm text-gray-700",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1.5",children:He.map((e,l)=>(0,C.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white text-[12px]",children:e},l))})]}),Ue&&We&&(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,C.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},className:"rounded-xl border p-3 bg-white",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ubaa9\ud45c \ub2ec\uc131 \ud655\ub960"}),(0,C.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-50 text-[11px] text-gray-600",children:"IGNORE_AB"===xl?"\ucd94\uac00 \ud6a8\uacfc \uc0c1\uad00 \uc5c6\uc74c":"ANY_ONE"===xl?"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 1\uac1c \uc774\uc0c1":"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 2\uac1c \uc804\ubd80"})]}),(0,C.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{className:"text-xs text-gray-500",children:["\ub2ec\uc131 \uc989\uc2dc \uac00\uacf5 \uc644\ub8cc ( ",he(We.successes),"\ud68c / ",he(We.trialsUsed),"\ud68c )"]}),"                        "]}),(0,C.jsx)("div",{className:"mt-1 text-2xl font-bold",children:xe(We.successProb,We.ci)}),(0,C.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*We.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=fe(We.expectedGold,We.successProb),l=ge(We.successProb);return(0,C.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,C.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,C.jsx)("b",{children:Number.isFinite(e)?he(Math.round(e)):"\u221e"})," G"]}),(0,C.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${l.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",l.label]}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]}),(0,C.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,C.jsx)("div",{className:"flex items-center justify-between",children:(0,C.jsxs)("div",{className:"text-xs text-gray-500",children:["\uac00\uacf5 \ud69f\uc218 \uc804\ubd80 \uc18c\ubaa8 ( ",he(Ue.successes),"\ud68c / ",he(Ue.trialsUsed),"\ud68c )"]})}),(0,C.jsx)("div",{className:"mt-1 text-2xl font-bold",children:me(Ue.successProb)}),(0,C.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ue.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=fe(Ue.expectedGold,Ue.successProb),l=ge(Ue.successProb);return(0,C.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,C.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,C.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,C.jsx)("b",{children:Number.isFinite(e)?he(Math.round(e)):"\u221e"})," G"]}),(0,C.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${l.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",l.label]}),(0,C.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]})]})]}),(0,C.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,delay:.05},className:"rounded-xl border p-3 bg-white",children:[(0,C.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ub4f1\uae09 \ud655\ub960"}),(()=>{if(!Ue)return null;const e=[{key:"legendProb",name:"\uc804\uc124 (4~15)",p:Number(Ue.legendProb||0),grad:Me.legend},{key:"relicProb",name:"\uc720\ubb3c (16~18)",p:Number(Ue.relicProb||0),grad:Me.relic},{key:"ancientProb",name:"\uace0\ub300 (19+)",p:Number(Ue.ancientProb||0),grad:Me.ancient}];return(0,C.jsx)("div",{className:"mt-3 space-y-3 text-sm",children:e.map(e=>(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{className:"text-gray-700",children:e.name}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[ie(e.p)&&(0,C.jsx)("span",{className:"px-2 py-0.5 rounded-lg border bg-emerald-50 border-emerald-200 text-emerald-800 text-[11px]",children:"\ud655\uc815"}),(0,C.jsx)("b",{children:me(e.p)})]})]}),(0,C.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,C.jsx)(x.P.div,{initial:{width:0},animate:{width:ie(e.p)?"100%":pe(e.p)},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r",style:{backgroundImage:e.grad}})})]},e.key))})})(),(()=>{const{order:e,comps:l}=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e-4;if(!e)return{order:[],comps:[]};let t=[{key:"legendProb",label:"\uc804\uc124",p:Number(e.legendProb||0),grad:Me.legend},{key:"relicProb",label:"\uc720\ubb3c",p:Number(e.relicProb||0),grad:Me.relic},{key:"ancientProb",label:"\uace0\ub300",p:Number(e.ancientProb||0),grad:Me.ancient}];if(t=t.filter(e=>!re(e.p)),!t.length)return{order:[],comps:[]};t.sort((e,l)=>l.p-e.p);const s=[];for(let a=0;a<t.length-1;a++){const e=t[a].p-t[a+1].p;s.push(Math.abs(e)<=l?"=":">")}return{order:t,comps:s}}(Ue);return e.length?(0,C.jsxs)("div",{className:"mt-2 rounded-xl bg-white/70",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\uac00\ub2a5\uc131 \ub192\uc740 \uc21c\uc11c"}),(0,C.jsx)("div",{className:"flex flex-wrap items-center gap-1.5",children:e.map((t,a)=>(0,C.jsxs)(s.Fragment,{children:[(0,C.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white shadow-sm",children:[(0,C.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-gradient-to-r",style:{backgroundImage:t.grad}}),(0,C.jsxs)("span",{className:"text-sm",children:[t.label,ie(t.p)?" (\ud655\uc815)":""]})]}),a<e.length-1&&(0,C.jsx)("span",{className:"mx-0.5 text-gray-400 select-none",children:"="===l[a]?"\uff1d":"\uff1e"})]},t.key))})]}):null})()]})]})]})]})]}),(0,C.jsx)(Pe,{toasts:l,onClose:a}),(0,C.jsx)("div",{className:"mt-6",children:(0,C.jsx)(h.A,{})})]})}function Ie(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;const[l,t]=s.useState(!1);return s.useEffect(()=>{const l=()=>{const l=document.documentElement,s=l.scrollHeight-(l.scrollTop+window.innerHeight);t(s<=e)};return l(),window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l),()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[e]),l}(520);return(0,C.jsx)("div",{className:"fixed z-50 right-4 bottom-4 sm:right-6 sm:bottom-6 pr-[env(safe-area-inset-right)] pb-[env(safe-area-inset-bottom)]",children:(0,C.jsxs)("button",{type:"button","aria-label":"\ub9e8 \uc704\ub85c",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:["inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-3 shadow-lg backdrop-blur","text-gray-700 hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/40","transition transform duration-200",e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"].join(" "),children:[(0,C.jsx)(r.A,{size:18}),(0,C.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"TOP"})]})})}function De(){return(0,C.jsxs)(a.I9,{basename:"/core",children:[(0,C.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,C.jsx)("header",{className:"sticky top-0 z-40 border-b border-gray-200/60 bg-white/70 backdrop-blur",children:(0,C.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3",children:(0,C.jsx)("nav",{"aria-label":"Core pages",children:(0,C.jsxs)("ul",{className:"mx-auto flex w-full flex-wrap justify-center gap-1 rounded-xl",children:[(0,C.jsx)("li",{children:(0,C.jsx)(a.k2,{to:"/gem",className:e=>{let{isActive:l}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",l?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uac00\uacf5 \ud5ec\ud37c"})}),(0,C.jsx)("li",{children:(0,C.jsx)(a.k2,{to:"/optimizer",className:e=>{let{isActive:l}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",l?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uc7a5\ucc29 \ud5ec\ud37c"})})]})})})}),(0,C.jsx)("main",{children:(0,C.jsxs)(a.BV,{children:[(0,C.jsx)(a.qh,{index:!0,element:(0,C.jsx)(a.C5,{to:"/optimizer",replace:!0})}),(0,C.jsx)(a.qh,{path:"/gem",element:(0,C.jsx)(_e,{})}),(0,C.jsx)(a.qh,{path:"/optimizer",element:(0,C.jsx)(z,{})}),(0,C.jsx)(a.qh,{path:"*",element:(0,C.jsx)(a.C5,{to:"/optimizer",replace:!0})})]})})]}),(0,C.jsx)(Ie,{})]})}}}]);
//# sourceMappingURL=840.75c5965c.chunk.js.map