"use strict";(self.webpackChunkpeon_calculator=self.webpackChunkpeon_calculator||[]).push([[299],{299:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ze});var s=l(43),a=l(981),n=l(950),r=l(711),i=l(382),o=l(360),c=l(855),d=l(805),m=l(546),u=l(446),x=l(289),h=l(346),f=l(579);const p={HERO:7,LEGEND:11,RELIC:15,ANCIENT:17},g={HERO:[10],LEGEND:[10,14],RELIC:[10,14,17,18,19,20],ANCIENT:[10,14,17,18,19,20]},b={HERO:"\uc601\uc6c5",LEGEND:"\uc804\uc124",RELIC:"\uc720\ubb3c",ANCIENT:"\uace0\ub300"},v=["HERO","LEGEND","RELIC","ANCIENT"],N={atk:"\uacf5\uaca9\ub825",add:"\ucd94\uac00 \ud53c\ud574",boss:"\ubcf4\uc2a4 \ud53c\ud574",brand:"\ub099\uc778\ub825",allyDmg:"\uc544\uad70 \ud53c\ud574 \uac15\ud654",allyAtk:"\uc544\uad70 \uacf5\uaca9 \uac15\ud654"},j=["atk","add","boss","brand","allyDmg","allyAtk"],w={dealer:new Set(["atk","add","boss"]),support:new Set(["brand","allyDmg","allyAtk"])},y={atk:1,add:1,boss:1,brand:1,allyDmg:1,allyAtk:1},k=[{value:"\ud574 \ucf54\uc5b4",label:"\ud574 \ucf54\uc5b4"},{value:"\ub2ec \ucf54\uc5b4",label:"\ub2ec \ucf54\uc5b4"},{value:"\ubcc4 \ucf54\uc5b4",label:"\ubcc4 \ucf54\uc5b4"}],L={order:"\uc9c8\uc11c",chaos:"\ud63c\ub3c8"},E="LoA-CoreOptimizer-v2",S=["\ud574 \ucf54\uc5b4","\ub2ec \ucf54\uc5b4","\ubcc4 \ucf54\uc5b4"];const A=()=>Math.random().toString(36).slice(2,9);function C(e){const t={...y};return e?(Object.keys(t).forEach(l=>{const s=e[l],a="number"===typeof s?s:Number(s);t[l]=Number.isFinite(a)&&a>=0?a:y[l]}),t):t}function P(e,t,l){var s,a;const n="dealer"===t?w.dealer:w.support;return(n.has(e.o1k)?e.o1v*(null!==(s=l[e.o1k])&&void 0!==s?s:1):0)+(n.has(e.o2k)?e.o2v*(null!==(a=l[e.o2k])&&void 0!==a?a:1):0)}function*M(e,t){const l=e.length;if(t>l)return;const s=Array.from({length:t},(e,t)=>t);for(;;){yield s.map(t=>e[t]);let a=t-1;for(;a>=0&&s[a]===l-t+a;)a--;if(a<0)break;s[a]++;for(let e=a+1;e<t;e++)s[e]=s[e-1]+1}}function R(e,t){return g[e].filter(e=>t>=e)}function $(e,t,l,s){const a=e.reduce((e,t)=>{var l;return e+(null!==(l=t.will)&&void 0!==l?l:0)},0),n=e.reduce((e,t)=>{var l;return e+(null!==(l=t.point)&&void 0!==l?l:0)},0),r=R(t,n),i=e.reduce((e,t)=>e+P(t,l,s),0);return{totalWill:a,totalPoint:n,thr:r,roleSum:i,score:1e7*r.length+1e4*n+10*(5e3-a)+i-e.length}}function T(e,t,l,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300;const n=C(s),r=e=>Math.min(...(e=>g[e])(e)),i=e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.thr)&&void 0!==t&&t.length?Math.max(...e.thr):0},o={list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0},c=e.map((e,t)=>t),d=e.map((e,t)=>e.enforceMin?t:-1).filter(e=>-1!==e),m=(e,t)=>{const s=function(e,t,l,s,a,n){const r=p[t],i=C(s),o=Math.min(...g[t]),c=null!==a&&void 0!==a?a:o,d=n||null==a,m=[],u=Math.min(4,e.length);for(let h=0;h<=u;h++)if(0!==h)for(const s of M(e,h)){const e=s.reduce((e,t)=>e+(t.will||0),0);if(e>r)continue;const{totalPoint:a,thr:n,roleSum:o,score:c}=$(s,t,l,i);m.push({list:s,totalWill:e,totalPoint:a,thr:n,roleSum:o,score:c})}else m.push({list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0});let x;return m.sort((e,t)=>t.score-e.score),x=d?m.filter(e=>{const t=Math.max(0,...e.thr);return e.list.length>0&&t>=(null!==c&&void 0!==c?c:0)}):m.filter(e=>e.list.length>0&&e.thr.length>0),0===x.length?[{list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0}]:x}(t,e.grade,l,n,void 0,!1).filter(e=>e.list.length>0&&e.thr.length>0);return s.sort((e,t)=>{const l=i(e),s=i(t);return l!==s?s-l:e.totalPoint!==t.totalPoint?t.totalPoint-e.totalPoint:e.totalWill!==t.totalWill?e.totalWill-t.totalWill:t.roleSum-e.roleSum}),s.slice(0,Math.max(a,1e4))},u=c.map(l=>m(e[l],t));function x(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,s=null;const a=new Set;return function n(o,d,m,x,h,f,p,g){var b;if(o===c.length){for(const s of t){var v;const t=null!==(v=e[s].minThreshold)&&void 0!==v?v:r(e[s].grade);if(i(d[s])<t)return}const l={picks:d.map(e=>e),sumThr:m,sumPoint:x,sumWill:h,roleSum:f,thrVec:p.slice(),ptVec:g.slice()};return void(function(e,t){if(!t)return!0;if(e.sumThr!==t.sumThr)return e.sumThr>t.sumThr;for(let l=0;l<e.thrVec.length;l++)if(e.thrVec[l]!==t.thrVec[l])return e.thrVec[l]>t.thrVec[l];if(e.sumPoint!==t.sumPoint)return e.sumPoint>t.sumPoint;for(let l=0;l<e.ptVec.length;l++)if(e.ptVec[l]!==t.ptVec[l])return e.ptVec[l]>t.ptVec[l];return e.sumWill!==t.sumWill?e.sumWill<t.sumWill:e.roleSum!==t.roleSum&&e.roleSum>t.roleSum}(l,s)&&(s=l))}const N=c[o],j=t.has(N),w=j?null!==(b=e[N].minThreshold)&&void 0!==b?b:r(e[N].grade):-1/0;if(l.has(N))return void n(o+1,d,m,x,h,f,p,g);const y=u[o];for(const e of y){const t=i(e);if(j&&t<w)continue;let l=!1;for(const n of e.list)if(a.has(n.id)){l=!0;break}if(l)continue;e.list.forEach(e=>a.add(e.id));const s=d[N];d[N]=e,p[o]=t,g[o]=e.totalPoint,n(o+1,d,m+t,x+e.totalPoint,h+e.totalWill,f+e.roleSum,p,g),e.list.forEach(e=>a.delete(e.id)),d[N]=s,p[o]=0,g[o]=0}j||n(o+1,d,m,x,h,f,p,g)}(0,e.map(()=>o),0,0,0,0,Array(c.length).fill(0),Array(c.length).fill(0)),s}const h=new Set(d),f=x(h);if(f)return{picks:f.picks};if(c.length>0){const e=c[c.length-1],t=x(new Set([...h].filter(t=>t!==e)),new Set([e]));if(t){return{picks:t.picks.map((t,l)=>l===e?o:t||o)}}}const b=new Set;for(const p of d){var v;const t=null!==(v=e[p].minThreshold)&&void 0!==v?v:r(e[p].grade),l=c.indexOf(p);(u[l]||[]).some(e=>i(e)>=t)||b.add(p)}const N=x(new Set(d.filter(e=>!b.has(e))));if(N){return{picks:N.picks.map((e,t)=>b.has(t)?o:e||o)}}return{picks:e.map(()=>o)}}function _(e,t){const l={...e};("dealer"===t?w.support:w.dealer).forEach(e=>{l[e]=0});return w[t].forEach(e=>{l[e]=1}),l}function F(){try{const e=localStorage.getItem(E);return e?JSON.parse(e):null}catch(e){return console.warn("loadFromStorage fail",e),null}}const O="undefined"!==typeof document?document.body:null;function I(e){let{draggableId:t,index:l,children:s}=e;return(0,f.jsx)(x.sx,{draggableId:t,index:l,children:(e,t)=>{const l="function"===typeof s?s(e,t):s;return t.isDragging&&O?(0,n.createPortal)(l,O):l}})}function B(e){let{value:t,items:l,onChange:a,placeholder:o,className:c}=e;const[d,x]=(0,s.useState)(!1),h=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>x(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=s.useMemo(()=>Array.isArray(e)?e:[e],[e]),a=s.useRef(t);s.useEffect(()=>{a.current=t},[t]),s.useEffect(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([h,p],()=>x(!1)),(0,s.useLayoutEffect)(()=>{if(!d||!h.current)return;const e=h.current.getBoundingClientRect();g.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(g.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[d]);const v=l.find(e=>e.value===t),N=d?(0,f.jsx)(m.N,{children:(0,f.jsx)(u.P.ul,{ref:p,initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},style:{position:"fixed",top:g.current.top,left:g.current.left,width:g.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),x(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"opacity-40 cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:h,className:`relative min-w-0 ${c||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>x(e=>!e),className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50",children:[(0,f.jsx)("span",{className:"truncate text-sm",children:v?v.label:o||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:d?(0,f.jsx)(r.A,{size:16}):(0,f.jsx)(i.A,{size:16})})]}),d&&(0,n.createPortal)(N,document.body)]})}function z(e){let{toasts:t,onClose:l}=e;return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>(0,f.jsxs)(u.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:"pointer-events-auto overflow-hidden rounded-2xl border shadow-lg bg-amber-50/95 border-amber-200 text-amber-900 backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw]",children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:"text-sm font-medium text-amber-900/80 hover:text-amber-900 self-center",onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id))})})}function G(e){let{value:t,onChange:l,min:a,max:n,step:r=1,allowFloat:i=!1,zeroOnBlur:o=!0,className:c="",inputProps:d={}}=e;const m=e=>null===e||void 0===e?"":String(e),[u,x]=s.useState(m(t));s.useEffect(()=>{x(m(t))},[t]);const h=e=>{if(""===e)return o?null!==a&&void 0!==a?a:0:null;let t=Number(e);return Number.isFinite(t)?(t=i?t:Math.trunc(t),(e=>{let t=e;return null!=a&&t<a&&(t=a),null!=n&&t>n&&(t=n),t})(t)):o?null!==a&&void 0!==a?a:0:null};return(0,f.jsx)("input",{type:"number",inputMode:i?"decimal":"numeric",step:r,min:a,max:n,value:u,onChange:e=>{const t=e.target.value;if(""===t)return x(""),void(null===l||void 0===l||l(null));x(t);const s=Number(t);Number.isFinite(s)?null===l||void 0===l||l(i?s:Math.trunc(s)):null===l||void 0===l||l(null)},onBlur:()=>{const e=h(u);x(null==e?"":String(e)),null===l||void 0===l||l(e)},onWheel:e=>e.currentTarget.blur(),className:c,...d})}function H(){(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ud5ec\ud37c"},[]);const[e,t]=(0,s.useState)(()=>{var e,t;return null!==(e=null===(t=F())||void 0===t?void 0:t.category)&&void 0!==e?e:"order"}),[l,a]=(0,s.useState)(()=>{var e;const t=F();return null!==(e=null===t||void 0===t?void 0:t.coresByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[n,m]=(0,s.useState)(()=>{var e;const t=F();return null!==(e=null===t||void 0===t?void 0:t.gemsByCat)&&void 0!==e?e:{order:[],chaos:[]}}),[u,w]=(0,s.useState)("dealer"),[M,O]=(0,s.useState)({...y}),[H,D]=(0,s.useState)(null),[W,V]=(0,s.useState)(null),{toasts:U,push:Y,remove:J}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:e=>{const l=A();t(t=>[...t,{id:l,msg:e}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==l)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),q=l[e],K=n[e],X=t=>{a(l=>{const s="function"===typeof t?t(l[e]):t;return{...l,[e]:s}})},Z=t=>{m(l=>{const s="function"===typeof t?t(l[e]):t;return{...l,[e]:s}})},{picks:Q}=(0,s.useMemo)(()=>T(q,K,u,M),[q,K,u,M]),ee=(e,t)=>Z(l=>l.map(l=>l.id===e?{...l,...t}:l)),te=(e,t)=>X(l=>{if("name"in t){if(l.some(l=>l.id!==e&&l.name===t.name))return Y(`${t.name}\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucf54\uc5b4\uc785\ub2c8\ub2e4`),l}return l.map(l=>l.id===e?{...l,...t}:l)}),[le,se]=(0,s.useState)(!1),ae="h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white",ne="text-base font-semibold whitespace-nowrap",re="bg-white rounded-2xl shadow-sm",ie="px-2.5 py-1.5 rounded-xl bg-gray-100 text-xs lg:text-[13px]",oe="block text-xs text-gray-500 mb-1",ce=e=>e+1,de=(e,t)=>t-e;return(0,s.useEffect)(()=>{!function(){try{var e;const t=C({atk:2,add:"3",boss:-1});console.assert(2===t.atk&&3===t.add&&1===t.boss,"sanitizeWeights failed");const l={id:"t1",will:1,point:1,o1k:"atk",o1v:2,o2k:"brand",o2v:3};console.assert(P(l,"dealer",t)===2*t.atk,"scoreGemForRole dealer failed"),console.assert(P(l,"support",t)===3*(null!==(e=t.brand)&&void 0!==e?e:1),"scoreGemForRole support failed"),console.assert(R("RELIC",20).includes(20)&&0===R("RELIC",9).length,"thresholdsHit failed");const s=$([l],"RELIC","dealer",t),a=$([l,{...l,id:"t2",will:0,point:10}],"RELIC","dealer",t);console.assert(a.score>=s.score,"scoreCombo monotonicity failed"),console.log("\u2705 Self-tests passed")}catch(t){console.warn("\u274c Self-tests encountered an error",t)}}()},[]),(0,s.useEffect)(()=>{!function(e){try{localStorage.setItem(E,JSON.stringify(e))}catch(t){console.warn("saveToStorage fail",t)}}({category:e,coresByCat:l,gemsByCat:n,role:u,weights:M})},[e,l,n,u,M]),(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .btn-primary{ background: #000000; color:#fff; border:none; }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n        .ring-primary:focus{ outline:none; box-shadow:0 0 0 2px rgba(163,153,242,.35); }\n      "}),(0,f.jsx)("style",{children:"button{cursor:pointer}"}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ub3c4\uc6b0\ubbf8"}),(0,f.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:[(0,f.jsx)("button",{onClick:()=>t("order"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("order"===e?"bg-white":"bg-white/70"),title:"\uc9c8\uc11c \uce74\ud14c\uace0\ub9ac",children:L.order}),(0,f.jsx)("button",{onClick:()=>t("chaos"),className:"min-w-[84px] h-10 inline-flex items-center justify-center px-3 rounded-xl "+("chaos"===e?"bg-white":"bg-white/70"),title:"\ud63c\ub3c8 \uce74\ud14c\uace0\ub9ac",children:L.chaos})]})]})}),(0,f.jsxs)("section",{className:`${re} p-4 lg:p-6 !mt-2 ${le?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsxs)("h2",{className:ne,children:[L[e]," \ucf54\uc5b4 \uc785\ub825"]}),(0,f.jsx)("div",{className:"flex items-center gap-2 ml-auto whitespace-nowrap",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90 ring-primary",onClick:()=>X(e=>{if(e.length>=3)return Y("\ucf54\uc5b4\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc5b4\uc694."),e;const t=function(e){for(const t of S)if(!e.has(t))return t;return null}(new Set(e.map(e=>e.name)));if(!t)return Y("\ud574/\ub2ec/\ubcc4 \ucf54\uc5b4\uac00 \ubaa8\ub450 \ucd94\uac00\ub418\uc5b4 \uc788\uc5b4\uc694."),e;const l=A();return D(l),[{id:l,name:t,grade:"RELIC",minThreshold:void 0,enforceMin:!1},...e]}),"aria-label":"\ucf54\uc5b4 \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \ucf54\uc5b4 \ucd94\uac00"})]})})]}),(0,f.jsxs)("p",{className:"hidden lg:block text-xs text-gray-600",children:["\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("p",{className:"block lg:hidden text-xs text-gray-600",children:["\ud654\uc0b4\ud45c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)(x.JY,{onDragStart:()=>{requestAnimationFrame(()=>se(!0));const e=new Event("close-all-dropdowns");window.dispatchEvent(e)},onDragEnd:e=>{requestAnimationFrame(()=>se(!1)),e.destination&&X(t=>{const l=Array.from(t),[s]=l.splice(e.source.index,1);return l.splice(e.destination.index,0,s),l})},children:(0,f.jsx)(x.gL,{droppableId:"cores-droppable",ignoreContainerClipping:!0,children:e=>(0,f.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"flex flex-col gap-3",children:[q.map((e,t)=>{const l=p[e.grade],s=[{value:"",label:"(\uc120\ud0dd \uc548 \ud568)"}].concat(g[e.grade].map(e=>({value:String(e),label:`${e}P \uc774\uc0c1`}))),a=new Set(q.filter(t=>t.id!==e.id).map(e=>e.name)),n=k.map(e=>({...e,disabled:a.has(e.value)})),o=Math.min(...g[e.grade]);return(0,f.jsx)(I,{draggableId:e.id,index:t,children:a=>{var d;return(0,f.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-end border rounded-xl p-3 bg-white overflow-visible "+(e.id===H?"LoA-highlight":""),style:a.draggableProps.style,children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl self-start lg:self-center",children:["#",ce(t)]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[120px] w-full lg:w-40",children:[(0,f.jsx)("label",{className:oe,children:"\ucf54\uc5b4 \uc885\ub958"}),(0,f.jsx)(B,{className:"w-full lg:w-40",value:e.name,onChange:t=>te(e.id,{name:t}),items:n,placeholder:"\ucf54\uc5b4\uba85"})]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[160px] w-full lg:w-auto",children:[(0,f.jsx)("label",{className:oe,children:"\ucf54\uc5b4 \ub4f1\uae09"}),(0,f.jsx)(B,{className:"w-full lg:w-40",value:e.grade,onChange:t=>te(e.id,{grade:t}),items:v.map(e=>({value:e,label:b[e]})),placeholder:"\ucf54\uc5b4 \ub4f1\uae09"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:oe,children:"\uacf5\uae09 \uc758\uc9c0\ub825"}),(0,f.jsx)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center",children:(0,f.jsx)("span",{className:"text-primary font-semibold",children:l})})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:oe,children:"\ubaa9\ud45c \uad6c\uac04"}),(0,f.jsx)(B,{className:"w-full lg:w-40",value:String(null!==(d=e.minThreshold)&&void 0!==d?d:""),onChange:t=>{te(e.id,t?{minThreshold:Number(t),enforceMin:!0}:{minThreshold:void 0,enforceMin:!1})},items:s,placeholder:"\uad6c\uac04"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("input",{id:`enf-${e.id}`,type:"checkbox",className:"accent-primary",checked:e.enforceMin,onChange:t=>te(e.id,{enforceMin:t.target.checked})}),(0,f.jsx)("label",{htmlFor:`enf-${e.id}`,className:"text-sm",children:"\ubaa9\ud45c \uad6c\uac04 \uac15\uc81c"})]}),(0,f.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uc120\ud0dd \uc548 \ud568\uc774\uba74 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,f.jsx)("br",{className:"hidden lg:block"}),"\ucd5c\uc18c \uad6c\uac04 ",(0,f.jsxs)("b",{className:"text-primary",children:[o,"P"]}),"\uc744 \uae30\ubcf8 \ubaa9\ud45c\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4."]})]}),(0,f.jsxs)("div",{className:"lg:ml-auto lg:static absolute top-2 right-2 flex items-center gap-1",children:[(0,f.jsx)("div",{className:"hidden lg:hidden"}),(0,f.jsxs)("div",{className:"flex lg:hidden flex-row gap-1 mr-1",children:[(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,X(t=>{if(e<=0)return t;const l=[...t];return[l[e-1],l[e]]=[l[e],l[e-1]],l});var e},"aria-label":"\uc704\ub85c",children:(0,f.jsx)(r.A,{size:16})}),(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,X(t=>{if(e>=t.length-1)return t;const l=[...t];return[l[e+1],l[e]]=[l[e],l[e+1]],l});var e},"aria-label":"\uc544\ub798\ub85c",children:(0,f.jsx)(i.A,{size:16})})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,X(e=>e.length<=0?e:e.filter(e=>e.id!==t)),void(H===t&&D(null));var t},disabled:q.length<=0,"aria-label":"\ucf54\uc5b4 \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})]})]})}},e.id)}),e.placeholder]})})}),0===q.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\ucf54\uc5b4\ub97c \ucd94\uac00\ud558\uc138\uc694. (\ucd5c\ub300 3\uac1c\uc758 \ucf54\uc5b4\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)"})]})]}),(0,f.jsxs)("section",{className:`${re} p-4 lg:p-6 ${le?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 mb-3",children:[(0,f.jsxs)("h2",{className:ne,children:[L[e]," \uc82c \uc785\ub825"]}),(0,f.jsxs)("div",{className:"flex gap-2 ml-auto whitespace-nowrap",children:[(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>{const e=A();Z(t=>[{id:e,will:null,point:null,o1k:"atk",o1v:0,o2k:"add",o2v:0},...t]),V(e)},"aria-label":"\uc82c \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc82c \ucd94\uac00"})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>Z([]),"aria-label":"\uc804\uccb4 \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc804\uccb4 \uc0ad\uc81c"})]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col gap-3",children:[K.map((e,t)=>(0,f.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white "+(e.id===W?"LoA-highlight":""),children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",children:["#",de(t,K.length)]}),(0,f.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:oe,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,f.jsx)(G,{value:e.will,onChange:t=>ee(e.id,{will:t}),min:0,max:9,step:1,allowFloat:!1,className:`${ae} w-full lg:w-24`,inputProps:{title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825"}})]}),(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:oe,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,f.jsx)(G,{value:e.point,onChange:t=>ee(e.id,{point:t}),min:0,max:9,step:1,allowFloat:!1,className:`${ae} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:oe,children:"\uc635\uc158 1"}),(0,f.jsx)(B,{className:"w-full lg:w-44",value:e.o1k,onChange:t=>ee(e.id,{o1k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:oe,children:"\uc218\uce58"}),(0,f.jsx)(G,{value:e.o1v,onChange:t=>ee(e.id,{o1v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:oe,children:"\uc635\uc158 2"}),(0,f.jsx)(B,{className:"w-full lg:w-44",value:e.o2k,onChange:t=>ee(e.id,{o2k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:oe,children:"\uc218\uce58"}),(0,f.jsx)(G,{value:e.o2v,onChange:t=>ee(e.id,{o2v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsx)("div",{className:"lg:static absolute top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,Z(e=>e.filter(e=>e.id!==t)),void(W===t&&V(null));var t},"aria-label":"\uc82c \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})})]},e.id)),0===K.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\uc82c\uc744 \ucd94\uac00\ud558\uc138\uc694."})]})]}),(0,f.jsxs)("section",{className:`${re} p-4 lg:p-6 ${le?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsx)("h2",{className:ne,children:"\uc720\ud6a8\uc635\uc158 \uac00\uc911\uce58"}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>O({...y}),"aria-label":"\uac00\uc911\uce58 \ucd08\uae30\ud654",children:[(0,f.jsx)(d.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uac00\uc911\uce58 \ucd08\uae30\ud654"})]})]}),(0,f.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm",children:[(0,f.jsx)("span",{className:"text-xs text-gray-500",children:"\ud3ec\uc9c0\uc158 \uc120\ud0dd"}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",name:"role",checked:"dealer"===u,onChange:()=>{w("dealer"),O(e=>_(e,"dealer"))},className:"accent-primary"}),"\ub51c\ub7ec"]}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",name:"role",checked:"support"===u,onChange:()=>{w("support"),O(e=>_(e,"support"))},className:"accent-primary"}),"\uc11c\ud3ec\ud130"]})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsx)("div",{className:"grid grid-cols-2 gap-2 lg:flex lg:flex-nowrap text-sm min-w-0",children:j.map(e=>(0,f.jsxs)("div",{className:"bg-gray-50 border rounded-xl px-2 py-2 w-full lg:w-1/6 min-w-[120px]",children:[(0,f.jsx)("label",{className:oe,children:N[e]}),(0,f.jsx)(G,{value:M[e],onChange:t=>O(l=>({...l,[e]:t})),min:0,max:5,step:1e-4,allowFloat:!0,className:"h-10 w-full px-2 rounded-md border bg-white focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50"})]},e))})})]}),(0,f.jsxs)("section",{className:`${re} p-4 lg:p-6 ${le?"":"backdrop-blur"}`,children:[(0,f.jsx)("h2",{className:ne,children:"\uacb0\uacfc"}),(0,f.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["\ucf54\uc5b4 1\uac1c\ub2f9 \ucd5c\ub300 ",(0,f.jsx)("b",{children:"\uc82c 4\uac1c"}),"\uae4c\uc9c0 \uc7a5\ucc29\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,f.jsx)("div",{className:"space-y-4 mt-2",children:q.map((e,t)=>{const l=p[e.grade],s=null===Q||void 0===Q?void 0:Q[t],a=!!(s&&s.list&&s.list.length>0),n=Math.min(...g[e.grade]);return(0,f.jsxs)("div",{className:"border rounded-xl p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,f.jsxs)("div",{className:"text-base font-semibold",children:[e.name," ",(0,f.jsxs)("span",{className:"text-sm text-gray-500",children:["(",b[e.grade],")"]})]}),a&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:ie,children:["\ucd1d \uc758\uc9c0\ub825 ",(0,f.jsx)("span",{className:"font-semibold",children:String(s.totalWill)})," / \uacf5\uae09 ",(0,f.jsx)("span",{children:String(l)})," (",(0,f.jsxs)("span",{children:["\ub098\uba38\uc9c0 ",String(l-s.totalWill)]}),")"]}),(0,f.jsxs)("div",{className:ie,children:["\ucd1d \ud3ec\uc778\ud2b8 ",(0,f.jsx)("span",{className:"font-semibold",children:String(s.totalPoint)})]}),(()=>{const e=s.thr.length?Math.max(...s.thr):null;return(0,f.jsxs)("div",{className:ie,children:["\ub2ec\uc131 \uad6c\uac04 ",(0,f.jsx)("span",{className:"font-semibold",children:null!=e?String(e):"\uc5c6\uc74c"})]})})(),(0,f.jsxs)("div",{className:ie,children:["\uc720\ud6a8 \uc635\uc158 \ud569(",(0,f.jsx)("span",{className:"font-semibold",children:"dealer"===u?"\ub51c\ub7ec":"\uc11c\ud3ff"}),") ",(0,f.jsx)("span",{className:"font-semibold text-primary",children:String(s.roleSum.toFixed(4))})]})]})]}),a?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"hidden lg:block overflow-x-auto mt-2",children:(0,f.jsxs)("table",{className:"min-w-full text-sm",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc120\ud0dd"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1581"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1582"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc720\ud6a8\ud569"})]})}),(0,f.jsx)("tbody",{children:s.list.map(e=>{var t,l;const s=K.findIndex(t=>t.id===e.id),a=de(s,K.length);return(0,f.jsxs)("tr",{className:"border-t",children:[(0,f.jsxs)("td",{className:"px-2 py-2",children:["#",String(a)]}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(t=e.will)&&void 0!==t?t:0)}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(l=e.point)&&void 0!==l?l:0)}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[e.o1k]," ",String(e.o1v)]}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[e.o2k]," ",String(e.o2v)]}),(0,f.jsx)("td",{className:"px-2 py-2 text-primary",children:String(P(e,u,C(M)).toFixed(4))})]},e.id)})})]})}),(0,f.jsx)("div",{className:"lg:hidden mt-2 space-y-2",children:s.list.map(e=>{const t=K.findIndex(t=>t.id===e.id),l=de(t,K.length);return(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsxs)("div",{className:"font-medium",children:["#",String(l)]}),(0,f.jsxs)("div",{className:"text-xs text-primary",children:["\uc720\ud6a8\ud569 ",String(P(e,u,C(M)).toFixed(2))]})]}),(0,f.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-sm",children:[(0,f.jsx)("div",{className:"text-gray-500",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("div",{children:String(e.will)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-primary",children:String(e.point)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1581"}),(0,f.jsxs)("div",{children:[N[e.o1k]," ",String(e.o1v)]}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1582"}),(0,f.jsxs)("div",{children:[N[e.o2k]," ",String(e.o2v)]})]})]},e.id)})})]}):(0,f.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:["\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. (\uc774 \ucf54\uc5b4\uc5d0 \ubc30\uc815 \uac00\ub2a5\ud55c \uc870\ud569\uc774 \uc5c6\uac70\ub098, \ubaa9\ud45c \uad6c\uac04\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.",null==e.minThreshold?` / \ucd5c\uc18c ${n}P \uc790\ub3d9 \uc801\uc6a9\uc911`:"",")"]})]},e.id)})})]})]}),(0,f.jsx)(z,{toasts:U,onClose:J}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}var D=l(596),W=l(693),V=l(899),U=l(829),Y=l(655);const J=!0,q=!0;function K(e){let t=2166136261;for(let l=0;l<e.length;l++)t^=e.charCodeAt(l),t=Math.imul(t,16777619);return t>>>0}function X(e){return K(JSON.stringify(e))||1}function Z(e){let t=e>>>0;return function(){return t^=t<<13,t>>>=0,t^=t>>>17,t>>>=0,t^=t<<5,t>>>=0,(t>>>0)/4294967296}}const Q=e=>!(Number(e)>0),ee=e=>Number(e)>=1,te={LEGEND_MIN:4,LEGEND_MAX:15,RELIC_MIN:16,RELIC_MAX:18,ANCIENT_MIN:19},le={"\uc9c8\uc11c-\uc548\uc815":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\uc9c8\uc11c-\uacac\uace0":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\uc9c8\uc11c-\ubd88\ubcc0":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\uce68\uc2dd":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\ud63c\ub3c8-\uc65c\uace1":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\ubd95\uad34":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]}},se={"\uace0\uae09":5,"\ud76c\uadc0":7,"\uc601\uc6c5":9},ae={"\uace0\uae09":0,"\ud76c\uadc0":1,"\uc601\uc6c5":2},ne=1,re=5,ie=900,oe=(e,t,l)=>Math.max(t,Math.min(l,e));function ce(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"0%":t>=1?"100.00000%":(100*t).toFixed(5)+"%"}const de=e=>ce(e),me=e=>e.toLocaleString();function ue(e,t){return!Number.isFinite(e)||e<=0?0:!Number.isFinite(t)||t<=0?1/0:e/t}const xe=e=>`${Math.max(0,Math.min(100,Math.round(100*(Number(e)||0))))}%`;function he(e){return e>=.2?{label:"\ub0ae\uc74c",tone:"bg-emerald-50 border-emerald-200 text-emerald-800"}:e>=.05?{label:"\ubcf4\ud1b5",tone:"bg-amber-50 border-amber-200 text-amber-800"}:e>=.01?{label:"\ub192\uc74c",tone:"bg-orange-50 border-orange-200 text-orange-800"}:{label:"\ub9e4\uc6b0 \ub192\uc74c",tone:"bg-rose-50 border-rose-200 text-rose-800"}}function fe(e,t){if(t<=0)return 0;if(0===e)return 0;if(e===t)return 1;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mle"){case"laplace":return(e+1)/(t+2);case"jeffreys":return(e+.5)/(t+1);default:return e/t}}const pe=!0,ge=[{value:1e3,label:"1,000\ud68c (\ube60\ub984)"},{value:5e3,label:"5,000\ud68c (\ubcf4\ud1b5)"},{value:1e4,label:"10,000\ud68c (\ucd94\ucc9c)"},{value:5e4,label:"50,000\ud68c (\uc815\ubc00)"}];function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return 1-Math.pow(t,1/e)}const ve=e=>e>=2e5?1e-4:e>=1e5?2e-4:e>=5e4?3e-4:e>=1e4?5e-4:e>=5e3?7e-4:.001,Ne=e=>e>=5e4?1e3:e>=1e4?800:e>=5e3?600:400;function je(e,t){const l=le[e];return l?"\uacf5\uaca9\ud615"===t?l.attack:"\uc9c0\uc6d0\ud615"===t?l.support:[...l.attack,...l.support]:[]}const we=e=>e.eff+e.pts+e.aLvl+e.bLvl;function ye(e){return e>=te.ANCIENT_MIN?"\uace0\ub300":e>=te.RELIC_MIN&&e<=te.RELIC_MAX?"\uc720\ubb3c":e>=te.LEGEND_MIN&&e<=te.LEGEND_MAX?"\uc804\uc124":"\ub4f1\uae09 \ubbf8\ub9cc"}function ke(e,t,l,s,a,n){const r=l.eff>=s.eff&&l.pts>=s.pts;if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=je(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?i.includes(e)&&t>=s:e===l&&t>=s;if("ANY_ONE"===t){const e=c&&(m(l.aName,l.aLvl,c,s.aLvl)||m(l.bName,l.bLvl,c,s.aLvl));return r&&!!e}return!(!c||!d)&&(r&&(m(l.aName,l.aLvl,c,s.aLvl)&&m(l.bName,l.bLvl,d,s.bLvl)||m(l.aName,l.aLvl,d,s.bLvl)&&m(l.bName,l.bLvl,c,s.aLvl)))}function Le(e){return 1!==e}function Ee(e,t,l,s,a){const n=e,r=[];n.eff<5&&r.push({slot:{kind:"EFF",delta:1},w:11.65}),n.eff<=3&&r.push({slot:{kind:"EFF",delta:2},w:4.4}),n.eff<=2&&r.push({slot:{kind:"EFF",delta:3},w:1.75}),n.eff<=1&&r.push({slot:{kind:"EFF",delta:4},w:.45}),Le(n.eff)&&r.push({slot:{kind:"EFF",delta:-1},w:3}),n.pts<5&&r.push({slot:{kind:"PTS",delta:1},w:11.65}),n.pts<=3&&r.push({slot:{kind:"PTS",delta:2},w:4.4}),n.pts<=2&&r.push({slot:{kind:"PTS",delta:3},w:1.75}),n.pts<=1&&r.push({slot:{kind:"PTS",delta:4},w:.45}),Le(n.pts)&&r.push({slot:{kind:"PTS",delta:-1},w:3}),n.aLvl<5&&r.push({slot:{kind:"A_LVL",delta:1},w:11.65}),n.aLvl<=3&&r.push({slot:{kind:"A_LVL",delta:2},w:4.4}),n.aLvl<=2&&r.push({slot:{kind:"A_LVL",delta:3},w:1.75}),n.aLvl<=1&&r.push({slot:{kind:"A_LVL",delta:4},w:.45}),Le(n.aLvl)&&r.push({slot:{kind:"A_LVL",delta:-1},w:3}),n.bLvl<5&&r.push({slot:{kind:"B_LVL",delta:1},w:11.65}),n.bLvl<=3&&r.push({slot:{kind:"B_LVL",delta:2},w:4.4}),n.bLvl<=2&&r.push({slot:{kind:"B_LVL",delta:3},w:1.75}),n.bLvl<=1&&r.push({slot:{kind:"B_LVL",delta:4},w:.45}),Le(n.bLvl)&&r.push({slot:{kind:"B_LVL",delta:-1},w:3});const i=je(s,"\uc0c1\uad00 \uc5c6\uc74c"),o=i.filter(e=>e!==n.bName&&e!==n.aName).length>0,c=i.filter(e=>e!==n.aName&&e!==n.bName).length>0;return o&&r.push({slot:{kind:"A_CHANGE"},w:3.25}),c&&r.push({slot:{kind:"B_CHANGE"},w:3.25}),t>1&&(1!==a&&r.push({slot:{kind:"COST",mod:1},w:1.75}),-1!==a&&r.push({slot:{kind:"COST",mod:-1},w:1.75}),r.push({slot:{kind:"REROLL_PLUS",amount:1},w:2.5}),r.push({slot:{kind:"REROLL_PLUS",amount:2},w:.75})),r.push({slot:{kind:"HOLD"},w:1.75}),r}function Se(e,t){switch(e.kind){case"EFF":return"\uc758\uc9c0\ub825 \ud6a8\uc728 "+(e.delta>0?"+"+e.delta:"-1");case"PTS":return"\ud3ec\uc778\ud2b8 "+(e.delta>0?"+"+e.delta:"-1");case"A_LVL":return`${t.aName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"B_LVL":return`${t.bName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"A_CHANGE":return`${t.aName} \ud6a8\uacfc \ubcc0\uacbd`;case"B_CHANGE":return`${t.bName} \ud6a8\uacfc \ubcc0\uacbd`;case"COST":return 1===e.mod?"\uac00\uacf5 \ube44\uc6a9 +100% \uc99d\uac00":"\uac00\uacf5 \ube44\uc6a9 -100% \uac10\uc18c";case"HOLD":return"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0";case"REROLL_PLUS":return"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 "+(2===e.amount?"+2\ud68c":"+1\ud68c");default:return""}}function Ae(e,t){const l=e=>e.includes("-1")?-1:parseInt(e.replace(/[^0-9]/g,""),10)||1;return(e=e.trim()).startsWith("\uc758\uc9c0\ub825 \ud6a8\uc728")?{kind:"EFF",delta:l(e)}:e.startsWith("\ud3ec\uc778\ud2b8")?{kind:"PTS",delta:l(e)}:e.startsWith(t.aName+" ")?e.includes("\ubcc0\uacbd")?{kind:"A_CHANGE"}:{kind:"A_LVL",delta:l(e)}:e.startsWith(t.bName+" ")?e.includes("\ubcc0\uacbd")?{kind:"B_CHANGE"}:{kind:"B_LVL",delta:l(e)}:e.startsWith("\uac00\uacf5 \ube44\uc6a9")?{kind:"COST",mod:e.includes("+100%")?1:-1}:e.startsWith("\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")?{kind:"HOLD"}:e.startsWith("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30")?{kind:"REROLL_PLUS",amount:e.includes("+2")?2:1}:null}function Ce(e,t,l,s,a,n){const r="function"===typeof n?n:Math.random;let i={...l};const o=ie*(-1===a?0:1===a?2:1);let c=0,d=0;const m=je(e,"\uc0c1\uad00 \uc5c6\uc74c");switch(s.kind){case"EFF":i.eff=oe(i.eff+s.delta,0,re);break;case"PTS":i.pts=oe(i.pts+s.delta,0,re);break;case"A_LVL":i.aLvl=oe(i.aLvl+s.delta,0,re);break;case"B_LVL":i.bLvl=oe(i.bLvl+s.delta,0,re);break;case"A_CHANGE":{const e=m.filter(e=>e!==i.bName&&e!==i.aName);if(e.length){const t=e[Math.floor(r()*e.length)];i.aName=t}break}case"B_CHANGE":{const e=m.filter(e=>e!==i.aName&&e!==i.bName);if(e.length){const t=e[Math.floor(r()*e.length)];i.bName=t}break}case"COST":c=s.mod;break;case"HOLD":default:break;case"REROLL_PLUS":d+=s.amount}return{next:i,goldThisAttempt:o,nextRate:c,rerollDelta:d}}const Pe={successProb:0,legendProb:0,relicProb:0,ancientProb:0,expectedGold:0};function Me(e,t,l,s,a,n,r,i,o,c,d,m,u){let x=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{};const{maxTrials:h=5e4,epsilon:f=.002,batch:p=1e3,minTrials:g=Math.min(1e4,h),estimator:b="jeffreys",useAntithetic:v=!0,autoScaleRare:N=!0,rareTargetSuccesses:j=100,rareMaxTrials:w=2e5,rareTiers:y=[2e5]}=x,k=s=>function(e,t,l,s,a,n){let r=Math.max(0,s.eff-l.eff)+Math.max(0,s.pts-l.pts);if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=je(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?(i.includes(e)?0:1)+Math.max(0,s-t):(e===l?0:1)+Math.max(0,s-t);if("ANY_ONE"===t){if(!c)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,c,s.aLvl),t=m(l.bName,l.bLvl,c,s.aLvl);r+=Math.min(e,t)}else{if(!c||!d)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,c,s.aLvl)+m(l.bName,l.bLvl,d,s.bLvl),t=m(l.aName,l.aLvl,d,s.bLvl)+m(l.bName,l.bLvl,c,s.aLvl);r+=Math.min(e,t)}return r}(t,l,s,a,e,u),L=m=>{const x=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=m()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1};let h={...s},f=0,p=r,g=i,b=c,v=o,N=!0;if("STOP_ON_SUCCESS"===n&&ke(t,l,h,a,e,u)){const e=ye(we(h));return{successProb:1,legendProb:"\uc804\uc124"===e?1:0,relicProb:"\uc720\ubb3c"===e?1:0,ancientProb:"\uace0\ub300"===e?1:0,expectedGold:0}}for(;p>0;){let s=[];if(N&&d.length>0)s=d.slice(0,4);else{const t=Ee(h,p,0,e,v);if(!t.length)break;const l=[...t],a=Math.min(4,l.length);for(let e=0;e<a;e++){const e=x(l);s.push(l[e].slot),l.splice(e,1)}}if(pe){const t=s[Math.floor(m()*s.length)],l=Ce(e,0,h,t,v,m);h=l.next,f+=l.goldThisAttempt,v=l.nextRate,g+=l.rerollDelta,b=!0}else{const l=je(e,t),a=h.aName,n=h.bName,r=l.some(e=>e!==n&&e!==a),i=l.some(e=>e!==a&&e!==n),o=k(h);let c=null;for(const t of s){if("A_CHANGE"===t.kind&&!r)continue;if("B_CHANGE"===t.kind&&!i)continue;const l=Ce(e,0,h,t,v,m),s=o-k(l.next);(!c||s>c.gain)&&(c={next:l.next,gold:l.goldThisAttempt,nextRate:l.nextRate,rrd:l.rerollDelta,gain:s})}if(c&&c.gain<=0&&b&&g>0){g-=1,N=!1;continue}c&&(h=c.next,f+=c.gold,v=c.nextRate,g+=c.rrd,b=!0)}if(p-=1,N=!1,"STOP_ON_SUCCESS"===n&&ke(t,l,h,a,e,u))break}const j=ye(we(h));return{successProb:ke(t,l,h,a,e,u)?1:0,legendProb:"\uc804\uc124"===j?1:0,relicProb:"\uc720\ubb3c"===j?1:0,ancientProb:"\uace0\ub300"===j?1:0,expectedGold:f}};let E=0,S=0,A=0,C=0,P=0,M=0,R={...Pe,trialsUsed:0,ci:{low:0,high:0,halfWidth:0}},$=h,T=!1;const _=Array.isArray(y)&&y.length?[...y].sort((e,t)=>e-t):[w],F=_[_.length-1],O=e=>_.find(t=>t>e)||e,I=_[0],B=(e,t)=>(e>>>0^Math.imul(t+1>>>0,2654435761)>>>0)>>>0,z=()=>{const e=S/Math.max(1,E);let t;if(0===e){const e=be(E);t={low:0,high:e,halfWidth:e/2}}else if(1===e){const e=1-be(E);t={low:e,high:1,halfWidth:(1-e)/2}}else{const l=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96;const s=1+l*l/t,a=(e+l*l/(2*t))/s,n=l/s*Math.sqrt(e*(1-e)/t+l*l/(4*t*t));return{low:Math.max(0,a-n),high:Math.min(1,a+n)}}(e,E);t={low:l.low,high:l.high,halfWidth:(l.high-l.low)/2}}return R.ci=t,t};for(;E<$;){const e=p;for(let l=0;l<e&&!(E>=$);l++){const e=B(m>>>0,E+l),t=L(Z(e));if(S+=t.successProb,A+=t.legendProb,C+=t.relicProb,P+=t.ancientProb,M+=t.expectedGold,E+=1,v&&E<$){const t=Z(e),l=L(()=>1-t());S+=l.successProb,A+=l.legendProb,C+=l.relicProb,P+=l.ancientProb,M+=l.expectedGold,E+=1}}const t=z().halfWidth||0;if(N&&E>=g&&0===S&&$<F){$=$<I?I:O($),T=!0;continue}if(N&&E>=g&&S<j&&$<F){const e=$<I?I:O($);$=Math.min(F,e);continue}if(!T&&t<=f&&E>=g)break}return R.trialsUsed=E,R.successProb=fe(S,E,b),R.legendProb=fe(A,E,b),R.relicProb=fe(C,E,b),R.ancientProb=fe(P,E,b),R.expectedGold=M/Math.max(1,E),R.successes=0|S,R}const Re={legend:"linear-gradient(90deg, #7A3E00, #B16800)",relic:"linear-gradient(90deg, #8C2F06, #AB4102)",ancient:"linear-gradient(90deg, #A67C37, #F5DFAB)"};function $e(e){let{value:t,items:l,onChange:a,placeholder:n,className:o,disabled:c,bordered:d=!0}=e;const[x,h]=(0,s.useState)(!1),p=(0,s.useRef)(null),g=(0,s.useRef)(null),b=(0,s.useRef)({top:0,left:0,width:0}),[,v]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>h(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=(0,s.useMemo)(()=>Array.isArray(e)?e:[e],[e]),a=(0,s.useRef)(t);(0,s.useEffect)(()=>{a.current=t},[t]),(0,s.useEffect)(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([p,g],()=>h(!1)),(0,s.useLayoutEffect)(()=>{if(!x||!p.current)return;const e=p.current.getBoundingClientRect();b.current={top:e.bottom+4,left:e.left,width:e.width},v(e=>e+1);const t=()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(b.current={top:t.bottom+4,left:t.left,width:t.width},v(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[x]);const N=l.find(e=>e.value===t),j=x&&!c?(0,f.jsx)(m.N,{children:(0,f.jsx)(u.P.ul,{ref:g,initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.12},style:{position:"fixed",top:b.current.top,left:b.current.left,width:b.current.width,zIndex:9999},className:"rounded-xl bg-white shadow-lg overflow-auto max-h-60 "+(d?"border":""),children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),h(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:p,className:`relative min-w-0 ${o||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>!c&&h(e=>!e),disabled:c,className:`min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 ${d?"border":""} ${c?"cursor-not-allowed":""}`,children:[(0,f.jsx)("span",{className:"truncate text-sm",children:N?N.label:n||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:x?(0,f.jsx)(r.A,{size:16}):(0,f.jsx)(i.A,{size:16})})]}),x&&j]})}function Te(e){let{toasts:t,onClose:l}=e;const s=e=>({success:"text-emerald-900/80 hover:text-emerald-900",info:"text-sky-900/80 hover:text-sky-900",warning:"text-amber-900/80 hover:text-amber-900",error:"text-rose-900/80 hover:text-rose-900"}[e]||"text-amber-900/80 hover:text-amber-900");return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex space-y-2 flex-col items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>{return(0,f.jsxs)(u.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:`pointer-events-auto overflow-hidden rounded-2xl border shadow-lg backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw] ${t=e.tone,{success:"bg-emerald-50/95 border-emerald-200 text-emerald-900",info:"bg-sky-50/95 border-sky-200 text-sky-900",warning:"bg-amber-50/95 border-amber-200 text-amber-900",error:"bg-rose-50/95 border-rose-200 text-rose-900"}[t]||"bg-amber-50/95 border-amber-200 text-amber-900"}`,children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:`text-sm font-medium self-center ${s(e.tone)}`,onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id);var t})})})}function _e(e){let{value:t,set:l,onChange:a,min:n=ne,max:r=99,step:i=1,allowFloat:o=!1,zeroOnBlur:c=!0,className:d="",inputProps:m={},disabled:u}=e;const x=e=>null===e||void 0===e?"":String(e),[h,p]=s.useState(x(t));s.useEffect(()=>{p(x(t))},[t]);const g=e=>{let t=e;return null!=n&&t<n&&(t=n),null!=r&&t>r&&(t=r),t},b="function"===typeof a,v="function"===typeof l;return(0,f.jsx)("input",{type:"number",inputMode:o?"decimal":"numeric",step:i,min:n,max:r,disabled:u,value:h,onChange:e=>{const t=e.target.value;if(""===t)return p(""),void(b&&a(null));p(t);const s=Number(t);if(!Number.isFinite(s))return void(b&&a(null));const n=o?s:Math.trunc(s);b?a(n):v&&l(g(n))},onBlur:()=>{const e=(e=>{if(""===e)return c?null!==n&&void 0!==n?n:0:null;let t=Number(e);return Number.isFinite(t)?(t=o?t:Math.trunc(t),g(t)):c?null!==n&&void 0!==n?n:0:null})(h);p(null==e?"":String(e)),b?a(e):v&&l(null==e?null!==n&&void 0!==n?n:0:e)},onWheel:e=>e.currentTarget.blur(),className:`h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white ${d}`,...m})}const Fe=e=>{let{value:t,set:l,options:s,disabled:a,placeholder:n}=e;const r=(s||[]).map(e=>{var t,l;return"string"===typeof e?{value:e,label:e}:{value:null!==(t=e.value)&&void 0!==t?t:e,label:null!==(l=e.label)&&void 0!==l?l:String(e)}});return(0,f.jsx)($e,{value:t,onChange:l,items:r,disabled:!!a,className:"w-full lg:w-full",placeholder:n||"\uc120\ud0dd"})};function Oe(e){const t=e.filter(Boolean);return new Set(t).size!==t.length}function Ie(){var e;const{toasts:t,push:l,remove:a}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const s=Math.random().toString(36).slice(2,9);t(t=>[...t,{id:s,msg:e,tone:l}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==s)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),[n,r]=(0,s.useState)("\uc9c8\uc11c-\uc548\uc815"),[i,o]=(0,s.useState)("\uc0c1\uad00 \uc5c6\uc74c"),[c,m]=(0,s.useState)("\uace0\uae09"),[x,p]=(0,s.useState)("ANY_ONE"),g=(0,s.useMemo)(()=>je(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),b=(0,s.useMemo)(()=>je(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),[v,N]=(0,s.useState)({eff:ne,pts:ne,aName:g[0],aLvl:ne,bName:g[1]||g[0],bLvl:ne}),[j,w]=(0,s.useState)({eff:ne,pts:ne,aLvl:ne,bLvl:ne}),[y,k]=(0,s.useState)({aName:je(n,i)[0],bName:je(n,i)[1]||je(n,i)[0]}),[L,E]=(0,s.useState)(!1),[S,A]=(0,s.useState)(!1),[C,P]=(0,s.useState)(!1),M=v.aName!==v.bName,[R,$]=(0,s.useState)(1e4),T=(0,s.useRef)(!1);(0,s.useEffect)(()=>{T.current||(T.current=!0,N(e=>({...e,eff:Math.max(e.eff,ne),pts:Math.max(e.pts,ne),aLvl:Math.max(e.aLvl,ne),bLvl:Math.max(e.bLvl,ne)})),w(e=>({...e,eff:Math.max(e.eff,ne),pts:Math.max(e.pts,ne),aLvl:Math.max(e.aLvl,ne),bLvl:Math.max(e.bLvl,ne)})))},[]);const[_,F]=(0,s.useState)(()=>({attemptsLeft:se[c],rerolls:ae[c],unlocked:!1,costAddRate:0,gold:0,state:{...v}}));(0,s.useEffect)(()=>{F(e=>({...e,attemptsLeft:se[c],rerolls:ae[c],state:{...v},unlocked:!1,costAddRate:0,gold:0}))},[c,v]);const[O,I]=(0,s.useState)(null),[B,z]=(0,s.useState)(""),[G,H]=(0,s.useState)({past:[],future:[]}),te=(0,s.useCallback)(()=>({manual:JSON.parse(JSON.stringify(_)),changeMode:O?{...O,options:[...O.options]}:null,changePick:B}),[_,O,B]),fe=(0,s.useCallback)(e=>{F(e.manual),I(e.changeMode),z(e.changePick)},[]),pe=(0,s.useCallback)(()=>{H(e=>{const t=[...e.past,te()];for(;t.length>50;)t.shift();return{past:t,future:[]}})},[te]),be=G.past.length>0,we=G.future.length>0,[ye,ke]=(0,s.useState)([]),Le=()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`},Pe=(0,s.useCallback)(e=>{ke(t=>[{id:Math.random().toString(36).slice(2),time:Le(),...e},...t].slice(0,200))},[]),Ie=(0,s.useCallback)(()=>{H(e=>{if(0===e.past.length)return e;const t=e.past[e.past.length-1],l=e.past.slice(0,-1),s=te();return fe(t),Pe({type:"undo",title:"\ub418\ub3cc\ub9ac\uae30",detail:"\uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uad6c"}),{past:l,future:[s,...e.future]}})},[fe,te,Pe]),Be=(0,s.useCallback)(()=>{H(e=>{if(0===e.future.length)return e;const t=e.future[0],l=e.future.slice(1),s=te();return fe(t),Pe({type:"redo",title:"\ub2e4\uc2dc\ud558\uae30",detail:"\ub418\ub3cc\ub9ac\uae30 \ucde8\uc18c"}),{past:[...e.past,s],future:l}})},[fe,te,Pe]);(0,s.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key.toLowerCase()&&(e.preventDefault(),e.shiftKey?we&&Be():be&&Ie())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[be,we,Ie,Be]);const ze=(e,t)=>{const l=[],s=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;e[s]!==t[s]&&l.push(`${a} ${e[s]}\u2192${t[s]}`)};if(s("eff","\ud6a8\uc728"),s("pts","\ud3ec\uc778\ud2b8"),e.aName!==t.aName||e.aLvl!==t.aLvl){const s=e.aName===t.aName?t.aName:`${e.aName}\u2192${t.aName}`;l.push(`A ${s} Lv.${e.aLvl}\u2192${t.aLvl}`)}if(e.bName!==t.bName||e.bLvl!==t.bLvl){const s=e.bName===t.bName?t.bName:`${e.bName}\u2192${t.bName}`;l.push(`B ${s} Lv.${e.bLvl}\u2192${t.bLvl}`)}return l.join(" \xb7 ")};(0,s.useEffect)(()=>{const e=je(n,i);k(t=>{const l=e.includes(t.aName)?t.aName:e[0],s=e[1]||e[0],a=e.includes(t.bName)?t.bName:l===s?e.find(e=>e!==l)||l:s;return{aName:l,bName:a}})},[n,i]);const Ge=(0,s.useMemo)(()=>{const e=Ee(_.state,_.attemptsLeft,0,n,_.costAddRate).map(e=>Se(e.slot,_.state));return Array.from(new Set(e))},[_.state,_.attemptsLeft,_.costAddRate,i,n]),He=(0,s.useMemo)(()=>{const e=["\uc758\uc9c0\ub825 \ud6a8\uc728 +1","\ud3ec\uc778\ud2b8 +1",`${_.state.aName} Lv. +1`,`${_.state.bName} Lv. +1`],t=[];let l=0;for(const r of e)if(Ge.includes(r)&&!t.includes(r))t.push(r);else{for(var s;l<Ge.length&&t.includes(Ge[l]);)l++;t.push(null!==(s=Ge[l])&&void 0!==s?s:r),l++}for(;t.length<4;){for(var a,n;l<Ge.length&&t.includes(Ge[l]);)l++;t.push(null!==(a=null!==(n=Ge[l++])&&void 0!==n?n:Ge[0])&&void 0!==a?a:"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")}return t.slice(0,4)},[Ge,_.state.aName,_.state.bName]),[De,We]=(0,s.useState)(He);(0,s.useEffect)(()=>{We(e=>{const t=e.map((e,t)=>{var l,s;return Ge.includes(e)?e:null!==(l=null!==(s=Ge[t])&&void 0!==s?s:Ge[0])&&void 0!==l?l:e}),l=new Set;for(let s=0;s<t.length;s++){if(!l.has(t[s])){l.add(t[s]);continue}const e=Ge.find(e=>!l.has(e));e&&(t[s]=e,l.add(e))}return t})},[Ge]);const[Ve,Ue]=(0,s.useState)(null),[Ye,Je]=(0,s.useState)(null),[qe,Ke]=(0,s.useState)(!1),Xe=(0,s.useRef)(0),Ze=(0,s.useRef)(null),Qe=(0,s.useRef)(null),[et,tt]=(0,s.useState)(null);(0,s.useLayoutEffect)(()=>{const e=()=>{Qe.current&&tt(Qe.current.offsetHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[_,De,Ye,Ve,O,C,L,S]);const lt=.0025,st=(0,s.useCallback)((e,t,l,s,a,n,r)=>{let i=0,o=0;for(const c of e){const e=Ae(c,a.state);if(!e)continue;if("A_CHANGE"===e.kind){if(!(je(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.bName&&e!==a.state.aName).length>0))continue}if("B_CHANGE"===e.kind){if(!(je(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.aName&&e!==a.state.bName).length>0))continue}const d=Ce(t,0,a.state,e,a.costAddRate,()=>Z(r+K(c))()),m={attemptsLeft:a.attemptsLeft-1,rerolls:a.rerolls+d.rerollDelta,unlocked:!0,costAddRate:d.nextRate,gold:a.gold+d.goldThisAttempt,state:d.next};i+=Me(t,l,s,m.state,n,"RUN_TO_END",m.attemptsLeft,m.rerolls,m.costAddRate,m.unlocked,[],r+K(c),y,{maxTrials:Math.min(8e3,R),minTrials:Math.min(8e3,R),epsilon:.006,batch:500,estimator:"jeffreys",useAntithetic:J,autoScaleRare:!1}).successProb,o+=1}return o?i/o:0},[y,R]);function at(e,t,l,s){const a=Z(e),n=[...Ee(s.state,s.attemptsLeft,0,t,s.costAddRate)],r=[],i=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=a()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1},o=Math.min(4,n.length);for(let c=0;c<o;c++){const e=i(n);r.push(n[e].slot),n.splice(e,1)}return r}function nt(e,t){return e.map(e=>Se(e,t))}const rt=(0,s.useMemo)(()=>{if(!_.unlocked)return{shouldReroll:!1,reason:"\uccab \uac00\uacf5 \uc774\uc804\uc5d0\ub294 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \ucd94\ucc9c\uc744 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."};if(_.rerolls<=0)return{shouldReroll:!1,reason:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."};if(_.attemptsLeft<=0)return{shouldReroll:!1,reason:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud310\ub2e8\uc774 \ubb34\uc758\ubbf8\ud569\ub2c8\ub2e4."};const e="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":x,t=X({gemKey:n,pos:i,rarity:c,manual:_,tgt:j,manLabels:De,abForEval:e,salt:"REROLL_EV"}),l=st(De,n,i,e,_,j,t+7);let s=0;for(let c=0;c<16;c++){const l=t+1e3+31*c,a={..._,rerolls:_.rerolls-1},r=nt(at(l,n,0,a),a.state);s+=st(r,n,i,e,a,j,l+17)}const a=s/16,r=a-l,o=e=>(100*e).toFixed(2)+"%";return r>lt?{shouldReroll:!0,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)} \u2192 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)} (\u25b2${o(r)}).`}:r<-lt?{shouldReroll:!1,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)}\uac00 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)}\ubcf4\ub2e4 \uc720\ub9ac (\u25bc${o(-r)}).`}:{shouldReroll:!1,reason:`\ub450 \uacbd\ub85c \ucc28\uc774 \ubbf8\ubbf8: \ud604\uc7ac ${o(l)} vs \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${o(a)} (|\u0394| < ${.25.toFixed(2)}%).`}},[n,i,c,_,j,De,x,st]);function it(){if(!O)return;if(!ht)return void l("\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815\uc740 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning");pe();const e=ie*(-1===_.costAddRate?0:1===_.costAddRate?2:1),t={..._.state};F(t=>{const l={...t.state};return"A"===O.who?l.aName=B:l.bName=B,{attemptsLeft:t.attemptsLeft-1,rerolls:t.rerolls,unlocked:!0,costAddRate:t.costAddRate,gold:t.gold+e,state:l}});const s={..._.state,..."A"===O.who?{aName:B}:{bName:B}};Pe({type:"change",title:`\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815 (${O.who}) \u2192 ${B}`,detail:ze(t,s),meta:{cost:e}}),I(null),l("\uc120\ud0dd\ud55c \ud6a8\uacfc\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success")}function ot(){I(null),l("\ud6a8\uacfc \ubcc0\uacbd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","warning")}(0,s.useEffect)(()=>{if("BOTH"!==x||"\uc0c1\uad00 \uc5c6\uc74c"===i)return;const e=je(n,i);k(t=>{const l=e.includes(t.aName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.aName?t.aName:e[0],s=e.find(e=>e!==l)||e[0],a=e.includes(t.bName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.bName&&t.bName!==l?t.bName:s;return{aName:l,bName:a}})},[x,n,i]),(0,s.useEffect)(()=>{if(!C||!M)return Ue(null),void Je(null);if(Oe(De))return Ue(null),void Je(null);const e=De.map(e=>Ae(e,_.state)).filter(e=>!!e),t="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":x,l=X({gemKey:n,pos:i,rarity:c,manual:_,tgt:j,selectedFirstFour:e,calcMode:"\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":x}),s=++Xe.current;return Ke(!0),Ze.current&&clearTimeout(Ze.current),Ze.current=setTimeout(()=>{const a={maxTrials:R,minTrials:R,epsilon:ve(R),batch:Ne(R),estimator:"jeffreys",useAntithetic:J,autoScaleRare:q,rareTargetSuccesses:100,rareTiers:[2e5]},r=Me(n,i,t,_.state,j,"STOP_ON_SUCCESS",_.attemptsLeft,_.rerolls,_.costAddRate,_.unlocked,e,l+101,y,a),o=Me(n,i,t,_.state,j,"RUN_TO_END",_.attemptsLeft,_.rerolls,_.costAddRate,_.unlocked,e,l+103,y,a);s===Xe.current&&(Ue(r),Je(o),Ke(!1))},0),()=>{Ze.current&&(clearTimeout(Ze.current),Ze.current=null)}},[n,i,c,M,_,j,C,De,x,y,R]),(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud5ec\ud37c"},[]);const ct="bg-white rounded-2xl shadow-sm p-4 lg:p-6",dt="block text-xs text-gray-500 mb-1",mt="text-base font-semibold whitespace-nowrap",ut="\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":x,xt=1===_.costAddRate?"+100%":-1===_.costAddRate?"-100%":"0%",ht=L&&S&&C,ft=Oe(De),pt=(0,s.useMemo)(()=>M&&(qe||!(Ye&&Ve)),[M,qe,Ye,Ve]),gt=!ht||ft||!!O||_.attemptsLeft<=0,bt=!ht||!!O||_.attemptsLeft<=0||_.rerolls<=0,vt=(0,s.useRef)(!1);(0,s.useEffect)(()=>{ht||(ke([]),H({past:[],future:[]}))},[ht]),(0,s.useEffect)(()=>{ft?vt.current||(l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694."),vt.current=!0):vt.current=!1},[ft,l]);const Nt=(0,s.useMemo)(()=>{const e=je(n,i);return"\uc0c1\uad00 \uc5c6\uc74c"===i?e:"ANY_ONE"===x?["\uc0c1\uad00\uc5c6\uc74c",...e]:e},[n,i,x]);return(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n      "}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud655\ub960 \uacc4\uc0b0\uae30"}),(0,f.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0 items-center",children:[(0,f.jsx)("span",{className:"hidden sm:inline text-white/90 text-sm",children:"\uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218"}),(0,f.jsx)("div",{className:"min-w-[170px]",children:(0,f.jsx)($e,{value:R,onChange:$,items:ge,placeholder:"\ubc18\ubcf5 \uc218 \uc120\ud0dd",bordered:!1})})]})]})}),(0,f.jsxs)("section",{className:`${ct} !mt-2`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uae30\ubcf8 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:L?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>E(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(D.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>E(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(W.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r ",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] w-full lg:w-56 "+(L?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc82c \ud0c0\uc785"}),(0,f.jsx)($e,{className:"w-full",value:n,onChange:e=>r(e),items:Object.keys(le).map(e=>({value:e,label:e})),placeholder:"\uc82c \ud0c0\uc785",disabled:L})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] w-full lg:w-40 "+(L?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ub4f1\uae09"}),(0,f.jsx)($e,{className:"w-full",value:c,onChange:e=>m(e),items:["\uace0\uae09","\ud76c\uadc0","\uc601\uc6c5"].map(e=>({value:e,label:e})),placeholder:"\ub4f1\uae09",disabled:L})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-auto",children:[(0,f.jsx)("label",{className:dt,children:"\uae30\ubcf8 \uc2dc\ub3c4/\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"}),(0,f.jsxs)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center text-sm",children:["\uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"mx-1",children:se[c]})," \xb7 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"," ",(0,f.jsx)("b",{className:"ml-1",children:ae[c]}),"\ud68c"]})]})]})})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\ud604\uc7ac \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:S?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>A(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(D.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(W.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)(_e,{value:v.eff,set:e=>N({...v,eff:oe(e,ne,re)}),min:ne,max:re,disabled:S})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)(_e,{value:v.pts,set:e=>N({...v,pts:oe(e,ne,re)}),min:ne,max:re,disabled:S})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc A"}),(0,f.jsx)(Fe,{value:v.aName,set:e=>N({...v,aName:e}),options:b,disabled:S,placeholder:S?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc A \ub808\ubca8"}),(0,f.jsx)(_e,{value:v.aLvl,set:e=>N({...v,aLvl:oe(e,ne,re)}),min:ne,max:re,disabled:S})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc B"}),(0,f.jsx)(Fe,{value:v.bName,set:e=>N({...v,bName:e}),options:b.filter(e=>e!==v.aName),disabled:S,placeholder:S?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(S?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc B \ub808\ubca8"}),(0,f.jsx)(_e,{value:v.bLvl,set:e=>N({...v,bLvl:oe(e,ne,re)}),min:ne,max:re,disabled:S})]})]})})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\ubaa9\ud45c \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-3 flex-wrap",children:C?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uacc4\uc0b0 \ud65c\uc131)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>P(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(D.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>P(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(W.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,f.jsx)("span",{className:"text-xs text-gray-500",children:"\ubaa9\ud45c \ucda9\uc871 \ubc29\uc2dd"}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"ANY_ONE"===x,onChange:()=>p("ANY_ONE"),disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"1\uac1c \uc774\uc0c1"]}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"BOTH"===x,onChange:()=>p("BOTH"),disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"2\uac1c"]})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative\r grid grid-cols-2 gap-2\r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3\r items-stretch lg:items-end\r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728 \u2265"}),(0,f.jsx)(_e,{value:j.eff,set:e=>w({...j,eff:oe(e,ne,re)}),min:ne,max:re,disabled:C})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8 \u2265"}),(0,f.jsx)(_e,{value:j.pts,set:e=>w({...j,pts:oe(e,ne,re)}),min:ne,max:re,disabled:C})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-[100px] "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ucd94\uac00 \ud6a8\uacfc"}),(0,f.jsx)($e,{className:"w-full lg:w-[100px]",value:i,onChange:e=>o(e),items:["\uc0c1\uad00 \uc5c6\uc74c","\uacf5\uaca9\ud615","\uc9c0\uc6d0\ud615"].map(e=>({value:e,label:e})),placeholder:"\ucd94\uac00 \ud6a8\uacfc",disabled:C})]}),(()=>{const e=C||"\uc0c1\uad00 \uc5c6\uc74c"===i,t=e||"BOTH"!==x,l=e?"opacity-50":"",s=t?"opacity-50":"";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A"}),(0,f.jsx)(Fe,{value:y.aName,set:e=>k(t=>({...t,aName:e})),options:"BOTH"===x?Nt.filter(e=>e!==y.bName):Nt,disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${l}`,children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A \ub808\ubca8 \u2265"}),(0,f.jsx)(_e,{value:j.aLvl,set:e=>w({...j,aLvl:oe(e,ne,re)}),min:ne,max:re,disabled:e})]}),(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==x?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B"}),(0,f.jsx)(Fe,{value:y.bName,set:e=>k(t=>({...t,bName:e})),options:"BOTH"===x?Nt.filter(e=>e!==y.aName):Nt,disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==x})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${s}`,children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B \ub808\ubca8 \u2265"}),(0,f.jsx)(_e,{value:j.bLvl,set:e=>w({...j,bLvl:oe(e,ne,re)}),min:ne,max:re,disabled:t})]})]})})()]})})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,f.jsxs)("section",{ref:Qe,className:"lg:col-span-2 "+ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uac00\uacf5 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("button",{onClick:function(){ke([]),H({past:[],future:[]}),F({attemptsLeft:se[c],rerolls:ae[c],unlocked:!1,costAddRate:0,gold:0,state:{...v}})},className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(d.A,{size:16}),"\uc2dc\ubbac\ub808\uc774\uc158 \ucd08\uae30\ud654"]})})]}),(0,f.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["\ud56d\ubaa9 \uc801\uc6a9 / \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 ",(0,f.jsx)("b",{children:"\ubaa8\ub4e0 \uc124\uc815\uc744 \uc800\uc7a5(\uc7a0\uae08)"}),"\ud55c \ub4a4 \uc774\uc6a9\ud558\uc138\uc694."]}),(0,f.jsxs)("div",{className:"mt-3 gap-4",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\ud604\uc7ac \uc82c \uc0c1\ud0dc"}),(0,f.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:_.state.eff})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc9c8\uc11c\xb7\ud63c\ub3c8 \ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:_.state.pts})]}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"A"===(null===O||void 0===O?void 0:O.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(Fe,{value:B,set:z,options:O.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:_.state.aName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",_.state.aLvl]})]})}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"B"===(null===O||void 0===O?void 0:O.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(Fe,{value:B,set:z,options:O.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:_.state.bName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",_.state.bLvl]})]})})]}),(0,f.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[_.attemptsLeft<=0?(0,f.jsx)("div",{className:"inline-flex items-center px-2.5 py-1.5 rounded-xl bg-violet-50 border border-violet-200 text-violet-900 text-[12px] lg:text-[13px]",children:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub0a8\uc740 \uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"ml-1",children:_.attemptsLeft})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",(0,f.jsx)("b",{className:"ml-1",children:_.rerolls})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\uac00\uacf5 \ube44\uc6a9 \ucd94\uac00 \ube44\uc728 ",(0,f.jsx)("b",{className:"ml-1",children:xt})]})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub204\uc801 \uace8\ub4dc ",(0,f.jsx)("b",{className:"ml-1",children:me(_.gold)})," G"]})]})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white mt-4",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\uc774\ubc88\uc5d0 \ub4f1\uc7a5\ud55c 4\uac1c \ud56d\ubaa9"}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:De.map((e,t)=>(0,f.jsxs)("div",{className:"slot-card rounded-xl border p-2 transition-all",children:[(0,f.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["\uc2ac\ub86f ",t+1]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(Fe,{value:e,set:e=>{const l=[...De];l[t]=e,We(l)},options:Ge}),(0,f.jsx)("button",{onClick:()=>function(e){if(!ht)return void l("\ud56d\ubaa9\uc744 \uc801\uc6a9\ud558\ub824\uba74 '\uae30\ubcf8 \uc124\uc815/\ud604\uc7ac \uc635\uc158/\ubaa9\ud45c \uc635\uc158'\uc744 \ubaa8\ub450 \uc800\uc7a5(\uc7a0\uae08)\ud558\uc138\uc694.","warning");if(pe(),!C)return void l("\ubaa9\ud45c \uc635\uc158\uc744 \uba3c\uc800 \uc800\uc7a5\ud574 \uc8fc\uc138\uc694.");if(_.attemptsLeft<=0)return;if(Oe(De))return void l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694.");const t=De[e];if(!Ge.includes(t))return void l("\ubbf8\ub4f1\uc7a5 \uc870\uac74\uc73c\ub85c \ud604\uc7ac \uc120\ud0dd\uc740 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.");const s=Ae(t,_.state);if(!s)return void l("\uc120\ud0dd\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc5b4\uc694.");if("A_CHANGE"===s.kind||"B_CHANGE"===s.kind){const e=je(n,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==_.state.aName&&e!==_.state.bName);return e.length<=0?void l("\ucd94\uac00 \ud6a8\uacfc \uc870\uac74/\uc911\ubcf5\uc73c\ub85c \ud6a8\uacfc \ubcc0\uacbd\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4."):(I({who:"A_CHANGE"===s.kind?"A":"B",options:e}),z(e[0]),void l("\ubcc0\uacbd\ud560 \ud6a8\uacfc\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc67c\ucabd \ud328\ub110\uc5d0\uc11c \uc801\uc6a9\uc744 \ub204\ub974\uba74 \uc774\ubc88 \ucc28\uc218\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.","info"))}if(_.attemptsLeft<=0)return void l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub354 \uc774\uc0c1 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.","warning");const a={..._.state},r=Ce(n,0,_.state,s,_.costAddRate),i=_.attemptsLeft-1;F(e=>({attemptsLeft:i,rerolls:e.rerolls+r.rerollDelta,unlocked:!0,costAddRate:r.nextRate,gold:e.gold+r.goldThisAttempt,state:r.next})),Pe({type:"apply",title:`\uc2ac\ub86f ${e+1} \uc801\uc6a9: ${t}`,detail:ze(a,r.next),meta:{cost:r.goldThisAttempt,attemptsLeft:i,rerollDelta:r.rerollDelta}}),i>0&&l("\uc120\ud0dd\ud55c \ud6a8\uacfc\uac00 \ubc18\uc601\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c 4\uac1c\uc758 \uc120\ud0dd\uc9c0\ub97c \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694.","success")}(t),"aria-disabled":gt,className:`apply-btn transition-all justify-center min-w-[60px] h-10 px-3 rounded-xl border bg-white \n                          hover:border-[#a399f2] hover:text-white hover:bg-[#a399f2] inline-flex items-center\n                          ${gt?"opacity-50 cursor-not-allowed":""} \n                          ${ft?"opacity-50 cursor-not-allowed":""}`,children:"\uc801\uc6a9"})]})]},t))}),(0,f.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("button",{onClick:function(){ht?_.attemptsLeft<=0?l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694."):_.unlocked?_.rerolls<=0?l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud69f\uc218\uac00 \ubd80\uc871\ud574\uc694."):(pe(),F(e=>({...e,rerolls:e.rerolls-1})),Pe({type:"reroll",title:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc0ac\uc6a9",detail:`\ub0a8\uc740 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${_.rerolls-1}\ud68c`})):l("\uac00\uacf5 1\ud68c \uc774\ud6c4\ubd80\ud130 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."):l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning")},disabled:bt,className:`h-10 px-3 rounded-xl border ${bt?"opacity-50 cursor-not-allowed":"bg-white hover:bg-gray-50"} inline-flex items-center gap-2`,children:[(0,f.jsx)(V.A,{size:16}),"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",_.rerolls,"\ud68c"]}),(0,f.jsx)("span",{className:"text-xs text-gray-600",children:_.attemptsLeft<=0?"\uac00\uacf5 \uc644\ub8cc":_.unlocked?_.rerolls<=0?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc5c6\uc74c":rt.shouldReroll?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c":"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c":"\uccab \uac00\uacf5 \uc774\ud6c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),_.unlocked&&_.rerolls>0&&(0,f.jsx)("div",{className:"mt-2 text-xs text-gray-700",children:rt.reason})]})]})]}),(0,f.jsxs)("section",{className:`${ct} h-full flex flex-col`,style:et?{maxHeight:et}:void 0,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,f.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,f.jsx)("button",{onClick:Ie,disabled:!be,className:`ml-auto h-10 px-3 rounded-xl border ${be?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub418\ub3cc\ub9ac\uae30 (Ctrl/Cmd+Z)",children:(0,f.jsx)(U.A,{size:16})}),(0,f.jsx)("button",{onClick:Be,disabled:!we,className:`h-10 px-3 rounded-xl border ${we?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub2e4\uc2dc\ud558\uae30 (Ctrl/Cmd+Shift+Z)",children:(0,f.jsx)(Y.A,{size:16})})]})]}),0===ye.length?(0,f.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,f.jsx)("div",{className:"mt-3 flex-1 min-h-0 space-y-2 overflow-auto",children:ye.map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-2 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:e.time})]}),e.detail&&(0,f.jsx)("div",{className:"mt-1 text-xs text-gray-700",children:e.detail}),e.meta&&(0,f.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5 text-[11px] text-gray-600",children:["cost"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ube44\uc6a9 ",me(e.meta.cost)," G"]}),"attemptsLeft"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub0a8\uc740 \uac00\uacf5 ",e.meta.attemptsLeft,"\ud68c"]}),"rerollDelta"in e.meta&&0!==e.meta.rerollDelta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",e.meta.rerollDelta>0?`+${e.meta.rerollDelta}`:e.meta.rerollDelta]})]})]},e.id))})]})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uacb0\uacfc \ucd9c\ub825"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("span",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 text-[10px] lg:text-xs text-gray-600",children:["Monte Carlo ",me(Math.max((null===Ye||void 0===Ye?void 0:Ye.trialsUsed)||0,(null===Ve||void 0===Ve?void 0:Ve.trialsUsed)||0)),"\ud68c",null!==Ye&&void 0!==Ye&&null!==(e=Ye.ci)&&void 0!==e&&e.halfWidth?` (\xb1${(100*Ye.ci.halfWidth).toFixed(2)}%p @95%)`:""]})})]}),pt?(0,f.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:[...Array(4)].map((e,t)=>(0,f.jsx)("div",{className:"h-6 w-28 rounded-lg bg-gray-100 animate-pulse"},t))}),(0,f.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-2",children:[0,1].map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-3 h-8 w-2/3 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-2 h-2 w-full bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-4 h-4 w-40 bg-gray-100 rounded animate-pulse"})]},e))})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-2 text-sm text-gray-700",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:De.map((e,t)=>(0,f.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white text-[12px]",children:e},t))})]}),Ye&&Ve&&(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,f.jsxs)(u.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ubaa9\ud45c \ub2ec\uc131 \ud655\ub960"}),(0,f.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-50 text-[11px] text-gray-600",children:"IGNORE_AB"===ut?"\ucd94\uac00 \ud6a8\uacfc \uc0c1\uad00 \uc5c6\uc74c":"ANY_ONE"===ut?"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 1\uac1c \uc774\uc0c1":"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 2\uac1c \uc804\ubd80"})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"text-xs text-gray-500",children:["\ub2ec\uc131 \uc989\uc2dc \uac00\uacf5 \uc644\ub8cc ( ",me(Ve.successes),"\ud68c / ",me(Ve.trialsUsed),"\ud68c )"]}),"                        "]}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:ce(Ve.successProb,Ve.ci)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(u.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ve.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=ue(Ve.expectedGold,Ve.successProb),t=he(Ve.successProb);return(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,f.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,f.jsx)("b",{children:Number.isFinite(e)?me(Math.round(e)):"\u221e"})," G"]}),(0,f.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsx)("div",{className:"flex items-center justify-between",children:(0,f.jsxs)("div",{className:"text-xs text-gray-500",children:["\uac00\uacf5 \ud69f\uc218 \uc804\ubd80 \uc18c\ubaa8 ( ",me(Ye.successes),"\ud68c / ",me(Ye.trialsUsed),"\ud68c )"]})}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:de(Ye.successProb)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(u.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ye.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=ue(Ye.expectedGold,Ye.successProb),t=he(Ye.successProb);return(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,f.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,f.jsx)("b",{children:Number.isFinite(e)?me(Math.round(e)):"\u221e"})," G"]}),(0,f.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]})]})]}),(0,f.jsxs)(u.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,delay:.05},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ub4f1\uae09 \ud655\ub960"}),(()=>{if(!Ye)return null;const e=[{key:"legendProb",name:"\uc804\uc124 (4~15)",p:Number(Ye.legendProb||0),grad:Re.legend},{key:"relicProb",name:"\uc720\ubb3c (16~18)",p:Number(Ye.relicProb||0),grad:Re.relic},{key:"ancientProb",name:"\uace0\ub300 (19+)",p:Number(Ye.ancientProb||0),grad:Re.ancient}];return(0,f.jsx)("div",{className:"mt-3 space-y-3 text-sm",children:e.map(e=>(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-700",children:e.name}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[ee(e.p)&&(0,f.jsx)("span",{className:"px-2 py-0.5 rounded-lg border bg-emerald-50 border-emerald-200 text-emerald-800 text-[11px]",children:"\ud655\uc815"}),(0,f.jsx)("b",{children:de(e.p)})]})]}),(0,f.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(u.P.div,{initial:{width:0},animate:{width:ee(e.p)?"100%":xe(e.p)},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r",style:{backgroundImage:e.grad}})})]},e.key))})})(),(()=>{const{order:e,comps:t}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e-4;if(!e)return{order:[],comps:[]};let l=[{key:"legendProb",label:"\uc804\uc124",p:Number(e.legendProb||0),grad:Re.legend},{key:"relicProb",label:"\uc720\ubb3c",p:Number(e.relicProb||0),grad:Re.relic},{key:"ancientProb",label:"\uace0\ub300",p:Number(e.ancientProb||0),grad:Re.ancient}];if(l=l.filter(e=>!Q(e.p)),!l.length)return{order:[],comps:[]};l.sort((e,t)=>t.p-e.p);const s=[];for(let a=0;a<l.length-1;a++){const e=l[a].p-l[a+1].p;s.push(Math.abs(e)<=t?"=":">")}return{order:l,comps:s}}(Ye);return e.length?(0,f.jsxs)("div",{className:"mt-2 rounded-xl bg-white/70",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\uac00\ub2a5\uc131 \ub192\uc740 \uc21c\uc11c"}),(0,f.jsx)("div",{className:"flex flex-wrap items-center gap-1.5",children:e.map((l,a)=>(0,f.jsxs)(s.Fragment,{children:[(0,f.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white shadow-sm",children:[(0,f.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-gradient-to-r",style:{backgroundImage:l.grad}}),(0,f.jsxs)("span",{className:"text-sm",children:[l.label,ee(l.p)?" (\ud655\uc815)":""]})]}),a<e.length-1&&(0,f.jsx)("span",{className:"mx-0.5 text-gray-400 select-none",children:"="===t[a]?"\uff1d":"\uff1e"})]},l.key))})]}):null})()]})]})]})]})]}),(0,f.jsx)(Te,{toasts:t,onClose:a}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}function Be(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;const[t,l]=s.useState(!1);return s.useEffect(()=>{const t=()=>{const t=document.documentElement,s=t.scrollHeight-(t.scrollTop+window.innerHeight);l(s<=e)};return t(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t}(520);return(0,f.jsx)("div",{className:"fixed z-50 right-4 bottom-4 sm:right-6 sm:bottom-6 pr-[env(safe-area-inset-right)] pb-[env(safe-area-inset-bottom)]",children:(0,f.jsxs)("button",{type:"button","aria-label":"\ub9e8 \uc704\ub85c",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:["inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-3 shadow-lg backdrop-blur","text-gray-700 hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/40","transition transform duration-200",e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"].join(" "),children:[(0,f.jsx)(r.A,{size:18}),(0,f.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"TOP"})]})})}function ze(){return(0,f.jsxs)(a.I9,{basename:"/core",children:[(0,f.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,f.jsx)("header",{className:"sticky top-0 z-40 border-b border-gray-200/60 bg-white/70 backdrop-blur",children:(0,f.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3",children:(0,f.jsx)("nav",{"aria-label":"Core pages",children:(0,f.jsxs)("ul",{className:"mx-auto flex w-full flex-wrap justify-center gap-1 rounded-xl",children:[(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/gem",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uac00\uacf5 \ud5ec\ud37c"})}),(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/optimizer",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uc7a5\ucc29 \ud5ec\ud37c"})})]})})})}),(0,f.jsx)("main",{children:(0,f.jsxs)(a.BV,{children:[(0,f.jsx)(a.qh,{path:"/gem",element:(0,f.jsx)(Ie,{})}),(0,f.jsx)(a.qh,{path:"/optimizer",element:(0,f.jsx)(H,{})}),(0,f.jsx)(a.qh,{path:"*",element:(0,f.jsx)(a.C5,{to:"/gem",replace:!0})})]})})]}),(0,f.jsx)(Be,{})]})}},346:(e,t,l)=>{l.d(t,{A:()=>n});var s=l(43),a=l(579);const n=function(){const e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const t=document.createElement("ins");t.className="kakao_ad_area",t.style.display="none",t.setAttribute("data-ad-unit","DAN-V4UQDzJ7BdEKoWll"),t.setAttribute("data-ad-width","320"),t.setAttribute("data-ad-height","50");const l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src="//t1.daumcdn.net/kas/static/ba.min.js",e.current&&(e.current.innerHTML="",e.current.appendChild(t),e.current.appendChild(l))},[]),(0,a.jsx)("div",{ref:e,className:"kakao-adfit-container"})}}}]);
//# sourceMappingURL=299.b88212a3.chunk.js.map