"use strict";(self.webpackChunkpeon_calculator=self.webpackChunkpeon_calculator||[]).push([[299],{299:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Fe});var s=l(43),a=l(981),n=l(950),r=l(711),i=l(382),o=l(360),c=l(855),d=l(805),m=l(546),x=l(446),u=l(289),h=l(346),f=l(579);const g={HERO:7,LEGEND:11,RELIC:15,ANCIENT:17},p={HERO:[10],LEGEND:[10,14],RELIC:[10,14,17,18,19,20],ANCIENT:[10,14,17,18,19,20]},b={HERO:"\uc601\uc6c5",LEGEND:"\uc804\uc124",RELIC:"\uc720\ubb3c",ANCIENT:"\uace0\ub300"},v=["HERO","LEGEND","RELIC","ANCIENT"],N={atk:"\uacf5\uaca9\ub825",add:"\ucd94\uac00 \ud53c\ud574",boss:"\ubcf4\uc2a4 \ud53c\ud574",brand:"\ub099\uc778\ub825",allyDmg:"\uc544\uad70 \ud53c\ud574 \uac15\ud654",allyAtk:"\uc544\uad70 \uacf5\uaca9 \uac15\ud654"},j=["atk","add","boss","brand","allyDmg","allyAtk"],w={dealer:new Set(["atk","add","boss"]),support:new Set(["brand","allyDmg","allyAtk"])},y={atk:1,add:1,boss:1,brand:1,allyDmg:1,allyAtk:1},k=[{value:"\ud574 \ucf54\uc5b4",label:"\ud574 \ucf54\uc5b4"},{value:"\ub2ec \ucf54\uc5b4",label:"\ub2ec \ucf54\uc5b4"},{value:"\ubcc4 \ucf54\uc5b4",label:"\ubcc4 \ucf54\uc5b4"}],L=["\ud574 \ucf54\uc5b4","\ub2ec \ucf54\uc5b4","\ubcc4 \ucf54\uc5b4"];const A=()=>Math.random().toString(36).slice(2,9);function E(e){const t={...y};return e?(Object.keys(t).forEach(l=>{const s=e[l],a="number"===typeof s?s:Number(s);t[l]=Number.isFinite(a)&&a>=0?a:y[l]}),t):t}function S(e,t,l){var s,a;const n="dealer"===t?w.dealer:w.support;return(n.has(e.o1k)?e.o1v*(null!==(s=l[e.o1k])&&void 0!==s?s:1):0)+(n.has(e.o2k)?e.o2v*(null!==(a=l[e.o2k])&&void 0!==a?a:1):0)}function*C(e,t){const l=e.length;if(t>l)return;const s=Array.from({length:t},(e,t)=>t);for(;;){yield s.map(t=>e[t]);let a=t-1;for(;a>=0&&s[a]===l-t+a;)a--;if(a<0)break;s[a]++;for(let e=a+1;e<t;e++)s[e]=s[e-1]+1}}function M(e,t){return p[e].filter(e=>t>=e)}function P(e,t,l,s){const a=e.reduce((e,t)=>{var l;return e+(null!==(l=t.will)&&void 0!==l?l:0)},0),n=e.reduce((e,t)=>{var l;return e+(null!==(l=t.point)&&void 0!==l?l:0)},0),r=M(t,n),i=e.reduce((e,t)=>e+S(t,l,s),0);return{totalWill:a,totalPoint:n,thr:r,roleSum:i,score:1e7*r.length+1e4*n+10*(5e3-a)+i-e.length}}function R(e,t,l,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:80;const n=E(s),r=e=>p[e],i=e=>Math.min(...r(e)),o=(e,t)=>{const l=r(e);for(let s=0;s<l.length;s++)if(l[s]>(null!==t&&void 0!==t?t:-1/0))return l[s];return null},c=(e,t)=>{const l=e.filter(e=>(e.thr.length?Math.max(...e.thr):0)>=t);return 0===l.length?null:(l.sort((e,t)=>e.totalPoint!==t.totalPoint?e.totalPoint-t.totalPoint:e.totalWill!==t.totalWill?e.totalWill-t.totalWill:e.roleSum!==t.roleSum?t.roleSum-e.roleSum:t.score-e.score),l[0])},d=e=>e.sort((e,t)=>t.score-e.score)[0]||null,m={list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0},x=(e,t)=>function(e,t,l,s,a,n){const r=g[t],i=E(s),o=Math.min(...p[t]),c=null!==a&&void 0!==a?a:o,d=n||null==a,m=[],x=Math.min(4,e.length);for(let h=0;h<=x;h++)if(0!==h)for(const s of C(e,h)){const e=s.reduce((e,t)=>e+(t.will||0),0);if(e>r)continue;const{totalPoint:a,thr:n,roleSum:o,score:c}=P(s,t,l,i);m.push({list:s,totalWill:e,totalPoint:a,thr:n,roleSum:o,score:c})}else m.push({list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0});let u;return m.sort((e,t)=>t.score-e.score),u=d?m.filter(e=>{const t=Math.max(0,...e.thr);return e.list.length>0&&t>=(null!==c&&void 0!==c?c:0)}):m.filter(e=>e.list.length>0&&e.thr.length>0),0===u.length?[{list:[],totalWill:0,totalPoint:0,thr:[],roleSum:0,score:0}]:u.slice(0,200)}(t,e.grade,l,n,e.minThreshold,e.enforceMin).filter(e=>e.list.length>0).sort((e,t)=>t.score-e.score).slice(0,a),u=(e,t)=>{if(!t||!t.list)return e;const l=new Set(t.list.map(e=>e.id));return e.filter(e=>!l.has(e.id))},h=e.map((e,t)=>e.enforceMin?t:-1).filter(e=>-1!==e),f=e.map((e,t)=>e.enforceMin?-1:t).filter(e=>-1!==e),b=Math.max(1,h.length);let v={picks:e.map(e=>m),remaining:t.slice(),satisfiedCount:-1,scoreSum:-1/0};for(let g=0;g<b;g++){const l=g%Math.max(1,h.length),s=h.length?h.slice(l).concat(h.slice(0,l)).concat(f):f.slice();let a=t.slice();const n=Array.from({length:e.length},()=>m);for(const t of s){const l=e[t],s=x(l,a);let r=null;if(l.enforceMin){var N;r=c(s,null!==(N=l.minThreshold)&&void 0!==N?N:i(l.grade))}else r=d(s);n[t]=r||m,a=u(a,n[t])}let r=0,o=0;h.forEach(t=>{var l;const s=e[t],a=null!==(l=s.minThreshold)&&void 0!==l?l:i(s.grade),c=n[t].thr.length?Math.max(...n[t].thr):0;c>=a&&r++,o+=1e6*(c>=a?c-a+1:0)+n[t].roleSum}),(r>v.satisfiedCount||r===v.satisfiedCount&&o>v.scoreSum)&&(v={picks:n,remaining:a,satisfiedCount:r,scoreSum:o})}let j=v.picks,w=v.remaining;if(!h.every(t=>{var l;const s=e[t],a=null!==(l=s.minThreshold)&&void 0!==l?l:i(s.grade);return(j[t].thr.length?Math.max(...j[t].thr):0)>=a}))return{picks:j};let y=!0;for(;y;){y=!1;for(let t=0;t<e.length;t++){const l=e[t],s=j[t].thr.length?Math.max(...j[t].thr):0,a=o(l.grade,s);if(null==a)continue;const n=w,r=new Set(n.map(e=>e.id)),i=j[t].list,d=n.concat(i.filter(e=>!r.has(e.id))),m=c(x(l,d),a);if(m){j[t]=m;const e=new Set(m.list.map(e=>e.id));w=d.filter(t=>!e.has(t.id)),y=!0}}}return{picks:j}}const $="undefined"!==typeof document?document.body:null;function _(e){let{draggableId:t,index:l,children:s}=e;return(0,f.jsx)(u.sx,{draggableId:t,index:l,children:(e,t)=>{const l="function"===typeof s?s(e,t):s;return t.isDragging&&$?(0,n.createPortal)(l,$):l}})}function T(e){let{value:t,items:l,onChange:a,placeholder:o,className:c}=e;const[d,u]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=(0,s.useRef)(null),p=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>u(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=s.useMemo(()=>Array.isArray(e)?e:[e],[e]),a=s.useRef(t);s.useEffect(()=>{a.current=t},[t]),s.useEffect(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([h,g],()=>u(!1)),(0,s.useLayoutEffect)(()=>{if(!d||!h.current)return;const e=h.current.getBoundingClientRect();p.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(p.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[d]);const v=l.find(e=>e.value===t),N=d?(0,f.jsx)(m.N,{children:(0,f.jsx)(x.P.ul,{ref:g,initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},style:{position:"fixed",top:p.current.top,left:p.current.left,width:p.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),u(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"opacity-40 cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:h,className:`relative min-w-0 ${c||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>u(e=>!e),className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50",children:[(0,f.jsx)("span",{className:"truncate text-sm",children:v?v.label:o||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:d?(0,f.jsx)(r.A,{size:16}):(0,f.jsx)(i.A,{size:16})})]}),d&&(0,n.createPortal)(N,document.body)]})}function F(e){let{toasts:t,onClose:l}=e;return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>(0,f.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:"pointer-events-auto overflow-hidden rounded-2xl border shadow-lg bg-amber-50/95 border-amber-200 text-amber-900 backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw]",children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:"text-sm font-medium text-amber-900/80 hover:text-amber-900 self-center",onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id))})})}function O(e){let{value:t,onChange:l,min:a,max:n,step:r=1,allowFloat:i=!1,zeroOnBlur:o=!0,className:c="",inputProps:d={}}=e;const m=e=>null===e||void 0===e?"":String(e),[x,u]=s.useState(m(t));s.useEffect(()=>{u(m(t))},[t]);const h=e=>{if(""===e)return o?null!==a&&void 0!==a?a:0:null;let t=Number(e);return Number.isFinite(t)?(t=i?t:Math.trunc(t),(e=>{let t=e;return null!=a&&t<a&&(t=a),null!=n&&t>n&&(t=n),t})(t)):o?null!==a&&void 0!==a?a:0:null};return(0,f.jsx)("input",{type:"number",inputMode:i?"decimal":"numeric",step:r,min:a,max:n,value:x,onChange:e=>{const t=e.target.value;if(""===t)return u(""),void(null===l||void 0===l||l(null));u(t);const s=Number(t);Number.isFinite(s)?null===l||void 0===l||l(i?s:Math.trunc(s)):null===l||void 0===l||l(null)},onBlur:()=>{const e=h(x);u(null==e?"":String(e)),null===l||void 0===l||l(e)},onWheel:e=>e.currentTarget.blur(),className:c,...d})}function I(){(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ud5ec\ud37c"},[]);const[e,t]=(0,s.useState)("dealer"),[l,a]=(0,s.useState)({...y}),[n,m]=(0,s.useState)(null),[x,w]=(0,s.useState)(null),[C,$]=(0,s.useState)([]),[I,B]=(0,s.useState)([]),{toasts:z,push:G,remove:H}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:e=>{const l=A();t(t=>[...t,{id:l,msg:e}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==l)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),{picks:D}=(0,s.useMemo)(()=>R(C,I,e,l,80),[C,I,e,l]),W=(e,t)=>B(l=>l.map(l=>l.id===e?{...l,...t}:l)),V=(e,t)=>$(l=>{if("name"in t){if(l.some(l=>l.id!==e&&l.name===t.name))return G(`${t.name}\ub294 \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucf54\uc5b4\uc785\ub2c8\ub2e4`),l}return l.map(l=>l.id===e?{...l,...t}:l)}),[U,Y]=(0,s.useState)(!1),q="h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white",K="text-base font-semibold whitespace-nowrap",J="bg-white rounded-2xl shadow-sm",X="px-2.5 py-1.5 rounded-xl bg-gray-100 text-xs lg:text-[13px]",Z="block text-xs text-gray-500 mb-1",Q=e=>e+1,ee=(e,t)=>t-e;return(0,s.useEffect)(()=>{!function(){try{var e;const t=E({atk:2,add:"3",boss:-1});console.assert(2===t.atk&&3===t.add&&1===t.boss,"sanitizeWeights failed");const l={id:"t1",will:1,point:1,o1k:"atk",o1v:2,o2k:"brand",o2v:3};console.assert(S(l,"dealer",t)===2*t.atk,"scoreGemForRole dealer failed"),console.assert(S(l,"support",t)===3*(null!==(e=t.brand)&&void 0!==e?e:1),"scoreGemForRole support failed"),console.assert(M("RELIC",20).includes(20)&&0===M("RELIC",9).length,"thresholdsHit failed");const s=P([l],"RELIC","dealer",t),a=P([l,{...l,id:"t2",will:0,point:10}],"RELIC","dealer",t);console.assert(a.score>=s.score,"scoreCombo monotonicity failed"),console.log("\u2705 Self-tests passed")}catch(t){console.warn("\u274c Self-tests encountered an error",t)}}()},[]),(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .btn-primary{ background: #000000; color:#fff; border:none; }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n        .ring-primary:focus{ outline:none; box-shadow:0 0 0 2px rgba(163,153,242,.35); }\n      "}),(0,f.jsx)("style",{children:"button{cursor:pointer}"}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uc7a5\ucc29 \ub3c4\uc6b0\ubbf8"}),(0,f.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0",children:[(0,f.jsx)("button",{onClick:()=>t("dealer"),className:"min-w-[80px] h-10 inline-flex items-center justify-center gap-1 px-3 rounded-xl w-full lg:w-auto "+("dealer"===e?"bg-white":"bg-white opacity-50"),children:"\ub51c\ub7ec"}),(0,f.jsx)("button",{onClick:()=>t("support"),className:"min-w-[80px] h-10 inline-flex items-center justify-center gap-1 px-3 rounded-xl w-full lg:w-auto "+("support"===e?"bg-white":"bg-white opacity-50"),children:"\uc11c\ud3ec\ud130"})]})]})}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 !mt-2 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsx)("h2",{className:K,children:"\ucf54\uc5b4 \uc785\ub825"}),(0,f.jsx)("div",{className:"flex items-center gap-2 ml-auto whitespace-nowrap",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90 ring-primary",onClick:()=>$(e=>{if(e.length>=3)return G("\ucf54\uc5b4\ub294 \ucd5c\ub300 3\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc5b4\uc694."),e;const t=function(e){for(const t of L)if(!e.has(t))return t;return null}(new Set(e.map(e=>e.name)));if(!t)return G("\ud574/\ub2ec/\ubcc4 \ucf54\uc5b4\uac00 \ubaa8\ub450 \ucd94\uac00\ub418\uc5b4 \uc788\uc5b4\uc694."),e;const l=A();return m(l),[{id:l,name:t,grade:"RELIC",minThreshold:void 0,enforceMin:!1},...e]}),"aria-label":"\ucf54\uc5b4 \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \ucf54\uc5b4 \ucd94\uac00"})]})})]}),(0,f.jsxs)("p",{className:"hidden lg:block text-xs text-gray-600",children:["\ub4dc\ub798\uadf8 \uc564 \ub4dc\ub86d\uc73c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("p",{className:"block lg:hidden text-xs text-gray-600",children:["\ud654\uc0b4\ud45c\ub85c \uc21c\uc11c\ub97c \ubc14\uafb8\uc138\uc694. ",(0,f.jsx)("b",{children:"\uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc740 \ud56d\ubaa9\uc744 1\ubc88(\ub9e8 \uc704)\uc73c\ub85c \ubc30\uce58\ud558\uc138\uc694."})]}),(0,f.jsxs)("div",{className:"mt-3",children:[(0,f.jsx)(u.JY,{onDragStart:()=>{requestAnimationFrame(()=>Y(!0));const e=new Event("close-all-dropdowns");window.dispatchEvent(e)},onDragEnd:e=>{requestAnimationFrame(()=>Y(!1)),e.destination&&$(t=>{const l=Array.from(t),[s]=l.splice(e.source.index,1);return l.splice(e.destination.index,0,s),l})},children:(0,f.jsx)(u.gL,{droppableId:"cores-droppable",ignoreContainerClipping:!0,children:e=>(0,f.jsxs)("div",{ref:e.innerRef,...e.droppableProps,className:"flex flex-col gap-3",children:[C.map((e,t)=>{const l=g[e.grade],s=[{value:"",label:"(\uc120\ud0dd \uc548 \ud568)"}].concat(p[e.grade].map(e=>({value:String(e),label:`${e}P \uc774\uc0c1`}))),a=new Set(C.filter(t=>t.id!==e.id).map(e=>e.name)),o=k.map(e=>({...e,disabled:a.has(e.value)})),d=Math.min(...p[e.grade]);return(0,f.jsx)(_,{draggableId:e.id,index:t,children:a=>{var x;return(0,f.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-end border rounded-xl p-3 bg-white overflow-visible "+(e.id===n?"LoA-highlight":""),style:a.draggableProps.style,children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl self-start lg:self-center",children:["#",Q(t)]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[120px] w-full lg:w-40",children:[(0,f.jsx)("label",{className:Z,children:"\ucf54\uc5b4 \uc885\ub958"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:e.name,onChange:t=>V(e.id,{name:t}),items:o,placeholder:"\ucf54\uc5b4\uba85"})]}),(0,f.jsxs)("div",{className:"flex flex-col min-w-[160px] w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\ucf54\uc5b4 \ub4f1\uae09"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:e.grade,onChange:t=>V(e.id,{grade:t}),items:v.map(e=>({value:e,label:b[e]})),placeholder:"\ucf54\uc5b4 \ub4f1\uae09"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\uacf5\uae09 \uc758\uc9c0\ub825"}),(0,f.jsx)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center",children:(0,f.jsx)("span",{className:"text-primary font-semibold",children:l})})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsx)("label",{className:Z,children:"\ubaa9\ud45c \uad6c\uac04"}),(0,f.jsx)(T,{className:"w-full lg:w-40",value:String(null!==(x=e.minThreshold)&&void 0!==x?x:""),onChange:t=>{V(e.id,t?{minThreshold:Number(t),enforceMin:!0}:{minThreshold:void 0,enforceMin:!1})},items:s,placeholder:"\uad6c\uac04"})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-auto",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("input",{id:`enf-${e.id}`,type:"checkbox",className:"accent-primary",checked:e.enforceMin,onChange:t=>V(e.id,{enforceMin:t.target.checked})}),(0,f.jsx)("label",{htmlFor:`enf-${e.id}`,className:"text-sm",children:"\ubaa9\ud45c \uad6c\uac04 \uac15\uc81c"})]}),(0,f.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uc120\ud0dd \uc548 \ud568\uc774\uba74 \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,f.jsx)("br",{className:"hidden lg:block"}),"\ucd5c\uc18c \uad6c\uac04 ",(0,f.jsxs)("b",{className:"text-primary",children:[d,"P"]}),"\uc744 \uae30\ubcf8 \ubaa9\ud45c\ub85c \uc801\uc6a9\ud569\ub2c8\ub2e4."]})]}),(0,f.jsxs)("div",{className:"lg:ml-auto lg:static absolute top-2 right-2 flex items-center gap-1",children:[(0,f.jsx)("div",{className:"hidden lg:hidden"}),(0,f.jsxs)("div",{className:"flex lg:hidden flex-row gap-1 mr-1",children:[(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,$(t=>{if(e<=0)return t;const l=[...t];return[l[e-1],l[e]]=[l[e],l[e-1]],l});var e},"aria-label":"\uc704\ub85c",children:(0,f.jsx)(r.A,{size:16})}),(0,f.jsx)("button",{className:"h-8 w-8 rounded-lg border inline-flex items-center justify-center bg-white",onClick:()=>{return e=t,$(t=>{if(e>=t.length-1)return t;const l=[...t];return[l[e+1],l[e]]=[l[e],l[e+1]],l});var e},"aria-label":"\uc544\ub798\ub85c",children:(0,f.jsx)(i.A,{size:16})})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,$(e=>e.length<=0?e:e.filter(e=>e.id!==t)),void(n===t&&m(null));var t},disabled:C.length<=0,"aria-label":"\ucf54\uc5b4 \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})]})]})}},e.id)}),e.placeholder]})})}),0===C.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\ucf54\uc5b4\ub97c \ucd94\uac00\ud558\uc138\uc694. (\ucd5c\ub300 3\uac1c\uc758 \ucf54\uc5b4\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)"})]})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3 mb-3",children:[(0,f.jsx)("h2",{className:K,children:"\uc82c \uc785\ub825"}),(0,f.jsxs)("div",{className:"flex gap-2 ml-auto whitespace-nowrap",children:[(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>{const e=A();B(t=>[{id:e,will:null,point:null,o1k:"atk",o1v:0,o2k:"add",o2v:0},...t]),w(e)},"aria-label":"\uc82c \ucd94\uac00",children:[(0,f.jsx)(o.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc82c \ucd94\uac00"})]}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>B([]),"aria-label":"\uc804\uccb4 \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc804\uccb4 \uc0ad\uc81c"})]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col gap-3",children:[I.map((e,t)=>(0,f.jsxs)("div",{className:"relative flex flex-col lg:flex-row lg:flex-nowrap gap-2 lg:gap-3 items-stretch lg:items-center border rounded-xl p-3 overflow-visible min-w-0 bg-white "+(e.id===x?"LoA-highlight":""),children:[(0,f.jsxs)("div",{className:"h-10 w-10 flex items-center justify-center text-base font-semibold text-gray-800 bg-gray-100 rounded-xl flex-none",children:["#",ee(t,I.length)]}),(0,f.jsxs)("div",{className:"w-full lg:w-auto flex flex-row gap-2 lg:gap-3 flex-1 lg:flex-none",children:[(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\ud544\uc694 \uc758\uc9c0\ub825"}),(0,f.jsx)(O,{value:e.will,onChange:t=>W(e.id,{will:t}),min:0,max:9,step:1,allowFloat:!1,className:`${q} w-full lg:w-24`,inputProps:{title:"\uc758\uc9c0\ub825",placeholder:"\uc758\uc9c0\ub825"}})]}),(0,f.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 lg:w-auto lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"(\uc9c8\uc11c/\ud63c\ub3c8)\ud3ec\uc778\ud2b8"}),(0,f.jsx)(O,{value:e.point,onChange:t=>W(e.id,{point:t}),min:0,max:9,step:1,allowFloat:!1,className:`${q} w-full lg:w-24`,inputProps:{title:"\ud3ec\uc778\ud2b8",placeholder:"\ud3ec\uc778\ud2b8"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:Z,children:"\uc635\uc158 1"}),(0,f.jsx)(T,{className:"w-full lg:w-44",value:e.o1k,onChange:t=>W(e.id,{o1k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\uc218\uce58"}),(0,f.jsx)(O,{value:e.o1v,onChange:t=>W(e.id,{o1v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsxs)("div",{className:"flex items-end gap-2 w-full lg:w-auto lg:flex-none min-w-0",children:[(0,f.jsxs)("div",{className:"flex-1 lg:flex-none min-w-0",children:[(0,f.jsx)("label",{className:Z,children:"\uc635\uc158 2"}),(0,f.jsx)(T,{className:"w-full lg:w-44",value:e.o2k,onChange:t=>W(e.id,{o2k:t}),items:j.map(e=>({value:e,label:N[e]})),placeholder:"\uc635\uc158 \uc120\ud0dd"})]}),(0,f.jsxs)("div",{className:"flex-1 lg:flex-none",children:[(0,f.jsx)("label",{className:Z,children:"\uc218\uce58"}),(0,f.jsx)(O,{value:e.o2v,onChange:t=>W(e.id,{o2v:t}),min:0,max:9,step:1,allowFloat:!1,className:"h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white w-full lg:w-20",inputProps:{placeholder:"0"}})]})]}),(0,f.jsx)("div",{className:"lg:static absolute top-2 right-2 lg:top-auto lg:right-auto lg:ml-auto w-auto lg:flex-none",children:(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border-0 lg:border text-red-600 inline-flex items-center justify-center gap-2",onClick:()=>{return t=e.id,B(e=>e.filter(e=>e.id!==t)),void(x===t&&w(null));var t},"aria-label":"\uc82c \uc0ad\uc81c",children:[(0,f.jsx)(c.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uc0ad\uc81c"})]})})]},e.id)),0===I.length&&(0,f.jsx)("div",{className:"text-sm text-gray-700 p-2 text-center",children:"\uc82c\uc744 \ucd94\uac00\ud558\uc138\uc694."})]})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,f.jsx)("h2",{className:K,children:"\uc720\ud6a8\uc635\uc158 \uac00\uc911\uce58"}),(0,f.jsxs)("button",{className:"h-10 w-10 lg:w-auto px-0 lg:px-3 rounded-xl border ml-auto whitespace-nowrap inline-flex items-center justify-center gap-2 bg-white hover:bg-white/90",onClick:()=>a({...y}),"aria-label":"\uac00\uc911\uce58 \ucd08\uae30\ud654",children:[(0,f.jsx)(d.A,{size:16}),(0,f.jsx)("span",{className:"hidden lg:inline",children:" \uac00\uc911\uce58 \ucd08\uae30\ud654"})]})]}),(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("div",{className:"grid grid-cols-2 gap-2 lg:flex lg:flex-nowrap text-sm min-w-0",children:j.map(e=>(0,f.jsxs)("div",{className:"bg-gray-50 border rounded-xl px-2 py-2 w-full lg:w-1/6 min-w-[120px]",children:[(0,f.jsx)("label",{className:Z,children:N[e]}),(0,f.jsx)(O,{value:l[e],onChange:t=>a(l=>({...l,[e]:t})),min:0,max:5,step:1e-4,allowFloat:!0,className:"h-10 w-full px-2 rounded-md border bg-white focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50"})]},e))})})]}),(0,f.jsxs)("section",{className:`${J} p-4 lg:p-6 ${U?"":"backdrop-blur"}`,children:[(0,f.jsx)("h2",{className:K,children:"\uacb0\uacfc"}),(0,f.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["\ucf54\uc5b4 1\uac1c\ub2f9 \ucd5c\ub300 ",(0,f.jsx)("b",{children:"\uc82c 4\uac1c"}),"\uae4c\uc9c0 \uc7a5\ucc29\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,f.jsx)("div",{className:"space-y-4 mt-2",children:C.map((t,s)=>{const a=g[t.grade],n=null===D||void 0===D?void 0:D[s],r=!!(n&&n.list&&n.list.length>0),i=Math.min(...p[t.grade]);return(0,f.jsxs)("div",{className:"border rounded-xl p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,f.jsxs)("div",{className:"text-base font-semibold",children:[t.name," ",(0,f.jsxs)("span",{className:"text-sm text-gray-500",children:["(",b[t.grade],")"]})]}),r&&(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:X,children:["\ucd1d \uc758\uc9c0\ub825 ",(0,f.jsx)("span",{className:"font-semibold",children:String(n.totalWill)})," / \uacf5\uae09 ",(0,f.jsx)("span",{children:String(a)})," (",(0,f.jsxs)("span",{children:["\ub098\uba38\uc9c0 ",String(a-n.totalWill)]}),")"]}),(0,f.jsxs)("div",{className:X,children:["\ucd1d \ud3ec\uc778\ud2b8 ",(0,f.jsx)("span",{className:"font-semibold",children:String(n.totalPoint)})]}),(()=>{const e=n.thr.length?Math.max(...n.thr):null;return(0,f.jsxs)("div",{className:X,children:["\ub2ec\uc131 \uad6c\uac04 ",(0,f.jsx)("span",{className:"font-semibold",children:null!=e?String(e):"\uc5c6\uc74c"})]})})(),(0,f.jsxs)("div",{className:X,children:["\uc720\ud6a8 \uc635\uc158 \ud569(",(0,f.jsx)("span",{className:"font-semibold",children:"dealer"===e?"\ub51c\ub7ec":"\uc11c\ud3ff"}),") ",(0,f.jsx)("span",{className:"font-semibold text-primary",children:String(n.roleSum.toFixed(4))})]})]})]}),r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"hidden lg:block overflow-x-auto mt-2",children:(0,f.jsxs)("table",{className:"min-w-full text-sm",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc120\ud0dd"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1581"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc635\uc1582"}),(0,f.jsx)("th",{className:"px-2 py-2",children:"\uc720\ud6a8\ud569"})]})}),(0,f.jsx)("tbody",{children:n.list.map(t=>{var s,a;const n=I.findIndex(e=>e.id===t.id),r=ee(n,I.length);return(0,f.jsxs)("tr",{className:"border-t",children:[(0,f.jsxs)("td",{className:"px-2 py-2",children:["#",String(r)]}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(s=t.will)&&void 0!==s?s:0)}),(0,f.jsx)("td",{className:"px-2 py-2",children:String(null!==(a=t.point)&&void 0!==a?a:0)}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[t.o1k]," ",String(t.o1v)]}),(0,f.jsxs)("td",{className:"px-2 py-2",children:[N[t.o2k]," ",String(t.o2v)]}),(0,f.jsx)("td",{className:"px-2 py-2 text-primary",children:String(S(t,e,E(l)).toFixed(4))})]},t.id)})})]})}),(0,f.jsx)("div",{className:"lg:hidden mt-2 space-y-2",children:n.list.map(t=>{const s=I.findIndex(e=>e.id===t.id),a=ee(s,I.length);return(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsxs)("div",{className:"font-medium",children:["#",String(a)]}),(0,f.jsxs)("div",{className:"text-xs text-primary",children:["\uc720\ud6a8\ud569 ",String(S(t,e,E(l)).toFixed(2))]})]}),(0,f.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-x-3 gap-y-1 text-sm",children:[(0,f.jsx)("div",{className:"text-gray-500",children:"\uc758\uc9c0\ub825"}),(0,f.jsx)("div",{children:String(t.will)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-primary",children:String(t.point)}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1581"}),(0,f.jsxs)("div",{children:[N[t.o1k]," ",String(t.o1v)]}),(0,f.jsx)("div",{className:"text-gray-500",children:"\uc635\uc1582"}),(0,f.jsxs)("div",{children:[N[t.o2k]," ",String(t.o2v)]})]})]},t.id)})})]}):(0,f.jsxs)("div",{className:"text-sm text-gray-700 mt-2",children:["\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. (\uc774 \ucf54\uc5b4\uc5d0 \ubc30\uc815 \uac00\ub2a5\ud55c \uc870\ud569\uc774 \uc5c6\uac70\ub098, \ubaa9\ud45c \uad6c\uac04\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.",null==t.minThreshold?` / \ucd5c\uc18c ${i}P \uc790\ub3d9 \uc801\uc6a9\uc911`:"",")"]})]},t.id)})})]})]}),(0,f.jsx)(F,{toasts:z,onClose:H}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}var B=l(596),z=l(693),G=l(899),H=l(829),D=l(655);const W=!0,V=!0;function U(e){let t=2166136261;for(let l=0;l<e.length;l++)t^=e.charCodeAt(l),t=Math.imul(t,16777619);return t>>>0}function Y(e){return U(JSON.stringify(e))||1}function q(e){let t=e>>>0;return function(){return t^=t<<13,t>>>=0,t^=t>>>17,t>>>=0,t^=t<<5,t>>>=0,(t>>>0)/4294967296}}const K=e=>!(Number(e)>0),J=e=>Number(e)>=1,X={LEGEND_MIN:4,LEGEND_MAX:15,RELIC_MIN:16,RELIC_MAX:18,ANCIENT_MIN:19},Z={"\uc9c8\uc11c-\uc548\uc815":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\uc9c8\uc11c-\uacac\uace0":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\uc9c8\uc11c-\ubd88\ubcc0":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\uce68\uc2dd":{baseNeed:8,attack:["\uacf5\uaca9\ub825","\ucd94\uac00 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \ud53c\ud574 \uac15\ud654"]},"\ud63c\ub3c8-\uc65c\uace1":{baseNeed:9,attack:["\uacf5\uaca9\ub825","\ubcf4\uc2a4 \ud53c\ud574"],support:["\uc544\uad70 \ud53c\ud574 \uac15\ud654","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]},"\ud63c\ub3c8-\ubd95\uad34":{baseNeed:10,attack:["\ucd94\uac00 \ud53c\ud574","\ubcf4\uc2a4 \ud53c\ud574"],support:["\ub099\uc778\ub825","\uc544\uad70 \uacf5\uaca9 \uac15\ud654"]}},Q={"\uace0\uae09":5,"\ud76c\uadc0":7,"\uc601\uc6c5":9},ee={"\uace0\uae09":0,"\ud76c\uadc0":1,"\uc601\uc6c5":2},te=1,le=5,se=900,ae=(e,t,l)=>Math.max(t,Math.min(l,e));function ne(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"0%":t>=1?"100.00000%":(100*t).toFixed(5)+"%"}const re=e=>ne(e),ie=e=>e.toLocaleString();function oe(e,t){return!Number.isFinite(e)||e<=0?0:!Number.isFinite(t)||t<=0?1/0:e/t}const ce=e=>`${Math.max(0,Math.min(100,Math.round(100*(Number(e)||0))))}%`;function de(e){return e>=.2?{label:"\ub0ae\uc74c",tone:"bg-emerald-50 border-emerald-200 text-emerald-800"}:e>=.05?{label:"\ubcf4\ud1b5",tone:"bg-amber-50 border-amber-200 text-amber-800"}:e>=.01?{label:"\ub192\uc74c",tone:"bg-orange-50 border-orange-200 text-orange-800"}:{label:"\ub9e4\uc6b0 \ub192\uc74c",tone:"bg-rose-50 border-rose-200 text-rose-800"}}function me(e,t){if(t<=0)return 0;if(0===e)return 0;if(e===t)return 1;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mle"){case"laplace":return(e+1)/(t+2);case"jeffreys":return(e+.5)/(t+1);default:return e/t}}const xe=!0,ue=[{value:1e3,label:"1,000\ud68c (\ube60\ub984)"},{value:5e3,label:"5,000\ud68c (\ubcf4\ud1b5)"},{value:1e4,label:"10,000\ud68c (\ucd94\ucc9c)"},{value:5e4,label:"50,000\ud68c (\uc815\ubc00)"}];function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;return 1-Math.pow(t,1/e)}const fe=e=>e>=2e5?1e-4:e>=1e5?2e-4:e>=5e4?3e-4:e>=1e4?5e-4:e>=5e3?7e-4:.001,ge=e=>e>=5e4?1e3:e>=1e4?800:e>=5e3?600:400;function pe(e,t){const l=Z[e];return l?"\uacf5\uaca9\ud615"===t?l.attack:"\uc9c0\uc6d0\ud615"===t?l.support:[...l.attack,...l.support]:[]}const be=e=>e.eff+e.pts+e.aLvl+e.bLvl;function ve(e){return e>=X.ANCIENT_MIN?"\uace0\ub300":e>=X.RELIC_MIN&&e<=X.RELIC_MAX?"\uc720\ubb3c":e>=X.LEGEND_MIN&&e<=X.LEGEND_MAX?"\uc804\uc124":"\ub4f1\uae09 \ubbf8\ub9cc"}function Ne(e,t,l,s,a,n){const r=l.eff>=s.eff&&l.pts>=s.pts;if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=pe(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?i.includes(e)&&t>=s:e===l&&t>=s;if("ANY_ONE"===t){const e=c&&(m(l.aName,l.aLvl,c,s.aLvl)||m(l.bName,l.bLvl,c,s.aLvl));return r&&!!e}return!(!c||!d)&&(r&&(m(l.aName,l.aLvl,c,s.aLvl)&&m(l.bName,l.bLvl,d,s.bLvl)||m(l.aName,l.aLvl,d,s.bLvl)&&m(l.bName,l.bLvl,c,s.aLvl)))}function je(e){return 1!==e}function we(e,t,l,s,a){const n=e,r=[];n.eff<5&&r.push({slot:{kind:"EFF",delta:1},w:11.65}),n.eff<=3&&r.push({slot:{kind:"EFF",delta:2},w:4.4}),n.eff<=2&&r.push({slot:{kind:"EFF",delta:3},w:1.75}),n.eff<=1&&r.push({slot:{kind:"EFF",delta:4},w:.45}),je(n.eff)&&r.push({slot:{kind:"EFF",delta:-1},w:3}),n.pts<5&&r.push({slot:{kind:"PTS",delta:1},w:11.65}),n.pts<=3&&r.push({slot:{kind:"PTS",delta:2},w:4.4}),n.pts<=2&&r.push({slot:{kind:"PTS",delta:3},w:1.75}),n.pts<=1&&r.push({slot:{kind:"PTS",delta:4},w:.45}),je(n.pts)&&r.push({slot:{kind:"PTS",delta:-1},w:3}),n.aLvl<5&&r.push({slot:{kind:"A_LVL",delta:1},w:11.65}),n.aLvl<=3&&r.push({slot:{kind:"A_LVL",delta:2},w:4.4}),n.aLvl<=2&&r.push({slot:{kind:"A_LVL",delta:3},w:1.75}),n.aLvl<=1&&r.push({slot:{kind:"A_LVL",delta:4},w:.45}),je(n.aLvl)&&r.push({slot:{kind:"A_LVL",delta:-1},w:3}),n.bLvl<5&&r.push({slot:{kind:"B_LVL",delta:1},w:11.65}),n.bLvl<=3&&r.push({slot:{kind:"B_LVL",delta:2},w:4.4}),n.bLvl<=2&&r.push({slot:{kind:"B_LVL",delta:3},w:1.75}),n.bLvl<=1&&r.push({slot:{kind:"B_LVL",delta:4},w:.45}),je(n.bLvl)&&r.push({slot:{kind:"B_LVL",delta:-1},w:3});const i=pe(s,"\uc0c1\uad00 \uc5c6\uc74c"),o=i.filter(e=>e!==n.bName&&e!==n.aName).length>0,c=i.filter(e=>e!==n.aName&&e!==n.bName).length>0;return o&&r.push({slot:{kind:"A_CHANGE"},w:3.25}),c&&r.push({slot:{kind:"B_CHANGE"},w:3.25}),t>1&&(1!==a&&r.push({slot:{kind:"COST",mod:1},w:1.75}),-1!==a&&r.push({slot:{kind:"COST",mod:-1},w:1.75}),r.push({slot:{kind:"REROLL_PLUS",amount:1},w:2.5}),r.push({slot:{kind:"REROLL_PLUS",amount:2},w:.75})),r.push({slot:{kind:"HOLD"},w:1.75}),r}function ye(e,t){switch(e.kind){case"EFF":return"\uc758\uc9c0\ub825 \ud6a8\uc728 "+(e.delta>0?"+"+e.delta:"-1");case"PTS":return"\ud3ec\uc778\ud2b8 "+(e.delta>0?"+"+e.delta:"-1");case"A_LVL":return`${t.aName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"B_LVL":return`${t.bName} Lv. ${e.delta>0?"+"+e.delta:"-1"}`;case"A_CHANGE":return`${t.aName} \ud6a8\uacfc \ubcc0\uacbd`;case"B_CHANGE":return`${t.bName} \ud6a8\uacfc \ubcc0\uacbd`;case"COST":return 1===e.mod?"\uac00\uacf5 \ube44\uc6a9 +100% \uc99d\uac00":"\uac00\uacf5 \ube44\uc6a9 -100% \uac10\uc18c";case"HOLD":return"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0";case"REROLL_PLUS":return"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 "+(2===e.amount?"+2\ud68c":"+1\ud68c");default:return""}}function ke(e,t){const l=e=>e.includes("-1")?-1:parseInt(e.replace(/[^0-9]/g,""),10)||1;return(e=e.trim()).startsWith("\uc758\uc9c0\ub825 \ud6a8\uc728")?{kind:"EFF",delta:l(e)}:e.startsWith("\ud3ec\uc778\ud2b8")?{kind:"PTS",delta:l(e)}:e.startsWith(t.aName+" ")?e.includes("\ubcc0\uacbd")?{kind:"A_CHANGE"}:{kind:"A_LVL",delta:l(e)}:e.startsWith(t.bName+" ")?e.includes("\ubcc0\uacbd")?{kind:"B_CHANGE"}:{kind:"B_LVL",delta:l(e)}:e.startsWith("\uac00\uacf5 \ube44\uc6a9")?{kind:"COST",mod:e.includes("+100%")?1:-1}:e.startsWith("\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")?{kind:"HOLD"}:e.startsWith("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30")?{kind:"REROLL_PLUS",amount:e.includes("+2")?2:1}:null}function Le(e,t,l,s,a,n){const r="function"===typeof n?n:Math.random;let i={...l};const o=se*(-1===a?0:1===a?2:1);let c=0,d=0;const m=pe(e,"\uc0c1\uad00 \uc5c6\uc74c");switch(s.kind){case"EFF":i.eff=ae(i.eff+s.delta,0,le);break;case"PTS":i.pts=ae(i.pts+s.delta,0,le);break;case"A_LVL":i.aLvl=ae(i.aLvl+s.delta,0,le);break;case"B_LVL":i.bLvl=ae(i.bLvl+s.delta,0,le);break;case"A_CHANGE":{const e=m.filter(e=>e!==i.bName&&e!==i.aName);if(e.length){const t=e[Math.floor(r()*e.length)];i.aName=t}break}case"B_CHANGE":{const e=m.filter(e=>e!==i.aName&&e!==i.bName);if(e.length){const t=e[Math.floor(r()*e.length)];i.bName=t}break}case"COST":c=s.mod;break;case"HOLD":default:break;case"REROLL_PLUS":d+=s.amount}return{next:i,goldThisAttempt:o,nextRate:c,rerollDelta:d}}const Ae={successProb:0,legendProb:0,relicProb:0,ancientProb:0,expectedGold:0};function Ee(e,t,l,s,a,n,r,i,o,c,d,m,x){let u=arguments.length>13&&void 0!==arguments[13]?arguments[13]:{};const{maxTrials:h=5e4,epsilon:f=.002,batch:g=1e3,minTrials:p=Math.min(1e4,h),estimator:b="jeffreys",useAntithetic:v=!0,autoScaleRare:N=!0,rareTargetSuccesses:j=100,rareMaxTrials:w=2e5,rareTiers:y=[2e5]}=u,k=s=>function(e,t,l,s,a,n){let r=Math.max(0,s.eff-l.eff)+Math.max(0,s.pts-l.pts);if("\uc0c1\uad00 \uc5c6\uc74c"===e)return r;const i=pe(a,e),o=e=>"\uc0c1\uad00\uc5c6\uc74c"===e,c=o(null===n||void 0===n?void 0:n.aName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.aName)?null===n||void 0===n?void 0:n.aName:null,d=o(null===n||void 0===n?void 0:n.bName)?"\uc0c1\uad00\uc5c6\uc74c":i.includes(null===n||void 0===n?void 0:n.bName)?null===n||void 0===n?void 0:n.bName:null,m=(e,t,l,s)=>o(l)?(i.includes(e)?0:1)+Math.max(0,s-t):(e===l?0:1)+Math.max(0,s-t);if("ANY_ONE"===t){if(!c)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,c,s.aLvl),t=m(l.bName,l.bLvl,c,s.aLvl);r+=Math.min(e,t)}else{if(!c||!d)return Number.POSITIVE_INFINITY;const e=m(l.aName,l.aLvl,c,s.aLvl)+m(l.bName,l.bLvl,d,s.bLvl),t=m(l.aName,l.aLvl,d,s.bLvl)+m(l.bName,l.bLvl,c,s.aLvl);r+=Math.min(e,t)}return r}(t,l,s,a,e,x),L=m=>{const u=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=m()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1};let h={...s},f=0,g=r,p=i,b=c,v=o,N=!0;if("STOP_ON_SUCCESS"===n&&Ne(t,l,h,a,e,x)){const e=ve(be(h));return{successProb:1,legendProb:"\uc804\uc124"===e?1:0,relicProb:"\uc720\ubb3c"===e?1:0,ancientProb:"\uace0\ub300"===e?1:0,expectedGold:0}}for(;g>0;){let s=[];if(N&&d.length>0)s=d.slice(0,4);else{const t=we(h,g,0,e,v);if(!t.length)break;const l=[...t],a=Math.min(4,l.length);for(let e=0;e<a;e++){const e=u(l);s.push(l[e].slot),l.splice(e,1)}}if(xe){const t=s[Math.floor(m()*s.length)],l=Le(e,0,h,t,v,m);h=l.next,f+=l.goldThisAttempt,v=l.nextRate,p+=l.rerollDelta,b=!0}else{const l=pe(e,t),a=h.aName,n=h.bName,r=l.some(e=>e!==n&&e!==a),i=l.some(e=>e!==a&&e!==n),o=k(h);let c=null;for(const t of s){if("A_CHANGE"===t.kind&&!r)continue;if("B_CHANGE"===t.kind&&!i)continue;const l=Le(e,0,h,t,v,m),s=o-k(l.next);(!c||s>c.gain)&&(c={next:l.next,gold:l.goldThisAttempt,nextRate:l.nextRate,rrd:l.rerollDelta,gain:s})}if(c&&c.gain<=0&&b&&p>0){p-=1,N=!1;continue}c&&(h=c.next,f+=c.gold,v=c.nextRate,p+=c.rrd,b=!0)}if(g-=1,N=!1,"STOP_ON_SUCCESS"===n&&Ne(t,l,h,a,e,x))break}const j=ve(be(h));return{successProb:Ne(t,l,h,a,e,x)?1:0,legendProb:"\uc804\uc124"===j?1:0,relicProb:"\uc720\ubb3c"===j?1:0,ancientProb:"\uace0\ub300"===j?1:0,expectedGold:f}};let A=0,E=0,S=0,C=0,M=0,P=0,R={...Ae,trialsUsed:0,ci:{low:0,high:0,halfWidth:0}},$=h,_=!1;const T=Array.isArray(y)&&y.length?[...y].sort((e,t)=>e-t):[w],F=T[T.length-1],O=e=>T.find(t=>t>e)||e,I=T[0],B=(e,t)=>(e>>>0^Math.imul(t+1>>>0,2654435761)>>>0)>>>0,z=()=>{const e=E/Math.max(1,A);let t;if(0===e){const e=he(A);t={low:0,high:e,halfWidth:e/2}}else if(1===e){const e=1-he(A);t={low:e,high:1,halfWidth:(1-e)/2}}else{const l=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96;const s=1+l*l/t,a=(e+l*l/(2*t))/s,n=l/s*Math.sqrt(e*(1-e)/t+l*l/(4*t*t));return{low:Math.max(0,a-n),high:Math.min(1,a+n)}}(e,A);t={low:l.low,high:l.high,halfWidth:(l.high-l.low)/2}}return R.ci=t,t};for(;A<$;){const e=g;for(let l=0;l<e&&!(A>=$);l++){const e=B(m>>>0,A+l),t=L(q(e));if(E+=t.successProb,S+=t.legendProb,C+=t.relicProb,M+=t.ancientProb,P+=t.expectedGold,A+=1,v&&A<$){const t=q(e),l=L(()=>1-t());E+=l.successProb,S+=l.legendProb,C+=l.relicProb,M+=l.ancientProb,P+=l.expectedGold,A+=1}}const t=z().halfWidth||0;if(N&&A>=p&&0===E&&$<F){$=$<I?I:O($),_=!0;continue}if(N&&A>=p&&E<j&&$<F){const e=$<I?I:O($);$=Math.min(F,e);continue}if(!_&&t<=f&&A>=p)break}return R.trialsUsed=A,R.successProb=me(E,A,b),R.legendProb=me(S,A,b),R.relicProb=me(C,A,b),R.ancientProb=me(M,A,b),R.expectedGold=P/Math.max(1,A),R.successes=0|E,R}const Se={legend:"linear-gradient(90deg, #7A3E00, #B16800)",relic:"linear-gradient(90deg, #8C2F06, #AB4102)",ancient:"linear-gradient(90deg, #A67C37, #F5DFAB)"};function Ce(e){let{value:t,items:l,onChange:a,placeholder:n,className:o,disabled:c}=e;const[d,u]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=(0,s.useRef)(null),p=(0,s.useRef)({top:0,left:0,width:0}),[,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{const e=()=>u(!1);return window.addEventListener("close-all-dropdowns",e),()=>window.removeEventListener("close-all-dropdowns",e)},[]),function(e,t){const l=(0,s.useMemo)(()=>Array.isArray(e)?e:[e],[e]),a=(0,s.useRef)(t);(0,s.useEffect)(()=>{a.current=t},[t]),(0,s.useEffect)(()=>{const e=e=>{var t;l.some(t=>(null===t||void 0===t?void 0:t.current)&&t.current.contains(e.target))||null===(t=a.current)||void 0===t||t.call(a,e)};return document.addEventListener("click",e,!0),()=>document.removeEventListener("click",e,!0)},[l])}([h,g],()=>u(!1)),(0,s.useLayoutEffect)(()=>{if(!d||!h.current)return;const e=h.current.getBoundingClientRect();p.current={top:e.bottom+4,left:e.left,width:e.width},b(e=>e+1);const t=()=>{var e;const t=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(p.current={top:t.bottom+4,left:t.left,width:t.width},b(e=>e+1))};return window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[d]);const v=l.find(e=>e.value===t),N=d&&!c?(0,f.jsx)(m.N,{children:(0,f.jsx)(x.P.ul,{ref:g,initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.98},transition:{duration:.12},style:{position:"fixed",top:p.current.top,left:p.current.left,width:p.current.width,zIndex:9999},className:"rounded-xl border bg-white shadow-lg overflow-auto max-h-60",children:l.map(e=>(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",onClick:()=>{e.disabled||(a(e.value),u(!1))},"aria-disabled":!!e.disabled||void 0,className:`w-full text-left px-3 py-2 text-sm ${e.disabled?"cursor-not-allowed":"hover:bg-gray-50"} ${e.value===t?"bg-gray-100":""}`,children:(0,f.jsx)("span",{className:"block truncate",children:e.label})})},String(e.value)))},"menu")}):null;return(0,f.jsxs)("div",{ref:h,className:`relative min-w-0 ${o||""}`,children:[(0,f.jsxs)("button",{type:"button",onClick:()=>!c&&u(e=>!e),disabled:c,className:"min-w-0 h-10 w-full inline-flex items-center justify-between rounded-xl border px-3 bg-white hover:bg-gray-50 transition focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 "+(c?"cursor-not-allowed":""),children:[(0,f.jsx)("span",{className:"truncate text-sm",children:v?v.label:n||"\uc120\ud0dd"}),(0,f.jsx)("span",{className:"text-gray-500 text-sm select-none",children:d?(0,f.jsx)(r.A,{size:16}):(0,f.jsx)(i.A,{size:16})})]}),d&&N]})}function Me(e){let{toasts:t,onClose:l}=e;const s=e=>({success:"text-emerald-900/80 hover:text-emerald-900",info:"text-sky-900/80 hover:text-sky-900",warning:"text-amber-900/80 hover:text-amber-900",error:"text-rose-900/80 hover:text-rose-900"}[e]||"text-amber-900/80 hover:text-amber-900");return(0,f.jsx)("div",{className:"fixed inset-0 z-[9999] flex space-y-2 flex-col items-center justify-center pointer-events-none px-4",children:(0,f.jsx)(m.N,{children:t.map(e=>{return(0,f.jsxs)(x.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:380,damping:28},className:`pointer-events-auto overflow-hidden rounded-2xl border shadow-lg backdrop-blur px-4 py-3 flex items-center gap-3 min-w-[320px] max-w-[90vw] ${t=e.tone,{success:"bg-emerald-50/95 border-emerald-200 text-emerald-900",info:"bg-sky-50/95 border-sky-200 text-sky-900",warning:"bg-amber-50/95 border-amber-200 text-amber-900",error:"bg-rose-50/95 border-rose-200 text-rose-900"}[t]||"bg-amber-50/95 border-amber-200 text-amber-900"}`,children:[(0,f.jsx)("div",{className:"text-sm flex-1",children:e.msg}),(0,f.jsx)("button",{className:`text-sm font-medium self-center ${s(e.tone)}`,onClick:()=>l(e.id),"aria-label":"\ub2eb\uae30",children:"\ub2eb\uae30"})]},e.id);var t})})})}function Pe(e){let{value:t,set:l,onChange:a,min:n=te,max:r=99,step:i=1,allowFloat:o=!1,zeroOnBlur:c=!0,className:d="",inputProps:m={},disabled:x}=e;const u=e=>null===e||void 0===e?"":String(e),[h,g]=s.useState(u(t));s.useEffect(()=>{g(u(t))},[t]);const p=e=>{let t=e;return null!=n&&t<n&&(t=n),null!=r&&t>r&&(t=r),t},b="function"===typeof a,v="function"===typeof l;return(0,f.jsx)("input",{type:"number",inputMode:o?"decimal":"numeric",step:i,min:n,max:r,disabled:x,value:h,onChange:e=>{const t=e.target.value;if(""===t)return g(""),void(b&&a(null));g(t);const s=Number(t);if(!Number.isFinite(s))return void(b&&a(null));const n=o?s:Math.trunc(s);b?a(n):v&&l(p(n))},onBlur:()=>{const e=(e=>{if(""===e)return c?null!==n&&void 0!==n?n:0:null;let t=Number(e);return Number.isFinite(t)?(t=o?t:Math.trunc(t),p(t)):c?null!==n&&void 0!==n?n:0:null})(h);g(null==e?"":String(e)),b?a(e):v&&l(null==e?null!==n&&void 0!==n?n:0:e)},onWheel:e=>e.currentTarget.blur(),className:`h-10 px-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-[#a399f2]/50 bg-white ${d}`,...m})}const Re=e=>{let{value:t,set:l,options:s,disabled:a,placeholder:n}=e;const r=(s||[]).map(e=>{var t,l;return"string"===typeof e?{value:e,label:e}:{value:null!==(t=e.value)&&void 0!==t?t:e,label:null!==(l=e.label)&&void 0!==l?l:String(e)}});return(0,f.jsx)(Ce,{value:t,onChange:l,items:r,disabled:!!a,className:"w-full lg:w-full",placeholder:n||"\uc120\ud0dd"})};function $e(e){const t=e.filter(Boolean);return new Set(t).size!==t.length}function _e(){var e;const{toasts:t,push:l,remove:a}=function(){const[e,t]=(0,s.useState)([]);return{toasts:e,push:function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const s=Math.random().toString(36).slice(2,9);t(t=>[...t,{id:s,msg:e,tone:l}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==s)),2600)},remove:e=>t(t=>t.filter(t=>t.id!==e))}}(),[n,r]=(0,s.useState)("\uc9c8\uc11c-\uc548\uc815"),[i,o]=(0,s.useState)("\uc0c1\uad00 \uc5c6\uc74c"),[c,m]=(0,s.useState)("\uace0\uae09"),[u,g]=(0,s.useState)("ANY_ONE"),p=(0,s.useMemo)(()=>pe(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),b=(0,s.useMemo)(()=>pe(n,"\uc0c1\uad00 \uc5c6\uc74c"),[n]),[v,N]=(0,s.useState)({eff:te,pts:te,aName:p[0],aLvl:te,bName:p[1]||p[0],bLvl:te}),[j,w]=(0,s.useState)({eff:te,pts:te,aLvl:te,bLvl:te}),[y,k]=(0,s.useState)({aName:pe(n,i)[0],bName:pe(n,i)[1]||pe(n,i)[0]}),[L,A]=(0,s.useState)(!1),[E,S]=(0,s.useState)(!1),[C,M]=(0,s.useState)(!1),P=v.aName!==v.bName,[R,$]=(0,s.useState)(1e4),_=(0,s.useRef)(!1);(0,s.useEffect)(()=>{_.current||(_.current=!0,N(e=>({...e,eff:Math.max(e.eff,te),pts:Math.max(e.pts,te),aLvl:Math.max(e.aLvl,te),bLvl:Math.max(e.bLvl,te)})),w(e=>({...e,eff:Math.max(e.eff,te),pts:Math.max(e.pts,te),aLvl:Math.max(e.aLvl,te),bLvl:Math.max(e.bLvl,te)})))},[]);const[T,F]=(0,s.useState)(()=>({attemptsLeft:Q[c],rerolls:ee[c],unlocked:!1,costAddRate:0,gold:0,state:{...v}}));(0,s.useEffect)(()=>{F(e=>({...e,attemptsLeft:Q[c],rerolls:ee[c],state:{...v},unlocked:!1,costAddRate:0,gold:0}))},[c,v]);const[O,I]=(0,s.useState)(null),[X,me]=(0,s.useState)(""),[xe,he]=(0,s.useState)({past:[],future:[]}),be=(0,s.useCallback)(()=>({manual:JSON.parse(JSON.stringify(T)),changeMode:O?{...O,options:[...O.options]}:null,changePick:X}),[T,O,X]),ve=(0,s.useCallback)(e=>{F(e.manual),I(e.changeMode),me(e.changePick)},[]),Ne=(0,s.useCallback)(()=>{he(e=>{const t=[...e.past,be()];for(;t.length>50;)t.shift();return{past:t,future:[]}})},[be]),je=xe.past.length>0,Ae=xe.future.length>0,[_e,Te]=(0,s.useState)([]),Fe=()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`},Oe=(0,s.useCallback)(e=>{Te(t=>[{id:Math.random().toString(36).slice(2),time:Fe(),...e},...t].slice(0,200))},[]),Ie=(0,s.useCallback)(()=>{he(e=>{if(0===e.past.length)return e;const t=e.past[e.past.length-1],l=e.past.slice(0,-1),s=be();return ve(t),Oe({type:"undo",title:"\ub418\ub3cc\ub9ac\uae30",detail:"\uc774\uc804 \uc0c1\ud0dc\ub85c \ubcf5\uad6c"}),{past:l,future:[s,...e.future]}})},[ve,be,Oe]),Be=(0,s.useCallback)(()=>{he(e=>{if(0===e.future.length)return e;const t=e.future[0],l=e.future.slice(1),s=be();return ve(t),Oe({type:"redo",title:"\ub2e4\uc2dc\ud558\uae30",detail:"\ub418\ub3cc\ub9ac\uae30 \ucde8\uc18c"}),{past:[...e.past,s],future:l}})},[ve,be,Oe]);(0,s.useEffect)(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key.toLowerCase()&&(e.preventDefault(),e.shiftKey?Ae&&Be():je&&Ie())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[je,Ae,Ie,Be]);const ze=(e,t)=>{const l=[],s=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;e[s]!==t[s]&&l.push(`${a} ${e[s]}\u2192${t[s]}`)};if(s("eff","\ud6a8\uc728"),s("pts","\ud3ec\uc778\ud2b8"),e.aName!==t.aName||e.aLvl!==t.aLvl){const s=e.aName===t.aName?t.aName:`${e.aName}\u2192${t.aName}`;l.push(`A ${s} Lv.${e.aLvl}\u2192${t.aLvl}`)}if(e.bName!==t.bName||e.bLvl!==t.bLvl){const s=e.bName===t.bName?t.bName:`${e.bName}\u2192${t.bName}`;l.push(`B ${s} Lv.${e.bLvl}\u2192${t.bLvl}`)}return l.join(" \xb7 ")};(0,s.useEffect)(()=>{const e=pe(n,i);k(t=>{const l=e.includes(t.aName)?t.aName:e[0],s=e[1]||e[0],a=e.includes(t.bName)?t.bName:l===s?e.find(e=>e!==l)||l:s;return{aName:l,bName:a}})},[n,i]);const Ge=(0,s.useMemo)(()=>{const e=we(T.state,T.attemptsLeft,0,n,T.costAddRate).map(e=>ye(e.slot,T.state));return Array.from(new Set(e))},[T.state,T.attemptsLeft,T.costAddRate,i,n]),He=(0,s.useMemo)(()=>{const e=["\uc758\uc9c0\ub825 \ud6a8\uc728 +1","\ud3ec\uc778\ud2b8 +1",`${T.state.aName} Lv. +1`,`${T.state.bName} Lv. +1`],t=[];let l=0;for(const r of e)if(Ge.includes(r)&&!t.includes(r))t.push(r);else{for(var s;l<Ge.length&&t.includes(Ge[l]);)l++;t.push(null!==(s=Ge[l])&&void 0!==s?s:r),l++}for(;t.length<4;){for(var a,n;l<Ge.length&&t.includes(Ge[l]);)l++;t.push(null!==(a=null!==(n=Ge[l++])&&void 0!==n?n:Ge[0])&&void 0!==a?a:"\uac00\uacf5 \uc0c1\ud0dc \uc720\uc9c0")}return t.slice(0,4)},[Ge,T.state.aName,T.state.bName]),[De,We]=(0,s.useState)(He);(0,s.useEffect)(()=>{We(e=>{const t=e.map((e,t)=>{var l,s;return Ge.includes(e)?e:null!==(l=null!==(s=Ge[t])&&void 0!==s?s:Ge[0])&&void 0!==l?l:e}),l=new Set;for(let s=0;s<t.length;s++){if(!l.has(t[s])){l.add(t[s]);continue}const e=Ge.find(e=>!l.has(e));e&&(t[s]=e,l.add(e))}return t})},[Ge]);const[Ve,Ue]=(0,s.useState)(null),[Ye,qe]=(0,s.useState)(null),[Ke,Je]=(0,s.useState)(!1),Xe=(0,s.useRef)(0),Ze=(0,s.useRef)(null),Qe=(0,s.useRef)(null),[et,tt]=(0,s.useState)(null);(0,s.useLayoutEffect)(()=>{const e=()=>{Qe.current&&tt(Qe.current.offsetHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[T,De,Ye,Ve,O,C,L,E]);const lt=.0025,st=(0,s.useCallback)((e,t,l,s,a,n,r)=>{let i=0,o=0;for(const c of e){const e=ke(c,a.state);if(!e)continue;if("A_CHANGE"===e.kind){if(!(pe(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.bName&&e!==a.state.aName).length>0))continue}if("B_CHANGE"===e.kind){if(!(pe(t,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==a.state.aName&&e!==a.state.bName).length>0))continue}const d=Le(t,0,a.state,e,a.costAddRate,()=>q(r+U(c))()),m={attemptsLeft:a.attemptsLeft-1,rerolls:a.rerolls+d.rerollDelta,unlocked:!0,costAddRate:d.nextRate,gold:a.gold+d.goldThisAttempt,state:d.next};i+=Ee(t,l,s,m.state,n,"RUN_TO_END",m.attemptsLeft,m.rerolls,m.costAddRate,m.unlocked,[],r+U(c),y,{maxTrials:Math.min(8e3,R),minTrials:Math.min(8e3,R),epsilon:.006,batch:500,estimator:"jeffreys",useAntithetic:W,autoScaleRare:!1}).successProb,o+=1}return o?i/o:0},[y,R]);function at(e,t,l,s){const a=q(e),n=[...we(s.state,s.attemptsLeft,0,t,s.costAddRate)],r=[],i=e=>{const t=e.reduce((e,t)=>e+t.w,0);let l=a()*t;for(let s=0;s<e.length;s++)if(l-=e[s].w,l<=0)return s;return e.length-1},o=Math.min(4,n.length);for(let c=0;c<o;c++){const e=i(n);r.push(n[e].slot),n.splice(e,1)}return r}function nt(e,t){return e.map(e=>ye(e,t))}const rt=(0,s.useMemo)(()=>{if(!T.unlocked)return{shouldReroll:!1,reason:"\uccab \uac00\uacf5 \uc774\uc804\uc5d0\ub294 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \ucd94\ucc9c\uc744 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."};if(T.rerolls<=0)return{shouldReroll:!1,reason:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."};if(T.attemptsLeft<=0)return{shouldReroll:!1,reason:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud310\ub2e8\uc774 \ubb34\uc758\ubbf8\ud569\ub2c8\ub2e4."};const e="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":u,t=Y({gemKey:n,pos:i,rarity:c,manual:T,tgt:j,manLabels:De,abForEval:e,salt:"REROLL_EV"}),l=st(De,n,i,e,T,j,t+7);let s=0;for(let c=0;c<16;c++){const l=t+1e3+31*c,a={...T,rerolls:T.rerolls-1},r=nt(at(l,n,0,a),a.state);s+=st(r,n,i,e,a,j,l+17)}const a=s/16,r=a-l,o=e=>(100*e).toFixed(2)+"%";return r>lt?{shouldReroll:!0,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)} \u2192 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)} (\u25b2${o(r)}).`}:r<-lt?{shouldReroll:!1,reason:`\ub8e9\uc5b4\ud5e4\ub4dc \uae30\uc900 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c: \ud604\uc7ac \ucd5c\uc120 ${o(l)}\uac00 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uae30\ub300 ${o(a)}\ubcf4\ub2e4 \uc720\ub9ac (\u25bc${o(-r)}).`}:{shouldReroll:!1,reason:`\ub450 \uacbd\ub85c \ucc28\uc774 \ubbf8\ubbf8: \ud604\uc7ac ${o(l)} vs \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${o(a)} (|\u0394| < ${.25.toFixed(2)}%).`}},[n,i,c,T,j,De,u,st]);function it(){if(!O)return;if(!ht)return void l("\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815\uc740 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning");Ne();const e=se*(-1===T.costAddRate?0:1===T.costAddRate?2:1),t={...T.state};F(t=>{const l={...t.state};return"A"===O.who?l.aName=X:l.bName=X,{attemptsLeft:t.attemptsLeft-1,rerolls:t.rerolls,unlocked:!0,costAddRate:t.costAddRate,gold:t.gold+e,state:l}});const s={...T.state,..."A"===O.who?{aName:X}:{bName:X}};Oe({type:"change",title:`\ud6a8\uacfc \ubcc0\uacbd \ud655\uc815 (${O.who}) \u2192 ${X}`,detail:ze(t,s),meta:{cost:e}}),I(null),l("\uc120\ud0dd\ud55c \ud6a8\uacfc\ub85c \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success")}function ot(){I(null),l("\ud6a8\uacfc \ubcc0\uacbd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","warning")}(0,s.useEffect)(()=>{if("BOTH"!==u||"\uc0c1\uad00 \uc5c6\uc74c"===i)return;const e=pe(n,i);k(t=>{const l=e.includes(t.aName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.aName?t.aName:e[0],s=e.find(e=>e!==l)||e[0],a=e.includes(t.bName)&&"\uc0c1\uad00\uc5c6\uc74c"!==t.bName&&t.bName!==l?t.bName:s;return{aName:l,bName:a}})},[u,n,i]),(0,s.useEffect)(()=>{if(!C||!P)return Ue(null),void qe(null);if($e(De))return Ue(null),void qe(null);const e=De.map(e=>ke(e,T.state)).filter(e=>!!e),t="\uc0c1\uad00 \uc5c6\uc74c"===i?"ANY_ONE":u,l=Y({gemKey:n,pos:i,rarity:c,manual:T,tgt:j,selectedFirstFour:e,calcMode:"\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":u}),s=++Xe.current;return Je(!0),Ze.current&&clearTimeout(Ze.current),Ze.current=setTimeout(()=>{const a={maxTrials:R,minTrials:R,epsilon:fe(R),batch:ge(R),estimator:"jeffreys",useAntithetic:W,autoScaleRare:V,rareTargetSuccesses:100,rareTiers:[2e5]},r=Ee(n,i,t,T.state,j,"STOP_ON_SUCCESS",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,l+101,y,a),o=Ee(n,i,t,T.state,j,"RUN_TO_END",T.attemptsLeft,T.rerolls,T.costAddRate,T.unlocked,e,l+103,y,a);s===Xe.current&&(Ue(r),qe(o),Je(!1))},0),()=>{Ze.current&&(clearTimeout(Ze.current),Ze.current=null)}},[n,i,c,P,T,j,C,De,u,y,R]),(0,s.useEffect)(()=>{document.title="\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud5ec\ud37c"},[]);const ct="bg-white rounded-2xl shadow-sm p-4 lg:p-6",dt="block text-xs text-gray-500 mb-1",mt="text-base font-semibold whitespace-nowrap",xt="\uc0c1\uad00 \uc5c6\uc74c"===i?"IGNORE_AB":u,ut=1===T.costAddRate?"+100%":-1===T.costAddRate?"-100%":"0%",ht=L&&E&&C,ft=$e(De),gt=(0,s.useMemo)(()=>P&&(Ke||!(Ye&&Ve)),[P,Ke,Ye,Ve]),pt=!ht||ft||!!O||T.attemptsLeft<=0,bt=!ht||!!O||T.attemptsLeft<=0||T.rerolls<=0,vt=(0,s.useRef)(!1);(0,s.useEffect)(()=>{ht||(Te([]),he({past:[],future:[]}))},[ht]),(0,s.useEffect)(()=>{ft?vt.current||(l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694."),vt.current=!0):vt.current=!1},[ft,l]);const Nt=(0,s.useMemo)(()=>{const e=pe(n,i);return"\uc0c1\uad00 \uc5c6\uc74c"===i?e:"ANY_ONE"===u?["\uc0c1\uad00\uc5c6\uc74c",...e]:e},[n,i,u]);return(0,f.jsxs)("div",{className:"min-h-screen text-gray-900 p-4 lg:p-6",style:{backgroundImage:"linear-gradient(125deg, #85d8ea, #a399f2)",backgroundAttachment:"fixed"},children:[(0,f.jsx)("style",{children:"\n        :root{ --primary:#a399f2; --grad:linear-gradient(125deg,#85d8ea,#a399f2); }\n        .text-primary{ color:#a399f2; }\n        .accent-primary{ accent-color:#a399f2; }\n      "}),(0,f.jsxs)("div",{className:"max-w-6xl mx-auto space-y-4 lg:space-y-6",children:[(0,f.jsx)("section",{className:"py-2 lg:py-3",children:(0,f.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,f.jsx)("h1",{className:"text-xl lg:text-2xl font-bold leading-tight text-white drop-shadow text-center lg:text-left w-full lg:w-auto",children:"\ub85c\uc544 \uc544\ud06c\uadf8\ub9ac\ub4dc \uc82c \uac00\uacf5 \ud655\ub960 \uacc4\uc0b0\uae30"}),(0,f.jsxs)("div",{className:"flex gap-2 w-auto ml-auto lg:ml-0 items-center",children:[(0,f.jsx)("span",{className:"hidden sm:inline text-white/90 text-sm",children:"\uc2dc\ubbac\ub808\uc774\uc158 \ud69f\uc218"}),(0,f.jsx)("div",{className:"min-w-[170px]",children:(0,f.jsx)(Ce,{value:R,onChange:$,items:ue,placeholder:"\ubc18\ubcf5 \uc218 \uc120\ud0dd"})})]})]})}),(0,f.jsxs)("section",{className:`${ct} !mt-2`,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uae30\ubcf8 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:L?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>A(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>A(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r ",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] w-full lg:w-56 "+(L?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc82c \ud0c0\uc785"}),(0,f.jsx)(Ce,{className:"w-full",value:n,onChange:e=>r(e),items:Object.keys(Z).map(e=>({value:e,label:e})),placeholder:"\uc82c \ud0c0\uc785",disabled:L})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] w-full lg:w-40 "+(L?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ub4f1\uae09"}),(0,f.jsx)(Ce,{className:"w-full",value:c,onChange:e=>m(e),items:["\uace0\uae09","\ud76c\uadc0","\uc601\uc6c5"].map(e=>({value:e,label:e})),placeholder:"\ub4f1\uae09",disabled:L})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-auto",children:[(0,f.jsx)("label",{className:dt,children:"\uae30\ubcf8 \uc2dc\ub3c4/\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"}),(0,f.jsxs)("div",{className:"h-10 px-3 rounded-xl border bg-gray-50 inline-flex items-center text-sm",children:["\uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"mx-1",children:Q[c]})," \xb7 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30"," ",(0,f.jsx)("b",{className:"ml-1",children:ee[c]}),"\ud68c"]})]})]})})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\ud604\uc7ac \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:E?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uc77d\uae30 \uc804\uc6a9)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>S(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>S(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative \r grid grid-cols-2 gap-2 \r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3 \r items-stretch lg:items-end \r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)(Pe,{value:v.eff,set:e=>N({...v,eff:ae(e,te,le)}),min:te,max:le,disabled:E})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8"}),(0,f.jsx)(Pe,{value:v.pts,set:e=>N({...v,pts:ae(e,te,le)}),min:te,max:le,disabled:E})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc A"}),(0,f.jsx)(Re,{value:v.aName,set:e=>N({...v,aName:e}),options:b,disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc A \ub808\ubca8"}),(0,f.jsx)(Pe,{value:v.aLvl,set:e=>N({...v,aLvl:ae(e,te,le)}),min:te,max:le,disabled:E})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[160px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc B"}),(0,f.jsx)(Re,{value:v.bName,set:e=>N({...v,bName:e}),options:b.filter(e=>e!==v.aName),disabled:E,placeholder:E?"\ube44\ud65c\uc131\ud654":void 0})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] "+(E?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud6a8\uacfc B \ub808\ubca8"}),(0,f.jsx)(Pe,{value:v.bLvl,set:e=>N({...v,bLvl:ae(e,te,le)}),min:te,max:le,disabled:E})]})]})})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\ubaa9\ud45c \uc635\uc158 \uc124\uc815"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-3 flex-wrap",children:C?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"\uc800\uc7a5\ub428 (\uacc4\uc0b0 \ud65c\uc131)"}),(0,f.jsxs)("button",{type:"button",onClick:()=>M(!1),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(B.A,{size:16}),"\ud3b8\uc9d1\ud558\uae30"]})]}):(0,f.jsxs)("button",{type:"button",onClick:()=>M(!0),className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(z.A,{size:16}),"\uc800\uc7a5\ud558\uae30"]})})]}),(0,f.jsxs)("div",{className:"mb-1 flex items-center gap-4 text-sm "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,f.jsx)("span",{className:"text-xs text-gray-500",children:"\ubaa9\ud45c \ucda9\uc871 \ubc29\uc2dd"}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"ANY_ONE"===u,onChange:()=>g("ANY_ONE"),disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"1\uac1c \uc774\uc0c1"]}),(0,f.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,f.jsx)("input",{type:"radio",checked:"BOTH"===u,onChange:()=>g("BOTH"),disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i,className:"accent-primary"}),"2\uac1c"]})]}),(0,f.jsx)("div",{className:"mt-3",children:(0,f.jsxs)("div",{className:"\r relative\r grid grid-cols-2 gap-2\r lg:flex lg:flex-row lg:flex-nowrap lg:gap-3\r items-stretch lg:items-end\r border rounded-xl p-3 bg-white overflow-visible\r\n",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\uc758\uc9c0\ub825 \ud6a8\uc728 \u2265"}),(0,f.jsx)(Pe,{value:j.eff,set:e=>w({...j,eff:ae(e,te,le)}),min:te,max:le,disabled:C})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full lg:w-[120px] lg:flex-none "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ud3ec\uc778\ud2b8 \u2265"}),(0,f.jsx)(Pe,{value:j.pts,set:e=>w({...j,pts:ae(e,te,le)}),min:te,max:le,disabled:C})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full col-span-2 lg:col-span-1 lg:w-[100px] "+(C?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ucd94\uac00 \ud6a8\uacfc"}),(0,f.jsx)(Ce,{className:"w-full lg:w-[100px]",value:i,onChange:e=>o(e),items:["\uc0c1\uad00 \uc5c6\uc74c","\uacf5\uaca9\ud615","\uc9c0\uc6d0\ud615"].map(e=>({value:e,label:e})),placeholder:"\ucd94\uac00 \ud6a8\uacfc",disabled:C})]}),(()=>{const e=C||"\uc0c1\uad00 \uc5c6\uc74c"===i,t=e||"BOTH"!==u,l=e?"opacity-50":"",s=t?"opacity-50":"";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A"}),(0,f.jsx)(Re,{value:y.aName,set:e=>k(t=>({...t,aName:e})),options:"BOTH"===u?Nt.filter(e=>e!==y.bName):Nt,disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${l}`,children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc A \ub808\ubca8 \u2265"}),(0,f.jsx)(Pe,{value:j.aLvl,set:e=>w({...j,aLvl:ae(e,te,le)}),min:te,max:le,disabled:e})]}),(0,f.jsxs)("div",{className:"w-full lg:w-[160px] flex flex-col "+(C||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==u?"opacity-50":""),children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B"}),(0,f.jsx)(Re,{value:y.bName,set:e=>k(t=>({...t,bName:e})),options:"BOTH"===u?Nt.filter(e=>e!==y.aName):Nt,disabled:C||"\uc0c1\uad00 \uc5c6\uc74c"===i||"BOTH"!==u})]}),(0,f.jsxs)("div",{className:`flex flex-col w-full lg:w-[120px] lg:flex-none ${s}`,children:[(0,f.jsx)("label",{className:dt,children:"\ubaa9\ud45c \ud6a8\uacfc B \ub808\ubca8 \u2265"}),(0,f.jsx)(Pe,{value:j.bLvl,set:e=>w({...j,bLvl:ae(e,te,le)}),min:te,max:le,disabled:t})]})]})})()]})})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,f.jsxs)("section",{ref:Qe,className:"lg:col-span-2 "+ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uac00\uacf5 \uc2dc\ubbac\ub808\uc774\uc158"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("button",{onClick:function(){Te([]),he({past:[],future:[]}),F({attemptsLeft:Q[c],rerolls:ee[c],unlocked:!1,costAddRate:0,gold:0,state:{...v}})},className:"h-10 px-3 rounded-xl border bg-white hover:bg-white/90 inline-flex items-center gap-2 text-sm",children:[(0,f.jsx)(d.A,{size:16}),"\uc2dc\ubbac\ub808\uc774\uc158 \ucd08\uae30\ud654"]})})]}),(0,f.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["\ud56d\ubaa9 \uc801\uc6a9 / \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 ",(0,f.jsx)("b",{children:"\ubaa8\ub4e0 \uc124\uc815\uc744 \uc800\uc7a5(\uc7a0\uae08)"}),"\ud55c \ub4a4 \uc774\uc6a9\ud558\uc138\uc694."]}),(0,f.jsxs)("div",{className:"mt-3 gap-4",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\ud604\uc7ac \uc82c \uc0c1\ud0dc"}),(0,f.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc758\uc9c0\ub825 \ud6a8\uc728"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:T.state.eff})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"\uc9c8\uc11c\xb7\ud63c\ub3c8 \ud3ec\uc778\ud2b8"}),(0,f.jsx)("div",{className:"text-lg font-semibold",children:T.state.pts})]}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"A"===(null===O||void 0===O?void 0:O.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(Re,{value:X,set:me,options:O.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:T.state.aName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.aLvl]})]})}),(0,f.jsx)("div",{className:"rounded-xl border p-2 text-center flex flex-col items-center justify-center col-span-2",children:"B"===(null===O||void 0===O?void 0:O.who)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"w-full",children:(0,f.jsx)(Re,{value:X,set:me,options:O.options})}),(0,f.jsxs)("div",{className:"mt-2 flex gap-2 w-full",children:[(0,f.jsx)("button",{onClick:it,className:"h-9 px-3 rounded-xl bg-[#a399f2] text-white hover:bg-[#a399f2] w-[50%]",children:"\uc801\uc6a9"}),(0,f.jsx)("button",{onClick:ot,className:"h-9 px-3 rounded-xl border bg-white hover:bg-gray-50 w-[50%]",children:"\ucde8\uc18c"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs text-gray-500",children:T.state.bName}),(0,f.jsxs)("div",{className:"text-lg font-semibold",children:["Lv. ",T.state.bLvl]})]})})]}),(0,f.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[T.attemptsLeft<=0?(0,f.jsx)("div",{className:"inline-flex items-center px-2.5 py-1.5 rounded-xl bg-violet-50 border border-violet-200 text-violet-900 text-[12px] lg:text-[13px]",children:"\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,f.jsxs)("div",{className:"flex flex-wrap gap-2 text-[12px] lg:text-[13px]",children:[(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub0a8\uc740 \uac00\uacf5 \ud69f\uc218 ",(0,f.jsx)("b",{className:"ml-1",children:T.attemptsLeft})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",(0,f.jsx)("b",{className:"ml-1",children:T.rerolls})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\uac00\uacf5 \ube44\uc6a9 \ucd94\uac00 \ube44\uc728 ",(0,f.jsx)("b",{className:"ml-1",children:ut})]})]}),(0,f.jsxs)("div",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 border",children:["\ub204\uc801 \uace8\ub4dc ",(0,f.jsx)("b",{className:"ml-1",children:ie(T.gold)})," G"]})]})]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white mt-4",children:[(0,f.jsx)("div",{className:"text-sm font-semibold mb-2",children:"\uc774\ubc88\uc5d0 \ub4f1\uc7a5\ud55c 4\uac1c \ud56d\ubaa9"}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:De.map((e,t)=>(0,f.jsxs)("div",{className:"slot-card rounded-xl border p-2 transition-all",children:[(0,f.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["\uc2ac\ub86f ",t+1]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(Re,{value:e,set:e=>{const l=[...De];l[t]=e,We(l)},options:Ge}),(0,f.jsx)("button",{onClick:()=>function(e){if(!ht)return void l("\ud56d\ubaa9\uc744 \uc801\uc6a9\ud558\ub824\uba74 '\uae30\ubcf8 \uc124\uc815/\ud604\uc7ac \uc635\uc158/\ubaa9\ud45c \uc635\uc158'\uc744 \ubaa8\ub450 \uc800\uc7a5(\uc7a0\uae08)\ud558\uc138\uc694.","warning");if(Ne(),!C)return void l("\ubaa9\ud45c \uc635\uc158\uc744 \uba3c\uc800 \uc800\uc7a5\ud574 \uc8fc\uc138\uc694.");if(T.attemptsLeft<=0)return;if($e(De))return void l("\uc911\ubcf5\ub41c \ud56d\ubaa9\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694.");const t=De[e];if(!Ge.includes(t))return void l("\ubbf8\ub4f1\uc7a5 \uc870\uac74\uc73c\ub85c \ud604\uc7ac \uc120\ud0dd\uc740 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.");const s=ke(t,T.state);if(!s)return void l("\uc120\ud0dd\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc5b4\uc694.");if("A_CHANGE"===s.kind||"B_CHANGE"===s.kind){const e=pe(n,"\uc0c1\uad00 \uc5c6\uc74c").filter(e=>e!==T.state.aName&&e!==T.state.bName);return e.length<=0?void l("\ucd94\uac00 \ud6a8\uacfc \uc870\uac74/\uc911\ubcf5\uc73c\ub85c \ud6a8\uacfc \ubcc0\uacbd\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4."):(I({who:"A_CHANGE"===s.kind?"A":"B",options:e}),me(e[0]),void l("\ubcc0\uacbd\ud560 \ud6a8\uacfc\ub97c \uc120\ud0dd\ud574 \uc8fc\uc138\uc694. \uc67c\ucabd \ud328\ub110\uc5d0\uc11c \uc801\uc6a9\uc744 \ub204\ub974\uba74 \uc774\ubc88 \ucc28\uc218\uc5d0 \ubc18\uc601\ub429\ub2c8\ub2e4.","info"))}if(T.attemptsLeft<=0)return void l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub354 \uc774\uc0c1 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694.","warning");const a={...T.state},r=Le(n,0,T.state,s,T.costAddRate),i=T.attemptsLeft-1;F(e=>({attemptsLeft:i,rerolls:e.rerolls+r.rerollDelta,unlocked:!0,costAddRate:r.nextRate,gold:e.gold+r.goldThisAttempt,state:r.next})),Oe({type:"apply",title:`\uc2ac\ub86f ${e+1} \uc801\uc6a9: ${t}`,detail:ze(a,r.next),meta:{cost:r.goldThisAttempt,attemptsLeft:i,rerollDelta:r.rerollDelta}}),i>0&&l("\uc120\ud0dd\ud55c \ud6a8\uacfc\uac00 \ubc18\uc601\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c 4\uac1c\uc758 \uc120\ud0dd\uc9c0\ub97c \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694.","success")}(t),"aria-disabled":pt,className:`apply-btn transition-all justify-center min-w-[60px] h-10 px-3 rounded-xl border bg-white \n                          hover:border-[#a399f2] hover:text-white hover:bg-[#a399f2] inline-flex items-center\n                          ${pt?"opacity-50 cursor-not-allowed":""} \n                          ${ft?"opacity-50 cursor-not-allowed":""}`,children:"\uc801\uc6a9"})]})]},t))}),(0,f.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("button",{onClick:function(){ht?T.attemptsLeft<=0?l("\uac00\uacf5\uc774 \uc644\ub8cc\ub418\uc5b4 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5b4\uc694."):T.unlocked?T.rerolls<=0?l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ud69f\uc218\uac00 \ubd80\uc871\ud574\uc694."):(Ne(),F(e=>({...e,rerolls:e.rerolls-1})),Oe({type:"reroll",title:"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc0ac\uc6a9",detail:`\ub0a8\uc740 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ${T.rerolls-1}\ud68c`})):l("\uac00\uacf5 1\ud68c \uc774\ud6c4\ubd80\ud130 \ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc694."):l("\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30\ub294 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc7a0\uae08\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.","warning")},disabled:bt,className:`h-10 px-3 rounded-xl border ${bt?"opacity-50 cursor-not-allowed":"bg-white hover:bg-gray-50"} inline-flex items-center gap-2`,children:[(0,f.jsx)(G.A,{size:16}),"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",T.rerolls,"\ud68c"]}),(0,f.jsx)("span",{className:"text-xs text-gray-600",children:T.attemptsLeft<=0?"\uac00\uacf5 \uc644\ub8cc":T.unlocked?T.rerolls<=0?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \uc5c6\uc74c":rt.shouldReroll?"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ucd94\ucc9c":"\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 \ube44\ucd94\ucc9c":"\uccab \uac00\uacf5 \uc774\ud6c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."})]}),T.unlocked&&T.rerolls>0&&(0,f.jsx)("div",{className:"mt-2 text-xs text-gray-700",children:rt.reason})]})]})]}),(0,f.jsxs)("section",{className:`${ct} h-full flex flex-col`,style:et?{maxHeight:et}:void 0,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,f.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,f.jsx)("button",{onClick:Ie,disabled:!je,className:`ml-auto h-10 px-3 rounded-xl border ${je?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub418\ub3cc\ub9ac\uae30 (Ctrl/Cmd+Z)",children:(0,f.jsx)(H.A,{size:16})}),(0,f.jsx)("button",{onClick:Be,disabled:!Ae,className:`h-10 px-3 rounded-xl border ${Ae?"bg-white hover:bg-gray-50":"opacity-50 cursor-not-allowed"} inline-flex items-center gap-2 text-sm`,title:"\ub2e4\uc2dc\ud558\uae30 (Ctrl/Cmd+Shift+Z)",children:(0,f.jsx)(D.A,{size:16})})]})]}),0===_e.length?(0,f.jsx)("div",{className:"mt-3 text-sm text-gray-500",children:"\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,f.jsx)("div",{className:"mt-3 flex-1 min-h-0 space-y-2 overflow-auto",children:_e.map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-2 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-medium",children:e.title}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:e.time})]}),e.detail&&(0,f.jsx)("div",{className:"mt-1 text-xs text-gray-700",children:e.detail}),e.meta&&(0,f.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1.5 text-[11px] text-gray-600",children:["cost"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ube44\uc6a9 ",ie(e.meta.cost)," G"]}),"attemptsLeft"in e.meta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub0a8\uc740 \uac00\uacf5 ",e.meta.attemptsLeft,"\ud68c"]}),"rerollDelta"in e.meta&&0!==e.meta.rerollDelta&&(0,f.jsxs)("span",{className:"px-1.5 py-0.5 rounded-lg border bg-gray-50",children:["\ub2e4\ub978 \ud56d\ubaa9 \ubcf4\uae30 ",e.meta.rerollDelta>0?`+${e.meta.rerollDelta}`:e.meta.rerollDelta]})]})]},e.id))})]})]}),(0,f.jsxs)("section",{className:ct,children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("h2",{className:mt,children:"\uacb0\uacfc \ucd9c\ub825"}),(0,f.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,f.jsxs)("span",{className:"px-2.5 py-1.5 rounded-xl bg-gray-100 text-[10px] lg:text-xs text-gray-600",children:["Monte Carlo ",ie(Math.max((null===Ye||void 0===Ye?void 0:Ye.trialsUsed)||0,(null===Ve||void 0===Ve?void 0:Ve.trialsUsed)||0)),"\ud68c",null!==Ye&&void 0!==Ye&&null!==(e=Ye.ci)&&void 0!==e&&e.halfWidth?` (\xb1${(100*Ye.ci.halfWidth).toFixed(2)}%p @95%)`:""]})})]}),gt?(0,f.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:[...Array(4)].map((e,t)=>(0,f.jsx)("div",{className:"h-6 w-28 rounded-lg bg-gray-100 animate-pulse"},t))}),(0,f.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-2",children:[0,1].map(e=>(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"h-4 w-32 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-3 h-8 w-2/3 bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-2 h-2 w-full bg-gray-100 rounded animate-pulse"}),(0,f.jsx)("div",{className:"mt-4 h-4 w-40 bg-gray-100 rounded animate-pulse"})]},e))})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"mt-2 text-sm text-gray-700",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\ud604\uc7ac \uacc4\uc0b0\uc5d0 \ubc18\uc601\ub418\ub294 1\ud68c\ucc28 \uc120\ud0dd\uc9c0"}),(0,f.jsx)("div",{className:"flex flex-wrap gap-1.5",children:De.map((e,t)=>(0,f.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white text-[12px]",children:e},t))})]}),Ye&&Ve&&(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,f.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ubaa9\ud45c \ub2ec\uc131 \ud655\ub960"}),(0,f.jsx)("span",{className:"px-2 py-1 rounded-lg bg-gray-50 text-[11px] text-gray-600",children:"IGNORE_AB"===xt?"\ucd94\uac00 \ud6a8\uacfc \uc0c1\uad00 \uc5c6\uc74c":"ANY_ONE"===xt?"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 1\uac1c \uc774\uc0c1":"\ucd94\uac00 \ud6a8\uacfc \uc5ed\ud560\uad70 \uc635\uc158 2\uac1c \uc804\ubd80"})]}),(0,f.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"text-xs text-gray-500",children:["\ub2ec\uc131 \uc989\uc2dc \uac00\uacf5 \uc644\ub8cc ( ",ie(Ve.successes),"\ud68c / ",ie(Ve.trialsUsed),"\ud68c )"]}),"                        "]}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:ne(Ve.successProb,Ve.ci)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ve.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=oe(Ve.expectedGold,Ve.successProb),t=de(Ve.successProb);return(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,f.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,f.jsx)("b",{children:Number.isFinite(e)?ie(Math.round(e)):"\u221e"})," G"]}),(0,f.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]}),(0,f.jsxs)("div",{className:"rounded-xl border p-3 bg-white/60 backdrop-blur-sm",children:[(0,f.jsx)("div",{className:"flex items-center justify-between",children:(0,f.jsxs)("div",{className:"text-xs text-gray-500",children:["\uac00\uacf5 \ud69f\uc218 \uc804\ubd80 \uc18c\ubaa8 ( ",ie(Ye.successes),"\ud68c / ",ie(Ye.trialsUsed),"\ud68c )"]})}),(0,f.jsx)("div",{className:"mt-1 text-2xl font-bold",children:re(Ye.successProb)}),(0,f.jsx)("div",{className:"mt-2 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:`${Math.round(100*Ye.successProb)}%`},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r from-[#85d8ea] to-[#a399f2]"})}),(()=>{const e=oe(Ye.expectedGold,Ye.successProb),t=de(Ye.successProb);return(0,f.jsxs)("div",{className:"mt-2 text-xs text-gray-700 flex items-center gap-2 flex-wrap",children:[(0,f.jsxs)("span",{children:["\uc131\uacf5 1\ud68c ",(0,f.jsx)("b",{children:"\uae30\ub300\ube44\uc6a9"}),": ",(0,f.jsx)("b",{children:Number.isFinite(e)?ie(Math.round(e)):"\u221e"})," G"]}),(0,f.jsxs)("span",{className:`px-2 py-0.5 rounded-lg border ${t.tone}`,children:["\uace8\ub4dc\ubd80\ub2f4: ",t.label]}),(0,f.jsx)("span",{className:"text-[11px] text-gray-500",children:"(\ud655\ub960\uc774 \ub0ae\uc744\uc218\ub85d \uae30\ub300\ube44\uc6a9\uc774 \ucee4\uc9d1\ub2c8\ub2e4)"})]})})()]})]})]}),(0,f.jsxs)(x.P.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.18,delay:.05},className:"rounded-xl border p-3 bg-white",children:[(0,f.jsx)("div",{className:"text-sm font-semibold flex items-center gap-2",children:"\ub4f1\uae09 \ud655\ub960"}),(()=>{if(!Ye)return null;const e=[{key:"legendProb",name:"\uc804\uc124 (4~15)",p:Number(Ye.legendProb||0),grad:Se.legend},{key:"relicProb",name:"\uc720\ubb3c (16~18)",p:Number(Ye.relicProb||0),grad:Se.relic},{key:"ancientProb",name:"\uace0\ub300 (19+)",p:Number(Ye.ancientProb||0),grad:Se.ancient}];return(0,f.jsx)("div",{className:"mt-3 space-y-3 text-sm",children:e.map(e=>(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-700",children:e.name}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[J(e.p)&&(0,f.jsx)("span",{className:"px-2 py-0.5 rounded-lg border bg-emerald-50 border-emerald-200 text-emerald-800 text-[11px]",children:"\ud655\uc815"}),(0,f.jsx)("b",{children:re(e.p)})]})]}),(0,f.jsx)("div",{className:"mt-1 w-full h-2 rounded-full bg-gray-100 overflow-hidden",children:(0,f.jsx)(x.P.div,{initial:{width:0},animate:{width:J(e.p)?"100%":ce(e.p)},transition:{type:"spring",stiffness:260,damping:28},className:"h-full bg-gradient-to-r",style:{backgroundImage:e.grad}})})]},e.key))})})(),(()=>{const{order:e,comps:t}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e-4;if(!e)return{order:[],comps:[]};let l=[{key:"legendProb",label:"\uc804\uc124",p:Number(e.legendProb||0),grad:Se.legend},{key:"relicProb",label:"\uc720\ubb3c",p:Number(e.relicProb||0),grad:Se.relic},{key:"ancientProb",label:"\uace0\ub300",p:Number(e.ancientProb||0),grad:Se.ancient}];if(l=l.filter(e=>!K(e.p)),!l.length)return{order:[],comps:[]};l.sort((e,t)=>t.p-e.p);const s=[];for(let a=0;a<l.length-1;a++){const e=l[a].p-l[a+1].p;s.push(Math.abs(e)<=t?"=":">")}return{order:l,comps:s}}(Ye);return e.length?(0,f.jsxs)("div",{className:"mt-2 rounded-xl bg-white/70",children:[(0,f.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"\uac00\ub2a5\uc131 \ub192\uc740 \uc21c\uc11c"}),(0,f.jsx)("div",{className:"flex flex-wrap items-center gap-1.5",children:e.map((l,a)=>(0,f.jsxs)(s.Fragment,{children:[(0,f.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg border bg-white shadow-sm",children:[(0,f.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-gradient-to-r",style:{backgroundImage:l.grad}}),(0,f.jsxs)("span",{className:"text-sm",children:[l.label,J(l.p)?" (\ud655\uc815)":""]})]}),a<e.length-1&&(0,f.jsx)("span",{className:"mx-0.5 text-gray-400 select-none",children:"="===t[a]?"\uff1d":"\uff1e"})]},l.key))})]}):null})()]})]})]})]})]}),(0,f.jsx)(Me,{toasts:t,onClose:a}),(0,f.jsx)("div",{className:"mt-6",children:(0,f.jsx)(h.A,{})})]})}function Te(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:520;const[t,l]=s.useState(!1);return s.useEffect(()=>{const t=()=>{const t=document.documentElement,s=t.scrollHeight-(t.scrollTop+window.innerHeight);l(s<=e)};return t(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t}(520);return(0,f.jsx)("div",{className:"fixed z-50 right-4 bottom-4 sm:right-6 sm:bottom-6 pr-[env(safe-area-inset-right)] pb-[env(safe-area-inset-bottom)]",children:(0,f.jsxs)("button",{type:"button","aria-label":"\ub9e8 \uc704\ub85c",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:["inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white/90 px-4 py-3 shadow-lg backdrop-blur","text-gray-700 hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/40","transition transform duration-200",e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"].join(" "),children:[(0,f.jsx)(r.A,{size:18}),(0,f.jsx)("span",{className:"hidden sm:inline text-sm font-medium",children:"TOP"})]})})}function Fe(){return(0,f.jsxs)(a.I9,{basename:"/core",children:[(0,f.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,f.jsx)("header",{className:"sticky top-0 z-40 border-b border-gray-200/60 bg-white/70 backdrop-blur",children:(0,f.jsx)("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 py-3",children:(0,f.jsx)("nav",{"aria-label":"Core pages",children:(0,f.jsxs)("ul",{className:"mx-auto flex w-full flex-wrap justify-center gap-1 rounded-xl",children:[(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/gem",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uac00\uacf5 \ud5ec\ud37c"})}),(0,f.jsx)("li",{children:(0,f.jsx)(a.k2,{to:"/optimizer",className:e=>{let{isActive:t}=e;return["px-4 py-2 text-sm font-medium rounded-lg transition","outline-none focus-visible:ring-2 focus-visible:ring-[#a399f2]/30",t?"bg-[#a399f2]/10 text-[#5b54c6]":"text-gray-700 hover:bg-gray-50"].join(" ")},children:"\uc82c \uc7a5\ucc29 \ud5ec\ud37c"})})]})})})}),(0,f.jsx)("main",{children:(0,f.jsxs)(a.BV,{children:[(0,f.jsx)(a.qh,{path:"/gem",element:(0,f.jsx)(_e,{})}),(0,f.jsx)(a.qh,{path:"/optimizer",element:(0,f.jsx)(I,{})}),(0,f.jsx)(a.qh,{path:"*",element:(0,f.jsx)(a.C5,{to:"/gem",replace:!0})})]})})]}),(0,f.jsx)(Te,{})]})}},346:(e,t,l)=>{l.d(t,{A:()=>n});var s=l(43),a=l(579);const n=function(){const e=(0,s.useRef)(null);return(0,s.useEffect)(()=>{const t=document.createElement("ins");t.className="kakao_ad_area",t.style.display="none",t.setAttribute("data-ad-unit","DAN-V4UQDzJ7BdEKoWll"),t.setAttribute("data-ad-width","320"),t.setAttribute("data-ad-height","50");const l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src="//t1.daumcdn.net/kas/static/ba.min.js",e.current&&(e.current.innerHTML="",e.current.appendChild(t),e.current.appendChild(l))},[]),(0,a.jsx)("div",{ref:e,className:"kakao-adfit-container"})}}}]);
//# sourceMappingURL=299.238ad451.chunk.js.map